define("core/core/dataRequirementsChecker",["utils","lodash"],function(a,b){"use strict";function i(a,b,c){var d=c.styleId&&a.getDataByQuery(c.propertyQuery,b,a.dataTypes.THEME);return{data:c.dataQuery?a.getDataByQuery(c.dataQuery,b):null,properties:c.propertyQuery?a.getDataByQuery(c.propertyQuery,b,a.dataTypes.PROPERTIES):null,skin:d?d.skin:c.skin,id:c.id,pageId:b}}function j(a,d,g,k){var l=i(a,g,k),m=b.has(f,k.componentType);m&&(h[k.componentType]=h[k.componentType]||[],h[k.componentType].push(l));var n=e[k.componentType],o=n?n(a,l,d):[],p=c.getChildrenData(k,a.isMobileView());return b.reduce(p,function(b,c){return b.concat(j(a,d,g,c))},o)}function k(a,b){if(!b.pageItemId)return[];var c=a.pagesData[d],f=c.data.document_data[b.pageItemId];if(!f||"PermaLink"!==f.type)return[];var g=c.data.document_data[f.dataItemRef.replace(/^#/,"")];if(!g)return[];var h=c.data.component_properties[f.dataItemRef.replace(/^#/,"")],i=e["Zoom:"+g.type];if(i){var j={data:g,properties:h};return i(a,j,b)}return[]}function l(a,c){return b(h).map(function(b,d){var e=f[d];return e(a,b,c)}).flatten().value()}function m(a,c){return b(g).map(function(b,d){var e=a.getClientSpecMapEntryByAppDefinitionId(d);return e?b(a,e,c):void 0}).compact().flatten().value()}function n(a,b){return h={},j(a,b,d,a.pagesData[d].structure).concat(j(a,b,b.pageId,a.pagesData[b.pageId].structure),k(a,b),l(a,b),m(a,b))}var c=a.dataUtils,d="masterPage",e={},f={},g={},h={};return{getNeededRequests:function(b,c){return b.santaBase=b.santaBase||b.serviceTopology.scriptsLocationMap.santa,b.pagesData[c.pageId]?n(b,c):a.pageRequests(b,c)},registerCheckerForCompType:function(a,b){e[a]=b},registerCheckerForAllCompsOfType:function(a,b){f[a]=b},registerCheckerForAppDefId:function(a,b){g[a]=b}}}),define("core/siteRender/styleCollector",["lodash","utils","skins"],function(a,b,c){"use strict";function f(a,b,c){var d=c.styleId&&a.getDataByQuery(c.styleId,b,a.dataTypes.THEME);return{dataItem:c.dataQuery&&a.getDataByQuery(c.dataQuery,b),propertiesItem:c.propertyQuery&&a.getDataByQuery(c.propertyQuery,b,a.dataTypes.PROPERTIES),styleItem:d,structure:c}}function g(c,h,i,j,k,l){var o,m=c.styleId&&h[c.styleId]&&d[h[c.styleId].skin],n=c.skin&&d[c.skin];if(o=m?c.styleId:n?c.skin:"",o&&!j[o]&&(j[o]="s"+a.size(j)),c.componentType&&e[c.componentType]){var p=f(i,k,c);e[c.componentType](p,h,i,j,k)}var q=b.dataUtils.getChildrenData(c,!!l);a(q).compact().forEach(function(a){g(a,h,i,j,k)}).commit()}function h(a,b){e[a]=b}var d=c.skins,e={};return{collectStyleIdsFromStructure:g,registerClassBasedStyleCollector:h}}),define("core/fonts/FontRuler",["react","reactDOM","utils","lodash"],function(a,b,c,d){"use strict";var e=a.createClass({displayName:"FontRuler",handleFontResize:function(){this.rafID||(this.rafID=c.animationFrame.request(this.handleFontResizeRAF))},handleFontResizeRAF:function(){if(delete this.rafID,this.isMounted()){var a=b.findDOMNode(this.refs.content);if(a){var e=this.contentNodeOrigSize.width&&this.contentNodeOrigSize.height&&(a.offsetWidth!==this.contentNodeOrigSize.width||a.offsetHeight!==this.contentNodeOrigSize.height);e&&!this.triggeredResize?(this.triggeredResize=!0,d.defer(c.animationFrame.request.bind(null,this.props.onLoadCallback))):this.updateCurrentSize()}}},updateCurrentSize:function(){var a=b.findDOMNode(this.refs.wrapper),c=b.findDOMNode(this.refs.content),d=b.findDOMNode(this.refs.innerContent),e=b.findDOMNode(this.refs.innerWrapper),f={width:a.offsetWidth,height:a.offsetHeight};a.style.width=f.width-1+"px",a.style.height=f.height-1+"px",a.scrollLeft=a.scrollWidth-a.clientWidth,a.scrollTop=a.scrollHeight-a.clientHeight,d.style.width=f.width+1+"px",d.style.height=f.height+1+"px",e.scrollLeft=e.scrollWidth-e.clientWidth,e.scrollTop=e.scrollHeight-e.clientHeight,this.contentNodeOrigSize={width:c.offsetWidth,height:c.offsetHeight},this.contentNodeOrigSize.width&&this.contentNodeOrigSize.height&&(c.style.fontFamily=this.props.fontFamily+", serif")},componentDidMount:function(){this.triggeredResize=!1,this.updateCurrentSize()},componentWillUnmount:function(){this.rafID&&(c.animationFrame.cancel(this.rafID),this.rafID=null)},render:function(){var b=a.DOM.div({ref:"innerContent",refInParent:"innerContent"}),c=a.DOM.div({ref:"innerWrapper",refInParent:"innerWrapper",onScroll:this.handleFontResize,style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"}},b),d=a.DOM.div({style:{position:"relative",whiteSpace:"nowrap",fontFamily:"serif"}},c,a.DOM.span({ref:"content",className:"font-ruler-content"})),e=a.DOM.div({ref:"wrapper",refInParent:"wrapper",onScroll:this.handleFontResize,style:{position:"absolute",overflow:"hidden",fontSize:1200,left:-2e3,visibility:"hidden"}},d);return e}});return e}),define("core/fonts/FontRulersContainer",["react","lodash","core/fonts/FontRuler"],function(a,b,c){"use strict";var d=a.createFactory(c),e=a.createClass({displayName:"FontRulersContainer",getInitialState:function(){return{loadedFonts:[]}},render:function(){var c=this.props.fontsList,e=[{key:"fontRulersContainer",style:{overflow:"hidden",visibility:"hidden",maxHeight:0,maxWidth:0,position:"absolute"}},a.DOM.style({dangerouslySetInnerHTML:{__html:'.font-ruler-content::after {content:"@#$%%^&*~IAO"}'}})],f=this.props.onLoadCallback;return b.forEach(c,function(a){b.includes(this.state.loadedFonts,a)||e.push(d({key:a,fontFamily:a,onLoadCallback:function(){var b=this.state.loadedFonts.concat(a);this.isMounted()&&this.setState({loadedFonts:b}),f()}.bind(this)}))},this),a.DOM.div.apply(void 0,e)},hasPendingFonts:function(){return b.difference(this.props.fontsList,this.state.loadedFonts).length>0}});return e}),define("core/fonts/fontsLoader",["lodash","react","fonts","core/fonts/FontRulersContainer"],function(a,b,c,d){"use strict";function f(a,b,c){return e({fontsList:a,onLoadCallback:b,ref:c,key:c})}function g(b,d,e){var f=c.fontUtils.getPageUsedFontsList(b,b.getCurrentPageId()),g=c.fontUtils.getPageUsedFontsList(b,"masterPage");return this.getRulersNode(a.union(f,g),d,e)}var e=b.createFactory(d);return{getRulersNode:f,getFontsLoaderNode:g}}),define("core/siteRender/WixThemeReact",["zepto","lodash","react","skins","fonts","utils","core/fonts/fontsLoader","reactDOM"],function(a,b,c,d,e,f,g,h){"use strict";function n(a){var b=a.santaBase+"/static/css/mobileIEFix.css";return c.DOM.link({rel:"stylesheet",type:"text/css",href:b})}function o(a,d,e){return e&&(d=b.map(d.trim().split("\n"),function(a){var c=a.split("{"),d=c[0].split(",");return c[0]=b.map(d,function(a){return e+" "+a}),c.join("{")},this).join("\n")),c.DOM.style({type:"text/css",key:a,dangerouslySetInnerHTML:{__html:d||""}})}function p(a,b,c){var d="";d=f.stringUtils.startsWith(a,"#")?c+":"+a+";":c+":rgba("+a+");";var e="."+b+" {"+d+"}";return e}function q(a,c){var d=b.map(a.THEME_DATA.font,function(b,d){var e=".font_"+d+" {font:"+k.fontToCSSWithColor(b,a.THEME_DATA)+"}";return o("font"+d,e,c)}),e=o("color",b.map(a.THEME_DATA.color,function(a,b){return p(a,"color_"+b,"color")+"\n"+p(a,"backcolor_"+b,"background-color")}).join("\n"),c);return d.push(e),d}function r(a,c,d,e,f,g){var h=b.get(e,"style.properties")||{},i=l.createSkinCss(c,h,a.THEME_DATA,d,f);return o(d,i,g)}function s(a,c,d,e){var f=[];return b.forEach(b.keys(c),function(b){var g=c[b],h=a[b],i=m[h?h.skin:b];i&&f.push(r(a,i,g,h,d,e))},this),f.push(r(a,m["wysiwyg.viewer.skins.wixadsskins.WixAdsWebSkin"],"wixAds",null,d,e)),f.push(r(a,m["skins.viewer.deadcomp.DeadCompPublicSkin"],"deadComp",null,d,e)),f.push(r(a,m["wysiwyg.viewer.skins.siteBackgroundSkin"],"siteBackground",null,d,e)),f.push(r(a,m["wysiwyg.viewer.skins.PasswordLoginSkin"],"loginDialog",null,d,e)),f}function t(a,b){var d=(b?b+" ":"")+"."+i+" {position:absolute; display: none; z-index: "+a+"}";return[c.DOM.style({type:"text/css",key:"testStyle"},d),c.DOM.div({ref:i,className:i})]}var i="testStyles",j=e.fontUtils,k=e.fontCss,l=d.skinsRenderer,m=d.skins;return c.createClass({displayName:"WixThemeReact",getInitialState:function(){return this.testNodeIndex=0,this.waitingForStylesReady=!1,this.registeredUsedFonts=[],null},render:function(){this.testNodeIndex=(this.testNodeIndex+1)%100;var a=[{key:"theme"}],b=this.props.themeData,d=this.props.siteData,e=this.props.masterPage.data.document_data.SITE_STRUCTURE;return b.THEME_DATA&&b.THEME_DATA.font&&(this.registerSkinsFontsUsage(),d.getBrowser().ie&&!d.isMobileView()&&a.push(n(d)),a=a.concat(q(b,this.props.styleRoot),s(b,this.props.loadedStyles,this.props.siteData.mobile,this.props.styleRoot),t(this.testNodeIndex,this.props.styleRoot)),this.props.shouldRenderPage&&(a=a.concat(this.getFontsCssLinks(d,e),g.getFontsLoaderNode(d,this.waitForStylesReady,"fontsLoader")))),c.DOM.div.apply(void 0,a)},componentWillUnmount:function(){this.afterStylesReadyCallback=null,this.waitingForStylesReady=!1},registerStylesReadyCallback:function(a){this.afterStylesReadyCallback=a},initWaitForStylesReady:function(){this.waitingForStylesReady||this.waitForStylesReady()},waitForStylesReady:function(){if(this.isMounted()){var b=h.findDOMNode(this.refs[i]);this.waitingForStylesReady=!0;var c="function"==typeof this.afterStylesReadyCallback;a(b).css("z-index")==this.testNodeIndex&&c?(this.waitingForStylesReady=!1,this.afterStylesReadyCallback()):f.animationFrame.request(this.waitForStylesReady)}},getFontsCssLinks:function(){var a=this.props.siteData,d="WixSite"===a.rendererModel.siteInfo.documentType?[a.serviceTopology.publicStaticsUrl+"/css/Helvetica/fontFace.css"]:[],e=j.getWixStoredFontsCssUrlsWithParams(a.santaBase,this.getCharacterSets(),a.serviceTopology.scriptsLocationMap.santa);return d=d.concat(e),this.getGoogleFontsLinks().concat(b.map(d,function(a){return c.DOM.link({rel:"stylesheet",type:"text/css",href:a,key:a})}))},getGoogleFontsLinks:function(){this.loadedGoogleFontsLinks=this.loadedGoogleFontsLinks||[],this.loadedGoogleFonts=this.loadedGoogleFonts||[];var a=this.props.siteData,d=b(j.getPageFontsMetaData(a,a.getCurrentPageId())).union(j.getPageFontsMetaData(a,"masterPage")).union(j.getMetadata(this.skinsFonts)).filter({provider:"google"}),e=d.difference(this.loadedGoogleFonts).valueOf();this.loadedGoogleFonts=d.union(this.loadedGoogleFonts).valueOf();var f=j.getGoogleFontsUrl(e,this.getCharacterSets());return f&&this.loadedGoogleFontsLinks.push(c.DOM.link({key:"gf_"+this.loadedGoogleFontsLinks.length,rel:"stylesheet",type:"text/css",href:f})),this.loadedGoogleFontsLinks},registerSkinFontsUsage:function(a,c,d){if(this.registerInnerSkinFontsUsage(a,c,d),c.params){var e=b.keys(b.omit(c.params,function(a){return"FONT"!==a}));b.get(d,"style.propertiesSource")&&b.forEach(e,function(b){var c="",e=d.style.propertiesSource[b],f=d.style.properties[b];"value"===e?c=j.parseFontStr(f).family.toLowerCase():"theme"===e&&(c=j.getFontFamilyByStyleId(a,f)),c&&this.registerSkinFontUsage(c)},this)}},registerInnerSkinFontsUsage:function(a,c,d){c.exports&&b.forEach(c.exports,function(b){b.skin&&m[b.skin]&&this.registerSkinFontsUsage(a,m[b.skin],d)},this)},registerSkinsFontsUsage:function(){var a=this.props.themeData;b.forEach(b.keys(this.props.loadedStyles),function(b){var c=a[b],d=m[c?c.skin:b];d&&this.registerSkinFontsUsage(a.THEME_DATA,d,c)},this)},registerSkinFontUsage:function(a){this.skinsFonts=b.union(this.skinsFonts,[a])},getCharacterSets:function(){return this.props.masterPage.data.document_data.SITE_STRUCTURE.characterSets||["latin"]}})}),define("core/siteRender/compFactory",["react","lodash"],function(a,b){"use strict";var c={},d={},e={};return{getCompClass:function(b){var f=e[b];if(f)return f;var g=c[b];if(!g)return void console.error("Component not implemented: ["+b+"]");var h=a.createClass({mixins:[g].concat(d[b])});return f=a.createFactory(h),e[b]=f,f},invalidate:function(a){delete e[a]},extend:function(a,e){return c.hasOwnProperty(a)?void(d[a]=b.union(d[a].concat(e))):void console.error("Trying to extend component ["+a+"] but the component is not defined")},register:function(a,b){return c[a]=b,d[a]=[],this}}}),define("core/util/extraPageStructureRegistry",[],function(){"use strict";var a={ImageZoom:function(a){return{id:"imageZoomComp",skin:"wysiwyg.viewer.skins.MediaZoomSkin",componentType:"wysiwyg.viewer.components.MediaZoom",styleId:"zoom",dataQuery:"#"+a}}};return a}),define("core/core/componentPropsBuilder",["lodash","utils","experiment!compStateMixin","experiment"],function(a,b,c,d){"use strict";function e(a,b,c){return a&&Math.max(b,Math.min(c,a))}function f(a,b){return a.styleId&&b.getAllTheme()[a.styleId]?b.getAllTheme()[a.styleId].skin:a.skin}function g(){return{top:"",bottom:"",left:"",right:"",width:"",height:"",position:""}}function h(a,d,f){d=c?f.getDAL().getCompLayout(a):d;var h=g();if(h.position=d&&d.position||"absolute",d){if(b.layout.isHorizontallyDocked(d)||(h.left=d.x),b.layout.isVerticallyDocked(d)||(h.top=d.y),b.layout.isVerticallyStretched(d)||(h.height=e(d.height,b.siteConstants.COMP_SIZE.MIN_HEIGHT,b.siteConstants.COMP_SIZE.MAX_HEIGHT)),b.layout.isHorizontallyStretched(d)||(h.width=e(d.width,b.siteConstants.COMP_SIZE.MIN_WIDTH,b.siteConstants.COMP_SIZE.MAX_WIDTH)),d.fixedPosition&&(h.position="fixed"),d.rotationInDegrees){var i=b.style.getPrefixedTransform();h[i]="rotate("+d.rotationInDegrees+"deg) translateZ(0)"}if(d.docked){var j=f.getSiteData();b.dockUtils.applyDockedStyle(j,d,h)}}return h}function i(a,b,c,e){return c?d.isOpen("wixCodeBinding")?a.getDAL().getCompProps(b):a.getSiteData().getDataByQuery(c,e,"component_properties"):{}}function j(a,b,c,e){return d.isOpen("wixCodeBinding")?a.getDAL().getCompData(b):a.getSiteData().getDataByQuery(c,e,"document_data")}function k(a,b){return b?a.styleId&&b[a.styleId]||a.skin&&b[a.skin]:a.styleId}function l(a,b,d,e){var g=b.getSiteData(),l=d||"masterPage",m=g.pagesData[l],n=b.getSiteAspect("behaviorsAspect"),o=a.id,p={structure:a,pageData:m,siteData:g,siteAPI:b,id:o,key:o,ref:o,refInParent:o,pageId:l,currentPage:b.getCurrentPageId(),loadedStyles:e,styleId:k(a,e),skin:f(a,g),style:h(o,a.layout,b),compProp:i(b,o,a.propertyQuery,d)||{},compActions:n.getActions("comp",o)};return a.dataQuery&&(p.compData=j(b,o,a.dataQuery,d)),c&&(p.compState=b.getDAL().getCompState(o)),p}return{getCompProps:l,getStyle:h}}),define("core/components/animatableMixin",["lodash"],function(a){"use strict";return{isAnimatable:!0,shouldChildrenUpdate:!0,componentWillMount:function(){this._animatableMixin={animationsCounter:0,deferredStates:[]}},componentDidMount:function(){this._animatableMixin.setStateOrig=this.setState},componentWillUnmount:function(){this._animatableMixin.updateOnAnimationEnded=!1},animationStarted:function(){1===++this._animatableMixin.animationsCounter&&(this.setState=this.setStateDeferred),this.shouldChildrenUpdate||a(this.refs).filter("isAnimatable").invoke("animationStarted").value()},animationEnded:function(b){b=b!==!1,this.shouldChildrenUpdate||a(this.refs).filter("isAnimatable").invoke("animationEnded",!1).value();var c=this._animatableMixin;if(c.animationsCounter&&0===--c.animationsCounter&&(this.setState=c.setStateOrig),b)if(c.deferredStates.length){for(var d=c.deferredStates,e=0;e<d.length;e+=2)c.setStateOrig.call(this,d[e],d[e+1]);d.length=0}else c.updateOnAnimationEnded&&this.forceUpdate();this._updateOnAnimationEnded=!1},setStateDeferred:function(b,c){var d=this._animatableMixin.deferredStates,e=d.length;0===e||d[e-1]||c?(d.push(b),d.push(c)):(a.assign(d[e-2],b),d[e-1]=c)},shouldComponentUpdateAnimatable:function(){var a=0===this._animatableMixin.animationsCounter;return a||(this._animatableMixin.updateOnAnimationEnded=!0),a}}}),define("core/components/renderDoneMixin",["lodash"],function(a){"use strict";function e(){if(b.length&&0===c){var d=b;b=[],a.forEach(d,function(a){a()}),e()}}function f(){0===d&&(c--,e())}function g(){0===d&&c++}function h(a){d+=a?1:-1}function i(a){return this.isMounted()?void(0===c?a():b.push(a)):void console.error("only invoke callAfterRenderDone if the component is mounted")}var b=[],c=0,d=0;return{componentDidMount:f,componentDidUpdate:f,componentWillMount:g,componentWillUpdate:g,toggleRenderToString:h,callAfterRenderDone:i}}),define("core/components/compStateMixin",["react"],function(a){"use strict";function b(){var a=this.props.siteAPI.getDAL(),b=this.props.id||this.props.structure.id;a.setCompState(b,this.state)}return{propTypes:{siteAPI:a.PropTypes.object.isRequired,id:a.PropTypes.string,structure:a.PropTypes.object,compState:a.PropTypes.object},componentWillReceiveProps:function(a){a.compState&&this.setState(a.compState)},componentWillMount:function(){this.props.compState&&this.setState(this.props.compState)},componentDidMount:function(){b.call(this)},componentDidUpdate:function(){b.call(this)}}}),define("core/components/baseCompMixin",["lodash","core/components/animatableMixin","core/components/renderDoneMixin","core/components/compStateMixin","experiment!compStateMixin"],function(a,b,c,d,e){"use strict";var f={mixins:e?[d,b,c]:[b,c],getInitialState:function(){return e?{visible:!0}:{}},registerReLayout:function(){this.props.siteAPI&&this.props.siteAPI.registerReLayoutPending&&this.props.siteAPI.registerReLayoutPending()},componentDidUpdate:function(){this.props.siteAPI&&this.props.siteAPI.reLayoutIfPending&&this.callAfterRenderDone(this.props.siteAPI.reLayoutIfPending.bind(this.props.siteAPI))},isComponentActive:function(a){return"masterPage"===a.pageId||a.pageId===a.currentPage},shouldComponentUpdate:function(a,b){var c=!this.shouldComponentUpdateAnimatable||this.shouldComponentUpdateAnimatable(a,b),d=this.isComponentActive(a),e=this.shouldComponentUpdatePage&&this.shouldComponentUpdatePage(a,b);return c&&(e||d)}};return f}),define("core/components/util/animationsQueueHandler",["lodash","animations","reactDOM"],function(a,b,c){"use strict";function d(b){var c=b.comp;return a(b.animations).map(function(a){var b=[];return"object"==typeof a.refNames?(b=j(c,a.refNames.sourceRefs),a.refNames.destRefs&&(b=b.concat(j(c,a.refNames.destRefs)))):b=j(c,a.refNames),b}).flattenDeep().compact().uniq().value()}function e(c,d,e){return a.forEach(c.animations,function(c){var f=c.params||{};f="function"==typeof f?c.params():a.cloneDeep(f);var g,h,i;a.isPlainObject(c.refNames)?(g=k(d,c.refNames.sourceRefs),h=c.refNames.destRefs&&k(d,c.refNames.destRefs)):g=k(d,c.refNames),h?(i=b.transition(c.animationName,g,h,c.duration,c.delay,f),i&&e.add(i,c.position)):(i=b.animate(c.animationName,g,c.duration,c.delay,f),i&&e.add(i,c.position))}),e.get()}function f(c,f){for(var i,j,k,l,m,n;c.length;)l=c.pop(),j=l.comp,i={},l.callbacks=l.callbacks||{},k=l.params||{},k="function"==typeof k?l.params():a.cloneDeep(k),m={suppressReactRendering:k.suppressReactRendering!==!1,forgetSequenceOnComplete:k.forgetSequenceOnComplete!==!1,id:l.id},n=d(l),i.onStart=g.bind(null,n,m,l.callbacks.onStart),i.onComplete=h.bind(null,n,m,l.callbacks.onComplete,f),i.onInterrupt=h.bind(null,n,m,l.callbacks.onInterrupt,f),k.callbacks=i,f[l.id]=e(l,j,b.sequence(k))}function g(b,c,d){c.suppressReactRendering&&a.invoke(b,"animationStarted"),d&&d()}function h(b,c,d,e){c.forgetSequenceOnComplete&&delete e[c.id],c.suppressReactRendering&&a.invoke(b,"animationEnded"),d&&d()}function i(a,b){return a.refs[b]}function j(b,c){return c=a.isArray(c)?c:[c],a.map(c,function(c){return a.isArray(c)?a.reduce(c,i,b):a.isString(c)?b.refs[c]:c})}function k(b,d){return a.map(j(b,d),c.findDOMNode)}return{flushQueue:f,getElementsByRefs:k}}),define("core/components/animationsMixin",["zepto","lodash","animations","core/components/util/animationsQueueHandler"],function(a,b,c,d){"use strict";function e(a){this.comp=a,this.animations=[],this.callbacks={},this.id=b.uniqueId("seq_")}return e.prototype.add=function(a,b,c,d,e,f){return this.animations.push({refNames:a,animationName:b,duration:c,delay:d,params:e,position:f}),this},e.prototype.onCompleteAll=function(a){return this.callbacks.onComplete=a,this},e.prototype.onInterruptAll=function(a){return this.callbacks.onInterrupt=a,this},e.prototype.onStartAll=function(a){return this.callbacks.onStart=a,this},e.prototype.execute=function(a){return this.comp.executeAnimationsWhenPossible(this.comp,this.id,this.animations,this.callbacks,a),this.id},e.prototype.getId=function(){return this.id},e.prototype.hasAnimations=function(){return!b.isEmpty(this.animations)},{getInitialState:function(){return this._animationsQueue=[],this._liveSequences={},this._isBusy=!0,null},executeAnimationsWhenPossible:function(a,c,e,f,g){b.isEmpty(this._liveSequences)&&(this._liveSequences={}),b.isEmpty(this._animationsQueue)&&(this._animationsQueue=[]),this._animationsQueue.push({comp:a,id:c,animations:e,callbacks:f,params:g}),this.isBusy()||d.flushQueue(this._animationsQueue,this._liveSequences)},componentWillUpdate:function(){this._isBusy=!0},componentDidUpdate:function(){this._isBusy=!1,this.isBusy()||d.flushQueue(this._animationsQueue,this._liveSequences)},componentDidMount:function(){this._isBusy=!1},componentDidLayoutAnimations:function(){d.flushQueue(this._animationsQueue,this._liveSequences)},componentWillUnmount:function(){this._isBusy=!0,this.clearAnimationsQueue(!1)},clearAnimationsQueue:function(a){b.forEach(this._liveSequences,function(b){c.kill(b,a?1:void 0)}),this._liveSequences={},this._animationsQueue=[]},isBusy:function(){return!this.isMounted()||this._isBusy||this.props.siteAPI.isSiteBusy()},animate:function(a,b,c,d,e,f){var g=this.sequence(a,b,c,d,e);return f=f||{},f.onStart&&g.onStartAll(f.onStart),f.onInterrupt&&g.onInterruptAll(f.onInterrupt),f.onComplete&&g.onCompleteAll(f.onComplete),g.execute()},transition:function(a,b,c,d,e,f,g){return this.animate({sourceRefs:a,destRefs:b},c,d,e,f,g)},sequence:function(a,b,c,d,f){var g=new e(this);return arguments.length&&g.add.apply(g,arguments),g},getSequence:function(a){return a?this._liveSequences[a]:null},stopSequence:function(a,b){var d=this.getSequence(a);d&&(c.kill(d,b),delete this._liveSequences[a])},easeStartSequence:function(a,b,d,e){var f=this.getSequence(a);f&&c.animateTimeScale(f,b,0,1,d,e)},easeStopSequence:function(a,b,d,e){var g,f=this.getSequence(a);f&&(e=e||{},g=e.onComplete||function(){},e.onComplete=function(){g(),this.stopSequence(a)}.bind(this),f.paused()?this.stopSequence(a):c.animateTimeScale(f,b,1,0,d,e))},getAnimationProperties:function(a){return c.getProperties(a)},addTickerEvent:c.addTickerEvent,removeTickerEvent:c.removeTickerEvent}}),define("core/siteRender/WixPageReact",["lodash","react","core/siteRender/compFactory","utils","core/util/extraPageStructureRegistry","core/core/componentPropsBuilder","core/components/baseCompMixin","core/components/animationsMixin","reactDOM","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function m(b,c,e){var f=c&&c.behaviors||[],g=a.isString(f)?JSON.parse(f):f,h={},i=!a.get(e.getDAL().getCompProps(c.id),"isHidden");i&&(h[c.id]=g||[]);var k=j.isOpen("sv_hoverBox")?d.dataUtils.getDisplayedChildren(c,e):d.dataUtils.getChildrenData(c,b);return a.transform(k,function(c,d){a.assign(c,m(b,d,e))},h)}function n(b,c,e){var f={},g=!a.get(e.getCompProps(c.id),"isHidden");return g&&(f[c.id]=e.getActionsAndBehaviors(c.id)),a.transform(d.dataUtils.getChildrenData(c,b),function(c,d){a.assign(c,n(b,d,e))},f)}function o(b,c){return a.map(b,function(a){return{action:{name:a.action,sourceId:a.sourceId||c,type:"comp"},behavior:{name:a.name,targetId:a.targetId||c,params:a.params||a}}})}function p(){var b=this.props.siteAPI.getSiteAspect("behaviorsAspect"),c=this.props.siteData.isMobileView(),d=m(c,this.props.structure,this.props.siteAPI),e=a.mapValues(d,o),f=this.props.siteAPI.getDAL(),g=n(c,this.props.structure,f);a.forEach(g,function(a,b){e[b]=e[b].concat(a)}),e=a(e).reject(a.isEmpty).flatten().value(),b.setBehaviorsForActions(e,this.props.pageId)}function q(b,c,d){d[c.id]&&a.get(c,"layout.docked")&&(b.dimentions=d[c.id],b.style.width&&(b.style.width=d[c.id].width),b.style.height&&(b.style.height=d[c.id].height))}function r(){var b=this.props.siteAPI.getSiteAspect("actionsAspect"),c=m(this.props.siteData.isMobileView(),this.props.structure,this.props.siteAPI);a.forEach(c,function(a,c){b.registerBehaviors(c,this.props.pageId,a)},this)}function s(b,c,d,e){var g=f.getCompProps(c,b.props.siteAPI,b.props.pageId,b.props.loadedStyles);d&&(g.style=a.merge(g.style||{},d)),a.includes(["Page","Document"],c.type)&&(g.style=g.style||{},g.style.width=b.props.siteData.getSiteWidth(),b.state.stub&&(g.style.display="none"),g.pageStub=!!b.state.stub),q(g,c,e),t(g,c.id),g.children=x(b,c,e);var h=u(c);return h(g)}function t(a,c){v(c)&&(a.pageConstructor=b.createFactory(y),a.componentPropsBuilder=f,a.skin="skins.core.InlineSkin")}function u(a){return a.componentType&&c.getCompClass(a.componentType)||b.DOM.div}function v(a){return"SITE_PAGES"===a}function w(b){var c;return a.includes(k,b.componentType)?!0:(c=j.isOpen("sv_hoverBox")?d.dataUtils.getDisplayedChildren(b,this.props.siteAPI):d.dataUtils.getChildrenData(b,this.props.siteData.isMobileView()),a.some(c,w,this))}function x(b,c,e){var f=j.isOpen("sv_hoverBox")?d.dataUtils.getDisplayedChildren(c,b.props.siteAPI):d.dataUtils.getChildrenData(c,b.props.siteData.isMobileView()),g=b.props.siteData.isPageLandingPage(b.props.currentPage)&&"masterPage"===b.props.pageId;return b.state.stub&&(f=a.filter(f,w,b)),a.map(f,function(c){var d;return g&&!a.includes(l,c.componentType)&&(d={display:"none"}),s(b,c,d,e)})}var k=["wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAWidget"],l=["wysiwyg.viewer.components.PageGroup","wysiwyg.viewer.components.PagesContainer"],y=b.createClass({displayName:"WixPageReact",mixins:[g,h],getInitialState:function(){return a.merge({stub:!1},this.getStateByProps(this.props))},componentWillReceiveProps:function(a){this.setState(this.getStateByProps(a))},getStateByProps:function(a){var b={};return this.isComponentActive(a)&&(b.stub=!1),b},shouldComponentUpdatePage:function(a,b){return this.isComponentActive(a)||b.stub},render:function(){var a=this.props.siteData.isMobileView(),b=this.props.siteData.getSiteWidth(),c=this.props.siteData.getScreenSize(),e=d.structureDimensions.createDimensionsMap(this.props.structure,c,b,a);return s(this,this.props.structure,{visibility:"hidden"},e)},componentDidLayout:function(){i.findDOMNode(this).style.visibility=""},componentDidUpdate:function(){var a=this.props.siteAPI.getSiteAspect("actionsAspect");a.isPageRegistered(this.props.pageId)||(a.setPageAsRegistered(this.props.pageId),r.call(this))},componentWillUpdate:function(){p.call(this)},componentWillMount:function(){this.props.siteAPI&&(r.call(this),p.call(this))}});return y}),define("core/siteRender/wixBackgroundInstantiator",["core/siteRender/compFactory","core/core/componentPropsBuilder"],function(a,b){"use strict";var c="wysiwyg.viewer.components.SiteBackground",d={id:"SITE_BACKGROUND",skin:"wysiwyg.viewer.skins.siteBackgroundSkin",componentType:c,styleId:"siteBackground"};return{getWixBgStructure:function(){return d},getWixBgComponent:function(e){var f=b.getCompProps(d,e),g=a.getCompClass(c);return g(f)}}}),define("core/bi/errors.json",[],function(){return{JAVASCRIPT_ERROR:{errorName:"JAVASCRIPT_ERROR",errorCode:111022,severity:"fatal",params:{p1:"errorMsg",p2:"url",p3:"line",p4:"column"}},CONSOLE_ERROR:{errorName:"CONSOLE_ERROR",errorCode:111023,severity:"error",params:{p1:"errorMsg"}},REQUIREJS_ERROR:{errorName:"REQUIREJS_ERROR",errorCode:111024,severity:"fatal",params:{p1:"errorMsg",p2:"modules"}},REQUIREJS_RETRY_ERROR:{errorName:"REQUIREJS_RETRY_ERROR",errorCode:111025,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}},NULL_SITE_ERROR:{errorName:"NULL_SITE_ERROR",errorCode:112e3,severity:"error",params:{p1:"errorMsg",p2:"modules"}},MISSING_DESKTOP_BACKGROUND_ITEM:{errorName:"MISSING_DESKTOP_BACKGROUND_ITEM",errorCode:112001,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}},MISSING_DESKTOP_BACKGROUND_ITEM:{errorName:"MISSING_MOBILE_BACKGROUND_ITEM",errorCode:112002,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}}}}),define("core/bi/errors",["core/bi/errors.json","lodash","utils"],function(a,b,c){"use strict";var d=c.logger;return b.forEach(a,function(a,b){a.errorName=b}),d.register("core","error",a),a}),define("core/components/compHandlers/compStateHandler",["lodash"],function(a){"use strict";function c(b){var d=a.transform(b.mixins,function(b,d){a.mixin(b,c(d))},{});return a.assign(d,b)}function d(b,c){var e=a.map(b.mixins,function(a){return d(a,c)},c),f=a.has(b,"getInitialState")&&b.getInitialState.call(c)||{};return a.assign.apply(a,e.concat(f))}function e(e,f){var g=c(f);a.bindAll(g),b[e]=function(a){return g.props=a,d(f,g)}}function f(a,c){var d=b[a];return d?d(c):{}}var b={};return{register:e,getInitialCompState:f}}),define("core/siteRender/wixAdsInstatiator",["core/siteRender/compFactory","core/core/componentPropsBuilder","lodash"],function(a,b,c){"use strict";var d={mobile:{footerLabel:"7c3dbd_67131d7bd570478689be752141d4e28a.jpg",adUrl:"http://www.wix.com/"},desktop:{topLabel:'<span class="smallMusa">(Wix-Logo) </span>Create a <span class="smallLogo">Wix</span> site!',topContent:'100s of templates<br />No coding needed<br /><span class="emphasis spacer">Start now >></span>',footerLabel:'<div class="adFootBox"><div class="siteBanner" ><div class="siteBanner"><div class="wrapper"><div class="bigMusa">(Wix Logo)</div><div class="txt shd" style="color:#fff">This site was created using </div> <div class="txt shd"><a href="http://www.wix.com?utm_campaign=vir_wixad_live" style="color:#fff"> WIX.com. </a></div> <div class="txt shd" style="color:#fff"> Create your own for FREE <span class="emphasis"> >></span></div></div></div></div></div>',adUrl:"http://www.wix.com/lpviral/en900viral?utm_campaign=vir_wixad_live"}};return{getStructure:function(a){var b=a.isMobileView(),c=b?"wysiwyg.viewer.components.WixAdsMobile":"wysiwyg.viewer.components.WixAdsDesktop",d="wysiwyg.viewer.skins.wixadsskins.WixAdsWebSkin";return{id:a.WIX_ADS_ID,skin:d,componentType:c,styleId:"wixAds",layout:{position:b?"static":"absolute"}}},getWixAdsComponent:function(e){var h,f=e.getSiteData(),g=f.isMobileView();h=g?f.mobileAdData&&!c.isEmpty(f.mobileAdData.adUrl)?f.mobileAdData:d.mobile:f.adData&&!c.isEmpty(f.adData.adUrl)?f.adData:d.desktop;var i=this.getStructure(f),j=i.componentType,k=a.getCompClass(j),l=b.getCompProps(i,e);return l.adData=h,k(l)}}}),define("core/siteRender/SiteDAL",["lodash","utils","core/components/compHandlers/compStateHandler","core/core/componentPropsBuilder","core/siteRender/wixAdsInstatiator","experiment"],function(a,b,c,d,e,f){"use strict";function h(c){var d=c.getSiteData(),g=a.clone(d.runtime)||{};if(d.runtime={},d.shouldShowWixAds()){var h=e.getStructure(d);j(c,"masterPage",h)}a.forEach(d.pagesData,function(e,h){var i=b.dataUtils.getAllCompsInStructure(e.structure,d.isMobileView());f.isOpen("sv_hoverBox")&&(i=b.dataUtils.getAllDisplayedCompsInStructure(e.structure,c));var k=a.map(i,"id");a.assign(d.runtime,a.pick(g,k)),a.assign(d.runtime,a.pick(g,"componentsActiveModes")),a.forEach(i,a.partial(j,c,h))}),i(c)}function i(c){var d=c.getSiteData(),e=d.pagesData.masterPage.structure,f=e.id;a.set(d,g.structure(f),e);var h=b.dataUtils.getLayoutByActiveModes(c,e);a.set(d,g.layout(f),h)}function j(e,h,i){var m,j=e.getSiteData(),k=i.id,l=b.dataUtils.isCompLayoutOverridenByActiveModes(e,i);a.set(j,g.structure(k),i),a.set(j,g.pageId(k),h),f.isOpen("sv_hoverBox")&&(l?(m=b.dataUtils.getLayoutByActiveModes(e,i),a.set(j,g.layout(k),m)):a.set(j,g.layout(k),void 0));var n=g.compState(k);if(!a.get(j,n)){var o=d.getCompProps(i,e,h,e.getLoadedStyles()),p=c.getInitialCompState(i.componentType,o);a.set(j,n,p)}}function k(b,c,d,e){n(b,c,d,e,a.reject)}function l(b,c,d,e){n(b,c,d,e,a.assign)}function m(a,b,c,d){n(a,b,c,d,p)}function n(b,c,d,e,f){var g=f(d,e);a.set(b,c,g)}function o(b,c,d){var e=a.get(b,c,d);return a.cloneDeep(e)}function p(a,b){return a.concat(b)}function q(b,c,d,e){var f=a.get(b,g.structure(c)),h=a.get(b,g.pageId(c));return a.has(f,d)?a.cloneDeep(b.getDataByQuery(f[d],h,e)):void 0;
}function r(a,b){return q(a,b,"dataQuery",a.dataTypes.DATA)}function s(a,b){return q(a,b,"propertyQuery",a.dataTypes.PROPERTIES)}function t(a,b){return o(a,g.structure(b).concat("layout"))}function u(b){this._siteAPI=b,a.bindAll(this),this.snapshotId=0}function v(a,b,c){a.getSiteAspect("WidgetAspect").componentChanged(b,c)}var g={rootComp:function(a){return["runtime",a]},compState:function(a){return this.rootComp(a).concat("state")},compProps:function(a){return this.rootComp(a).concat("props")},actionsAndBehaviors:function(a){return this.rootComp(a).concat("actionsBehaviors")},compData:function(a){return this.rootComp(a).concat("data")},structure:function(a){return this.rootComp(a).concat("structure")},layout:function(a){return this.rootComp(a).concat("layout")},modes:function(a){return this.structure(a).concat("modes")},componentType:function(a){return this.structure(a).concat("componentType")},componentName:function(a){return this.structure(a).concat("nickname")},pageId:function(a){return this.rootComp(a).concat("pageId")},componentsActiveModes:function(){return["runtime","componentsActiveModes"]}};return u.prototype={syncAllComponents:function(){return h(this._siteAPI)},isCompSynced:function(b){var c=this._siteAPI.getSiteData(),d=g.structure(b),e=a.get(c,d);return!!e},getCompStructure:function(b){var f,c=g.structure(b),d=this._siteAPI.getSiteData(),e=o(d,c);return e&&(f=a.clone(e),f.layout=this.getCompLayout(b)),f},getCompChildrenStructures:function(c){var d=g.structure(c),e=this._siteAPI.getSiteData(),h=a.get(e,d);if(h){if(f.isOpen("sv_hoverBox")){var i=b.compModesDataUtils.getDisplayedChildren(h,this._siteAPI);return a.map(a.pluck(i,"id"),this.getCompStructure,this)}var j=a.pluck(b.dataUtils.getChildrenData(h,e.isMobileView()),"id");return a.map(j,this.getCompStructure,this)}return[]},setCompState:function(a,b){var c=this.getCompState(a),d=g.compState(a);l(this._siteAPI.getSiteData(),d,c,b);var e={type:"stateChange",value:this.getCompState(a)};return v(this._siteAPI,a,e),++this.snapshotId},getCompState:function(a){return o(this._siteAPI.getSiteData(),g.compState(a),{})},getCompType:function(a){return o(this._siteAPI.getSiteData(),g.componentType(a))},getCompLayout:function(a){var b=o(this._siteAPI.getSiteData(),g.layout(a));return b||t(this._siteAPI.getSiteData(),a)},updateCompLayout:function(a,b){var c=this.getCompLayout(a),d=g.layout(a);l(this._siteAPI.getSiteData(),d,c,b);var e={type:"layoutChange",value:this.getCompLayout(a)};return v(this._siteAPI,a,e),++this.snapshotId},getCompData:function(a){var b=o(this._siteAPI.getSiteData(),g.compData(a));return b||r(this._siteAPI.getSiteData(),a)},setCompData:function(a,b){var c=this.getCompData(a),d=g.compData(a);l(this._siteAPI.getSiteData(),d,c,b);var e={type:"dataChange",value:this.getCompData(a)};return v(this._siteAPI,a,e),++this.snapshotId},getCompProps:function(a){var b=o(this._siteAPI.getSiteData(),g.compProps(a));return b||s(this._siteAPI.getSiteData(),a)},setCompProps:function(a,b){var c=this.getCompProps(a),d=g.compProps(a);l(this._siteAPI.getSiteData(),d,c,b);var e={type:"propsChange",value:this.getCompProps(a)};return v(this._siteAPI,a,e),++this.snapshotId},getActionsAndBehaviors:function(a){return o(this._siteAPI.getSiteData(),g.actionsAndBehaviors(a),[])},addActionsAndBehaviors:function(a,b){var c=this.getActionsAndBehaviors(a),d=g.actionsAndBehaviors(a);return m(this._siteAPI.getSiteData(),d,c,b),++this.snapshotId},removeActionsAndBehaviors:function(a,b){var c=this.getActionsAndBehaviors(a),d=g.actionsAndBehaviors(a);return k(this._siteAPI.getSiteData(),d,c,b),++this.snapshotId},getComponentsActiveModes:function(){return o(this._siteAPI.getSiteData(),g.componentsActiveModes(),[])},setComponentsActiveModes:function(b){a.set(this._siteAPI.getSiteData(),g.componentsActiveModes(),[].concat(b))},getCompName:function(a){return o(this._siteAPI.getSiteData(),g.componentName(a),a)}},u}),define("core/siteRender/SiteAPI",["utils","zepto","lodash","core/bi/errors","core/siteRender/SiteDAL"],function(a,b,c,d,e){"use strict";function g(a,b){!a&&arguments.length&&"undefined"!=typeof window&&(b=b||"unknown",window.wixBiSession&&window.wixBiSession.sendError(d.NULL_SITE_ERROR,b)),this._site=a}var f=a.logger;return g.prototype={reLayout:function(){this._site.reLayout()},registerReLayoutPending:function(){this._site.registerReLayoutPending()},reLayoutIfPending:function(){this._site.reLayoutIfPending()},getSiteAspect:function(a){return this._site&&this._site.siteAspects&&this._site.siteAspects[a]},getSiteData:function(){return this._site.props.siteData},isComponentRenderedOnSite:function(a){var b=this._site.refs.masterPage.refs,c=this.getComponentsByPageId(this.getCurrentPageId());return Boolean(b[a])||Boolean(c[a])},getLoadedStyles:function(){return this._site.loadedStyles},setBiParam:function(a,b){var c=this.getSiteData();c&&c.wixBiSession&&void 0===c.wixBiSession[a]&&(c.wixBiSession[a]=b)},setBiMarker:function(a){this.setBiParam(a,c.now())},onSiteUnmount:function(){setTimeout(function(){delete this._site}.bind(this))},isZoomOpened:function(){return!(!this._site.props.siteData.currentPageInfo.pageItemId&&!a.nonPageItemZoom.getZoomedImageData())},openPopup:function(a,b,c){window.open(a,b,c)},getCurrentPageId:function(){return this._site.state?this._site.state.currentPage:this._site.props.siteData.getCurrentPageId()},isPageLandingPage:function(a){return this.getSiteData().isPageLandingPage(a)},scrollToAnchor:function(b,c){var d=a.anchorUtils.calcAnchorScrollToPosition(b,this.getSiteData());return this._site.scrollToAnchor(d,c)},navigateToPage:function(a){this._site.tryToNavigate(a)},runDataRequirementsChecker:function(a,b){this._site.runDataRequirementsChecker(a,b)},getComponentsByPageId:function(a){var b=this._site,c=b.refs.masterPage.refs.SITE_PAGES.refs[a],d=c&&c.refs;return d||null},getPageUrl:function(a){return this.getPageUrlFor(this.getCurrentPageId(),a)},getCurrentPageData:function(){var a=this.getSiteData().getDataByQuery(this.getCurrentPageId());return a.siteTitle=this.getSiteData().getCurrentPageTitle(),a},setPageTitle:function(a,b){var c=this.getSiteData().getDataByQuery(this.getCurrentPageId());c.title=a,c.descriptionSEO=b},setPageMetaKeyworkds:function(a){var b=this.getSiteData().getDataByQuery(this.getCurrentPageId());b.metaKeywordsSEO=a},getPageUrlFor:function(b,c){var d=this.getSiteData().getDataByQuery(b);if(!d)return"";var e=a.wixUrlParser.getUrl(this.getSiteData(),{pageId:b,title:d.pageUriSEO},c);return e},initFacebookRemarketing:function(){f.initFacebookRemarketingPixel(this.getSiteData())},initGoogleRemarketing:function(){f.initGoogleRemarketingPixel(this.getSiteData())},fireGoogleRemarketing:function(){f.fireGoogleRemarketingPixel()},initYandexMetrika:function(){f.initYandexMetrika(this.getSiteData())},reportYandexPageHit:function(a){f.reportYandexPageHit(a)},reportBI:function(a,b){f.reportBI(this._site.props.siteData,a,b)},reportCurrentPageEvent:function(){var e,a=this._site.props.siteData,b=a.getUrlScheme(),c=a.getCurrentUrl(b),d=a.getExternalBaseUrl();e=c+"/"===d||c===d?"/":c.replace(d,""),f.reportPageEvent(a,e)},reportPageEvent:function(a){f.reportPageEvent(this._site.props.siteData,a)},reportBeatEvent:function(a,b){f.reportBeatEvent(this._site.props.siteData,a,b)},reportBeatStart:function(a){this.reportBeatEvent("start",a)},reportBeatFinish:function(a){this.reportBeatEvent("finish",a)},reportPageBI:function(){f.reportBI(this._site.props.siteData)},getUserSession:function(){return this._site.props.siteData.getSvSession()},isSiteBusy:function(){return this._site.isBusy},enterFullScreenMode:function(){return"undefined"==typeof window?void console.warn("SiteAPI.enterFullScreenMode should only be called from client specific code!"):void b("body").addClass("fullScreenMode")},exitFullScreenMode:function(){return"undefined"==typeof window?void console.warn("SiteAPI.exitFullScreenMode should only be called from client specific code!"):void b("body").removeClass("fullScreenMode")},passClickEvent:function(a){this._site.clickHandler(a)},getDAL:function(){return this.siteDAL=this.siteDAL||new e(this),this.siteDAL},hasPendingFonts:function(){return this._site.refs.theme.refs.fontsLoader.hasPendingFonts()}},g}),define("core/core/siteAspectsRegistry",[],function(){"use strict";var a={};return{registerSiteAspect:function(b,c){a[b]=c},getAllAspectConstructors:function(){return a},getSiteAspectConstructor:function(b){return a[b]}}}),define("core/siteRender/SiteAspectsSiteAPI",["lodash","core/siteRender/SiteAPI"],function(a,b){"use strict";function c(a){b.call(this,a,"Site Aspect")}return c.prototype=a.create(b.prototype,{constructor:c}),c.prototype.getComponentById=function(b){var d,c=this._site.refs[this._site.props.pageId];if(c&&(d=c.refs[b]),!d){var e=this._site.getCurrentPage();e&&(d=e.refs[b])}return d||(d=this._site.getAspectsContainer().refs[b]),!d&&c&&c.refs.SITE_PAGES&&a.find(c.refs.SITE_PAGES.refs,function(a){return a.refs&&a.refs[b]?(d=a.refs[b],!0):!1}),d||("SITE_BACKGROUND"===b||"WIX_ADS"===b)&&(d=this._site.refs[b]),d||null},c.prototype.getCurrentPage=function(){return this._site.getCurrentPage()},c.prototype.getMasterPage=function(){return this._site.refs[this._site.props.pageId]},c.prototype.getSiteRoot=function(){return this._site},c.prototype.registerToMessage=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.message,a)},c.prototype.registerToSiteReady=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.siteReady,a)},c.prototype.registerToScroll=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.scroll,a)},c.prototype.registerToResize=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.resize,a)},c.prototype.registerToModeChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.modeChange,a)},c.prototype.registerToComponentDidMount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.mount,a)},c.prototype.registerToDidLayout=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.didLayout,a)},c.prototype.unRegisterFromDidLayout=function(a){this._site.unregisterAspectFromEvent(this._site.supportedEvents.didLayout,a)},c.prototype.registerToWillUnmount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.unmount,a)},c.prototype.registerToPageChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.pageChange,a)},c.prototype.registerToKeyDown=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.keydown,a)},c.prototype.registerToWindowTouchEvent=function(a,b){this._site.registerAspectToEvent(this._site.supportedEvents[a.toLowerCase()],b)},c.prototype.registerToFocusEvents=function(a,b){this._site.registerAspectToEvent(this._site.supportedEvents[a],b)},c.prototype.registerToVisibilityChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.visibilitychange,a)},c.prototype.registerToOrientationChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,a)},c.prototype.getPageItemInfo=function(){return this._site.state.urlInfo},c.prototype.getSiteAPI=function(){return this._site.siteAPI},c.prototype.getSiteContainer=function(){return this._site.props.getSiteContainer()},c.prototype.scrollSiteBy=function(a,b){this.getSiteContainer().scrollBy(a,b)},c.prototype.scrollSiteTo=function(a,b){this.getSiteContainer().scrollTo(a,b)},c.prototype.getSiteScroll=function(){var a=this.getSiteContainer();return{x:a.pageXOffset||a.scrollX||0,y:a.pageYOffset||a.scrollY||0}},c.prototype.getVisibilityState=function(){var a="undefined"!=typeof document;return{hidden:a&&document.hidden}},c.prototype.forceUpdate=function(a){this._site.forceUpdate(a)},c.prototype.getAspectComponentByRef=function(a){var b=this._site.refs.siteAspectsContainer;return b.refs[a]},c.prototype.setSiteRootHiddenState=function(a,b){this._site.setState({siteRootHidden:a},b)},c.prototype.notifyAspects=function(a){this._site.notifyAspects(a)},c}),define("core/siteRender/siteAspectsMixin",["lodash","zepto","core/core/siteAspectsRegistry","core/siteRender/SiteAspectsSiteAPI"],function(a,b,c,d){"use strict";function f(b,c,d){return a.map(b,function(b){var f=b[c];return a.isFunction(f)?f.apply(b,d)||e:e})}function k(){this.timeout=window.setTimeout(this.notifyAspects.bind(this,h.resize),300)}var e=[],g={mount:"mount",unmount:"unmount",pageChange:"pageChange",modeChange:"modeChange",didLayout:"didLayout",siteReady:"siteReady"},h={scroll:"scroll",resize:"resize",focus:"focus",blur:"blur",message:"message",keydown:"keydown",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",touchcancel:"touchcancel",orientationchange:"orientationchange"},i={visibilitychange:"visibilitychange"},j=a.assign(a.clone(g),h,i);return{supportedEvents:j,getAllSiteAspects:function(){return this._addMissingAspects(),this.siteAspects},getInitialState:function(){this._aspectsSiteAPI=new d(this),this.siteAspects={},this._siteAspectsEventsRegistry={},this._listenersOnWindow=[],this._listenersOnDocument=[]},componentWillMount:function(){this._addMissingAspects()},_addMissingAspects:function(){a.forEach(c.getAllAspectConstructors(),function(a,b){this.siteAspects[b]||(this.siteAspects[b]=new a(this._aspectsSiteAPI))},this)},getAspectsContainer:function(){return this.refs.siteAspectsContainer},getAspectsReactComponents:function(){return a.flattenDeep(f(this.siteAspects,"getReactComponents",[this.loadedStyles]))},getAspectsComponentStructures:function(){return a.flattenDeep(f(this.siteAspects,"getComponentStructures"))},componentDidMount:function(){var e,c=b(window),d=b(document);a.forEach(h,function(a){e={eventName:a,listener:this.notifyAspects.bind(this,a)},this._listenersOnWindow.push(e),c.on(a,e.listener)},this),a.forEach(i,function(a){e={eventName:a,listener:this.notifyAspects.bind(this,a)},this._listenersOnDocument.push(e),d.on(a,e.listener)},this),e={eventName:h.orientationchange,listener:k.bind(this)},this._listenersOnWindow.push(e),c.on(e.eventName,e.listener),this.notifyAspects("mount")},componentDidUpdate:function(){this.isChangingPage&&this.notifyAspects("pageChange")},componentWillUnmount:function(){var c=b(window),d=b(document);a.forEach(this._listenersOnWindow,function(a){c.off(a.eventName,a.listener)}),a.forEach(this._listenersOnDocument,function(a){d.off(a.eventName,a.listener)}),window.clearTimeout(this.timeout),this._aspectsSiteAPI.onSiteUnmount(),this.notifyAspects("unmount")},notifyAspects:function(b){var c=this._siteAspectsEventsRegistry[b];if(c&&c.length){var d=c.slice();a.invoke(d,"apply",void 0,a.rest(arguments))}},registerAspectToEvent:function(a,b){return a===g.siteReady&&this.siteIsReady?void b():j[a]?(this._siteAspectsEventsRegistry[a]=this._siteAspectsEventsRegistry[a]||[],void this._siteAspectsEventsRegistry[a].push(b)):void console.error("this event isn't supported by site "+a)},unregisterAspectFromEvent:function(a,b){var c=this._siteAspectsEventsRegistry[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}}}),define("core/siteRender/siteAspectsDomContainer",["react"],function(a){"use strict";return a.createClass({displayName:"siteAspectsDomContainer",render:function(){return a.DOM.div(null,this.props.aspectsCompsFunc())}})}),define("core/siteRender/extraSiteHeight",["react"],function(a){"use strict";return a.createClass({displayName:"extraSiteHeight",render:function(){return a.DOM.div({style:{height:this.props.siteData.renderFlags.extraSiteHeight,position:"relative"}})}})}),define("core/siteRender/blockingLayer",["lodash","react"],function(a,b){"use strict";var c=Math.pow(2,31)-2;return b.createClass({displayName:"blockingLayer",getStyle:function(){return a.merge({display:"inline-block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:c},this.props.siteData.renderFlags.blockingLayer)},render:function(){return b.DOM.div({style:this.getStyle()})}})}),define("core/bi/events.json",[],function(){return{SITE_MEMBER_LOGIN_SUCCESS:{eventId:520,adapter:"hed",params:{c1:"userName"}},PAGE_PERFORMANCE_DATA:{eventId:350,adapter:"ugc-viewer",params:{c1:"preClient",c2:"client",c3:"santaVersion",i1:"timeoutSeconds",is_premium:"isPremium",is_wixsite:"isWixSite",dns_time:"dnsTime",response_time:"responseTime",experiment:"experiment"},sampleRatio:0},LOAD_IMAGES_DATA:{eventId:341,adapter:"mlt",params:{c1:"imagePerf"}},LP_BUTTON_CLICK:{eventId:352,adapter:"ugc-viewer",params:{postSignUp:"postSignUp",postLogin:"postLogin",target_url:"targetUrl",button_name:"buttonName",active_fold:"activeFold",total_folds:"totalFolds",text:"text",component_id:"componentId",loginCompName:"loginCompName"},wixSiteSampleRatio:0},IMAGES_DOWNLOAD:{eventId:353,adapter:"ugc-viewer",params:{imagePerf:"imagePerf"}},MONOTYPE_FONTS_USED_ON_SITE:{eventId:355,adapter:"ugc-viewer",params:{}}}}),define("core/bi/events",["core/bi/events.json","lodash","utils"],function(a,b,c){"use strict";var d=c.logger;return d.register("core","event",a),a}),define("core/core/siteBI",["lodash","utils","core/bi/events","fonts"],function(a,b,c,d){"use strict";function o(b){var c=b.rendererModel||b.editorModel||{};return a.reduce(c.runningExperiments,function(a,b,c){var d=g.indexOf(c);return-1===d?a:a+Math.pow(2,d)},0)}function p(b,d){function e(a,b){return"number"!=typeof b?b:b?b-a:void 0}if(!(d>n)){"lastTimeStamp"in b.wixBiSession&&(n=d);var g=b.isPremiumDomain(),h="WixSite"===b.rendererModel.siteInfo.documentType,i=a.assign({},m,{initialTimestamp:b.wixBiSession.initialTimestamp});i=a.mapValues(i,e.bind(null,i.navigationStart||i.initialTimestamp));var j=a.omit(b.wixBiSession,function(a,b){return"number"!=typeof a||"et"===b}),k=window.performance;if(k&&k.getEntries){var l=k.getEntries().filter(function(a){return-1!==a.name.search(/.min.js$/)});if(l.length){var p=m.navigationStart||0,q=l.filter(function(a){return-1!==a.name.indexOf("skins")})[0];q&&(j.skinsStart=Math.round(p+q.startTime),j.skinsEnd=Math.round(j.skinsStart+q.duration)),j.packagesEnd=0,l.forEach(function(a){j.packagesEnd=Math.max(j.packagesEnd,a.startTime+a.duration)}),j.packagesEnd=Math.round(p+j.packagesEnd)}}j=a.mapValues(j,e.bind(null,j.initialTimestamp||0));var r=b.santaBase.match(/([\d\.]+)\/?$/);r=r&&r[1]||"unknown";var s={isPremium:g?1:0,isWixSite:h?1:0,preClient:JSON.stringify(i),client:JSON.stringify(j),santaVersion:r,timeoutSeconds:d,experiment:o(b)},t=i.domainLookupEnd-i.domainLookupStart;isNaN(t)||(s.dnsTime=t);var u=i.responseEnd-i.connectStart;isNaN(u)||(s.responseTime=u),f.reportBI(b,c.PAGE_PERFORMANCE_DATA,s)}}function q(b){function e(a){return"_"+a+"k"}function h(b){var c=d.map(e).concat([g]);return a.zipObject(c,a.times(c.length,b))}function i(b,c){var d={url:b.src,hadError:!1,width:b.width,height:b.height,size:b.width*b.height},e=c?c.startTime:0,f=c?c.duration:0;return a.defaults(d,{hadError:!c,start:Math.round(e),end:Math.round(e+f),speed:Math.round(d.size/(f+.01)*100)/100}),d}function j(b){var c=a.findLastIndex(d,function(a){return 1e3*a<b.size})+1;return c<d.length?e(d[c]):g}var d=[100,200,300,400,500,1e3,2e3,3e3],g="_over"+a.last(d)+"k",l=a(document.getElementsByTagName("img")).filter(function(b){return a.startsWith(b.src,window.serviceTopology.staticMediaUrl)}).reduce(function(a,b){if(b.complete){var c=window.performance.getEntriesByName(b.src)[0],d=i(b,c);if(d.hadError)a.errors++;else{var e=j(d);a.imagesBySize[e]++,a.imagesSamples[e].length<k&&a.imagesSamples[e].push(d)}}else a.loading++;return a},{loading:0,imagesBySize:h(a.constant(0)),imagesSamples:h(function(){return[]}),errors:0});f.reportBI(b,c.LOAD_IMAGES_DATA,{imagePerf:JSON.stringify(l)})}function r(d){function e(){var b=window.serviceTopology?window.serviceTopology.staticMediaUrl:"nothing";return window.performance.getEntries().filter(function(c){return a.startsWith(c.name,b)})}function g(b){var c=a.last(b.name.split("/")).match(/_p_(\d+)_(\d+)_.*_([^_]+)_[^_]+$/);return c?{width:c[1],height:c[2],size:Number(c[1])*Number(c[2]),format:c[3]}:{}}function h(b){var c=g(b),d={start:Math.round(b.startTime),end:Math.round(b.startTime+b.duration),speed:b.duration>0?Math.round(Number(c.size)/b.duration):0,fileSize:b.fileSize,kbps:b.duration?b.fileSize/b.duration:0};return a.assign({url:b.name},c,d)}function i(g){function i(c){return new g(function(d,e){b.ajaxLibrary.ajax({type:"HEAD",url:c.name,success:function(b,e,f){var g=/Content\-Length:/.test(f.getAllResponseHeaders()),h=g?Math.round(f.getResponseHeader("Content-Length")/1024):null;d(a.assign(c,{fileSize:h}))},error:function(a,b,c){e(c)}})})}var j=e().map(i);g.all(j).then(function(b){var e=a(b).filter("fileSize").sortBy("fileSize").takeRight(l).map(h).value();f.reportBI(d,c.IMAGES_DOWNLOAD,{imagePerf:JSON.stringify(e)})},a.noop)}window.Promise&&window.Promise.all?i(window.Promise):requirejs("bluebird",i)}var e=!1,f=b.logger,g=["useHttps"];if("undefined"==typeof window)return{init:function(){},send:function(){}};var h=window.queryUtil&&window.queryUtil.isParameterTrue("isEdited"),i=["navigationStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","requestStart","responseStart","responseEnd"],j=[5,15,30],k=3,l=10,m=window.performance&&window.performance.timing||{};m=a.pick(m,i);var n,s=a.now();return{init:function(b){!h&&f.shouldSendReport(b)&&(n=1/0,s=a.now(),a.forEach(j,function(a){setTimeout(p.bind(null,b,a),1e3*a)}),window.performance&&window.performance.getEntriesByName&&setTimeout(function(){q(b),r(b)},10500))},send:function(b){!h&&f.shouldSendReport(b,c.PAGE_PERFORMANCE_DATA)&&setTimeout(function(){p(b,Math.round((a.now()-s)/1e3))},300)},trackFontsIfNeeded:function(a,b){var g=d.fontsTracker;h||e||!g.shouldTrackFonts(a,b)||(e=!0,f.reportBI(a,c.MONOTYPE_FONTS_USED_ON_SITE,{}))}}}),define("core/core/widgetCollectorRegistry",[],function(){"use strict";var a=[];return{registerWidgetCollector:function(b){a.push(b)},getWidgetCollectors:function(){return a}}}),define("core/components/util/boxSlideShowCommon",["lodash"],function(a){"use strict";function f(a){return a.componentType}function g(a){return a.props.structure.componentType}var b="wysiwyg.viewer.components.BoxSlideShow",c="wysiwyg.viewer.components.BoxSlideShowSlide",d="wysiwyg.viewer.components.StripContainerSlideShow",e="wysiwyg.viewer.components.StripContainerSlideShowSlide";return{getNextSlideIndex:function(a,b){var c=b+1;return c>=a.length&&(c=0),c},getPrevSlideIndex:function(a,b){var c=b-1;return 0>c&&(c=a.length-1),c},getSlidesFromChildrenByStructure:function(b){return a.filter(b,function(a){return f(a)===c||f(a)===e})},getSlidesFromChildrenByProps:function(b){return a.filter(b,function(a){return g(a)===c||g(a)===e})},getShownOnAllSlidesFromChildrenByStructure:function(b){return a.reject(b,function(a){return f(a)===c||f(a)===e})},getShownOnAllSlidesFromChildrenByProps:function(b){return a.reject(b,function(a){return g(a)===c||g(a)===e})},isBoxOrStripSlideShowComponent:function(a){return a===b||a===d},isBoxOrStripSlideShowSlideComponent:function(a){return a===c||a===e},getMatchingChildSlideType:function(a){if(!this.isBoxOrStripSlideShowComponent(a))throw new Error("invalid comp type, not a box or strip slide show component");return a===b?c:e}}}),define("core/siteRender/WixSiteReact",["zepto","lodash","react","reactDOM","core/siteRender/styleCollector","core/siteRender/WixThemeReact","core/siteRender/WixPageReact","core/siteRender/wixBackgroundInstantiator","layout","utils","core/siteRender/SiteAPI","core/siteRender/siteAspectsMixin","animations","core/siteRender/siteAspectsDomContainer","core/siteRender/extraSiteHeight","core/siteRender/blockingLayer","core/core/componentPropsBuilder","core/siteRender/wixAdsInstatiator","mousetrap","core/core/siteBI","core/core/widgetCollectorRegistry","core/components/renderDoneMixin","core/components/util/boxSlideShowCommon","experiment!compStateMixin","experiment!fontsTrackingInViewer","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";function H(a,c){var d=c.getSiteData(),e=b.last(a),f=z.isOpen("sv_hoverBox")?c.getDAL().getCompChildrenStructures(e.id):G.getChildrenData(e,d.isMobileView()),g=[e].concat(f);if(a.length>1){var h=a[a.length-2];"wysiwyg.viewer.components.Group"===h.componentType?g.push(h):w.isBoxOrStripSlideShowComponent(e.componentType)&&b.forEach(f,function(a){var b=z.isOpen("sv_hoverBox")?c.getDAL().getCompChildrenStructures(a.id):G.getChildrenData(a,d.isMobileView());g=g.concat(b)})}return g}function K(a,c){var d=this.props.siteData.getPageData(this.props.pageId).structure;d=z.isOpen("sv_hoverBox")?a.getDAL().getCompStructure(d.id):b.merge({},d,{layout:{position:this.props.siteRootPosition}});var e=q.getCompProps(d,a,this.props.pageId,c);return e.ref=this.props.pageId,e.refInParent=e.ref,e.className="SITE_ROOT",e.firstPage=!0,delete e.id,e.style={width:this.props.siteData.getSiteWidth()},e.key=(a.getSiteData().isMobileView()?"mobile_":"desktop_")+"siteRoot",e}function L(){var a=this;return b.throttle(function(){!a.dead&&a.getMasterPage()&&(a.props.siteData.updateScreenSize(),a.forceUpdate())},500,{leading:!1,trailing:!0})}function M(){if(window.rendererModel){var a=b(window.rendererModel.runningExperiments).pick(function(a){return"new"===a}).keys().value();s.bind("ctrl+alt+shift+e",function(){window.alert("Active Experiments:\n"+a).join("\n")})}}function N(){var a=this.props.siteData,c=a.baseVersion||"could not retrieve version!";s.bind("ctrl+alt+shift+v",function(){window.alert("You are running React!\nVersion: "+c)});var d=b.find(a.currentUrl.query,function(a,b){return"alertversion"===b.toLowerCase()});d&&(a.isMobileDevice()||a.isTabletDevice())&&window.alert("You are running React!\nVersion: "+c)}function O(a){a.componentDidLayout&&a.componentDidLayout.call(a),a.componentDidLayoutAnimations&&a.componentDidLayoutAnimations.call(a),b.forOwn(a.refs,O)}function P(a){b.forEach(a,O)}function Q(a){var c=b.clone(a.getMasterPageData().structure);return["children","mobileComponents"].forEach(function(a){var d=b.chain(c[a]).find({id:"PAGES_CONTAINER"}).cloneDeep().value();R(d),c[a]=[d]}),c}function R(a){for(;a.layout.anchors.length;)a.layout.anchors.pop();var b={distance:0,locked:!0,originalValue:a.layout.height,targetComponent:"SITE_STRUCTURE",topToTop:a.layout.height,type:"BOTTOM_PARENT"};a.layout.anchors.push(b),a.layout.y=0}function S(){var a=this.getAspectsComponentStructures(),c=this.props.siteData,d=b.transform(a,function(a,b){a[b.id]={structure:b,getDomNodeFunc:I.bind(null,this.refs.siteAspectsContainer)}},{},this);if(d.inner={structure:this.props.siteData.pagesData[this.state.currentPage].structure,pageId:this.state.currentPage,getDomNodeFunc:I.bind(null,this.getCurrentPage())},d.outer={structure:c.getMasterPageData().structure,getDomNodeFunc:I.bind(null,this.refs[this.props.pageId])},this.props.siteData.isPageLandingPage(this.state.currentPage)&&(d.outer.structure=Q(this.props.siteData)),d.siteBackground={structure:h.getWixBgStructure(),getDomNodeFunc:I.bind(null,this)},c.shouldShowWixAds()){var e=r.getStructure(c);d.wixAds={structure:e,getDomNodeFunc:I.bind(null,this)}}return d}function T(b){var c=a(".hiddenTillReady");b.isMobileDevice()?(a(".wix-menu-enabled").removeClass("wix-menu-enabled"),c.css({display:"none"})):c.removeClass("hiddenTillReady")}function U(a){return{x:a.pageXOffset||a.scrollX||0,y:a.pageYOffset||a.scrollY||0}}function V(a,b){var c=Math.abs(b-a),d=J(c);return d}function W(a){a.stopPropagation(),a.preventDefault()}function X(c,e){if(c){var f={};b.assign(f,e);var g=j.style.getPrefixedTransform(),h=Y(g);f[h]=e[g],g!==h&&(f[g]=""),c.hasOwnProperty("getRootStyle")&&b.assign(f,c.getRootStyle(f)),a(d.findDOMNode(c)).css(f)}}function Y(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function Z(a,c){b.forEach(u.getWidgetCollectors(),function(b){b.collectComponents(c,a)})}var A=["components.layout.update","components.layout.updateAndAdjustLayout","siteSegments.layout.update","components.layout.updateDock","components.layout.setDock","components.layout.unDock"],B=c.createFactory(f),C=c.createFactory(g),D=c.createFactory(n),E=c.createFactory(o),F=c.createFactory(p),G=j.dataUtils,I=function(a,b,c,e,f,g,h){return a=a&&b?a.refs[b]:a,a=a&&c?a.refs[c]:a,a=a&&e?a.refs[e]:a,a=a&&f?a.refs[f]:a,a=a&&g?a.refs[g]:a,a=a&&h?a.refs[h]:a,a&&d.findDOMNode(a)},J=j.math.interpolateSegmentsFunction([[0,.6],[360,.8],[720,1],[1440,1.2],[7200,2.8],[9600,3],[1e4,3]]);return c.createClass({displayName:"WixSite",mixins:[l,v],getCurrentPage:function(){var a=this.refs[this.props.pageId];return"masterPage"===this.props.pageId&&a&&(a=a.refs.SITE_PAGES.refs[this.state.currentPage]),a},getMasterPage:function(){var a=this.refs[this.props.pageId];return a},isComponentPartOfCurrentPages:function(a){return Boolean(this.getMasterPage().refs[a]||this.getCurrentPage().refs[a])},isDomOnly:function(a,c,d,e){var f=b.isEmpty(b.without.apply(b,[e].concat(A))),g=d.style.position===a.props.style.position,h=!b.has(a,"lastScale")||c.layout.scale===a.lastScale,i=b.isEqual(d.compProp,a.props.compProp);return f&&g&&h&&i},isDomOnlyByMethodNamesAndCompId:function(a,c){var d=this.getPageOfComp(c),e=d.props.pageId,f=d.refs[c],g=G.findHierarchyInStructure(c,this.props.siteData.isMobileView(),this.props.siteData.pagesData[e].structure),h=b.last(g),i=q.getCompProps(h,this.siteAPI,e,this.loadedStyles);return this.isDomOnly(f,h,i,a)},updateMultipleComps:function(a,c){function e(c){d.push(c),d.length===a.length&&(this.lockedCompIds=b.flatten(d),this.reLayout())}this.tempMeasureMap=this.props.siteData.measureMap;var d=[];this.noEnforceAnchors=c,z.isOpen("compStateMixin")&&this.syncComponentsInDAL(),b.forEach(a,this.updateDOMOnlySingleComp.bind(this,e.bind(this)))},updateDOMOnlySingleComp:function(a,c){var d=this.getPageOfComp(c),e=d.props.pageId,f=d.refs[c],g=G.findHierarchyInStructure(c,this.props.siteData.isMobileView(),this.props.siteData.pagesData[e].structure),h=b.last(g),i=q.getCompProps(h,this.siteAPI,e,this.loadedStyles),j=H(g,this.siteAPI),k=b.pluck(j,"id");X(f,i.style);var l=b.reject(j,h);this.componentsUpdatedBySingleCompUpdateBehindReactsBack[c]=this.componentsUpdatedBySingleCompUpdateBehindReactsBack[c]||b.clone(f.props.style),b.forEach(l,function(a){X(d.refs[a.id],q.getStyle(a.id,a.layout,this.siteAPI))},this),a(k)},syncComponentsInDAL:function(){var a=this.siteAPI.getDAL();a.syncAllComponents(),a.updateCompLayout("SITE_STRUCTURE",{position:this.props.siteRootPosition})},getPageOfComp:function(a){var b=this.getMasterPage();return b.refs[a]?b:this.getCurrentPage()},updateSingleComp:function(a,c,d){function s(){p&&(h.componentWillUpdate=p),r&&(h.componentDidUpdate=r),this.noEnforceAnchors=c,b.forEach(o,function(a){a()}),this.lockedCompIds=b.pluck(H(i,this.siteAPI),"id"),this.reLayout()}z.isOpen("compStateMixin")&&this.syncComponentsInDAL();var e=this.props.siteData;e.dataResolver.setReadingFromCache(!1),this.tempMeasureMap=e.measureMap,delete e.measureMap;var f=this.getPageOfComp(a),g=f.props.pageId,h=f.refs[a],i=G.findHierarchyInStructure(a,e.isMobileView(),e.pagesData[g].structure),k=b.last(i),l=q.getCompProps(k,this.siteAPI,g,this.loadedStyles);e.dataResolver.setReadingFromCache(!0);var m=j.style.getPrefixedTransform(),n=Y(m);l.style[n]=l.style[m],this.markInvokedMethodNames(d);var o=[],p=null,r=null;this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]&&(X(h,this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]),delete this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]);var t={};if(h.componentWillReceiveProps){var u=h.setState;h.setState=function(a,c){b.assign(t,a),c&&o.push(c)},h.componentWillReceiveProps(l,h.state),h.setState=u}if(h.componentWillUpdate&&(p=h.componentWillUpdate,h.componentWillUpdate=function(a,b){p.call(h,l,b)}),h.componentDidUpdate){r=h.componentDidUpdate;var v=b.clone(h.props);b.forEach(["compProp","compData","style"],function(a){v[a]=b.clone(v[a])}),h.componentDidUpdate=function(a,b){r.call(h,v,b)}}b.forEach(["compProp","compData","style"],function(a){
b.has(h.props,a)&&b.assign(h.props[a]||{},l[a])}),h.setState(t,s.bind(this))},scrollToAnchor:function(a,b){var c=this.props.getSiteContainer(),d=V(U(c).y,a.y);m.animate("BaseScroll",c,d,0,{y:a.y,ease:"Sine.easeInOut",callbacks:{onUpdate:b}})},scrollToTop:function(){this.scrollToAnchor({y:0})},getInitialState:function(){return this.loadedStyles=this.loadedStyles||{},this.reLayoutPending=!1,this.siteAPI=new k(this),this.isBusy=!0,this.isChangingPage=!0,this.noEnforceAnchors=!1,this.siteAPI.reportBeatEvent(7,this.props.siteData.currentPageInfo.pageId),this.componentsUpdatedBySingleCompUpdateBehindReactsBack={},{urlInfo:this.props.siteData.currentPageInfo,currentPage:this.props.siteData.currentPageInfo.pageId}},getDefaultProps:function(){return{siteRootPosition:"static",scopedRoot:null}},_addSiteStylesToLoaded:function(a,c){var d=a.getAllTheme(),f=this.getAspectsComponentStructures();f=f.concat([a.getMasterPageData().structure]),c&&(f=f.concat([a.pagesData[this.state.currentPage].structure])),b.forEach(f,function(b){var c=b.id===this.state.currentPage?this.state.currentPage:"masterPage";e.collectStyleIdsFromStructure(b,d,a,this.loadedStyles,c,a.isMobileView())},this)},markInvokedMethodNames:function(a){this.invokedMethodNames=b.union(this.invokedMethodNames||[],a)},componentWillUpdate:function(a,c){this.isBusy=!0,this.isChangingPage=c.currentPage!==this.state.currentPage,b.forEach(this.componentsUpdatedBySingleCompUpdateBehindReactsBack,function(a,b){var c=this.getPageOfComp(b),d=c.refs[b];d&&X(d,a)},this),this.componentsUpdatedBySingleCompUpdateBehindReactsBack={},c.noEnforceAnchors&&c.noEnforceAnchors!==this.state.noEnforceAnchors&&(this.noEnforceAnchors=!0),c.forceUpdateIndex!==this.state.forceUpdateIndex?(this.props.siteData.clearCache(),this.tempMeasureMap=this.props.siteData.measureMap,delete this.props.siteData.measureMap):this.markInvokedMethodNames(["*"])},render:function(){x&&this.syncComponentsInDAL();var a=this.props.siteData,d=this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(this.state.urlInfo),e=[B({themeData:a.getAllTheme(),siteData:a,masterPage:a.getMasterPageData(),loadedStyles:this.loadedStyles,styleRoot:this.props.scopedRoot?"#"+this.props.scopedRoot:null,ref:"theme",shouldRenderPage:d}),a.shouldShowWixAds()?r.getWixAdsComponent(this.siteAPI):void 0,D({ref:"siteAspectsContainer",key:"siteAspectsContainer",aspectsCompsFunc:this.getAspectsReactComponents})];if(a.renderFlags.extraSiteHeight>0&&!a.isMobileView()&&e.push(E({siteData:a})),a.renderFlags.blockingLayer&&e.push(F({siteData:a})),d){var f=K.call(this,this.siteAPI,this.loadedStyles),g=h.getWixBgComponent(this.siteAPI);e.splice(2,0,g,c.DOM.div({className:"SITE_ROOT",key:"SITE_ROOT",id:this.props.scopedRoot?null:"SITE_ROOT",style:this.getRootStyle()},C(f)))}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(this.state.urlInfo);return this._addSiteStylesToLoaded(a,d),Z(this.props.siteData.currentPageInfo.pageId,this.siteAPI),c.DOM.div(b.assign({className:this.props.className,id:this.props.scopedRoot?this.props.scopedRoot:null,onClick:this.clickHandler,children:e},this.props.extraEventsHandlers))},getRootStyle:function(){var a={};return a.width=this.props.siteData.getSiteWidth(),a.paddingBottom=this.props.siteData.getPageBottomMargin()+this.props.siteData.onlyForEyesBottomAdditionalMargin(),this.state.siteRootHidden&&(a.height=0,a.overflowY="hidden"),a},onPopState:function(){var a=location.href,b=j.wixUrlParser.parseUrl(this.props.siteData,a);b&&this.tryToNavigate(b,!0)},clickHandler:function(c){var d="a"===c.target.tagName.toLowerCase()?a(c.target):a(c.target).parents("a"),e=d.attr("href"),f=d.attr("data-anchor"),g=j.wixUrlParser.parseUrl(this.props.siteData,e);if(d.attr("data-mobile")){var h=j.stringUtils.isTrue(d.attr("data-mobile"));this.props.siteData.setMobileView(h),j.mobileViewportFixer.fixViewportTag(this.props.siteData)}var i=j.linkRenderer.isExternalLink(this.props.siteData,e),k="_self"===d.attr("target"),l=this.props.siteData.previewTooltipCallback;if(e&&j.stringUtils.startsWith(e,j.linkRenderer.CONSTS.LOGIN_TO_WIX_FORM_URL,!0)&&this.props.siteData.renderFlags.isExternalNavigationAllowed)return this.siteAPI.getSiteAspect("LoginToWix").openLoginToWixForm(e,!0,c.target),W(c);if(!this.props.siteData.renderFlags.isExternalNavigationAllowed&&i&&k&&l){var m=c.target.getBoundingClientRect();return l(m,"text_editor_inactive_link_on_preview"),W(c)}return g&&"_blank"!==d.attr("target")?(b.assign(g,{pageItemAdditionalData:d.attr("data-page-item-context"),anchorData:f}),g.pageId===this.props.siteData.currentPageInfo.pageId?("#"!==e&&this.props.navigateMethod(this,e,g,!0),f?this.siteAPI.scrollToAnchor(f):this.props.siteData.isImageZoom(g)||this.scrollToTop()):this.tryToNavigate(g,!1),W(c)):void 0},isPageExists:function(a){return b.includes(this.props.siteData.getAllPageIds(),a)},runDataRequirementsChecker:function(a,b){this.props.runDataRequirementsChecker(this,a,b)},tryToNavigate:function(a,c){if(this.isPageExists(a.pageId))if(this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(a)){this.siteAPI.getSiteAspect("siteMembers").forceCloseDialog();var d=this.siteAPI.getSiteData().getDataByQuery(a.pageId);if(!d)return;var e=b.clone(a);e.title=a.title||d.pageUriSEO;var f=j.wixUrlParser.getUrl(this.siteAPI.getSiteData(),e);this.props.navigateMethod(this,f,e,!c)}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(a),this.forceUpdate()},renderCompsAfterLayout:function(a){this.props.siteData.componentsToRender=b.union(this.props.siteData.componentsToRender,a),b.isEmpty(a)||this.forceUpdate(function(){this.props.siteData.componentsToRender=[]})},reLayout:function(){var a,b=this.lockedCompIds;if(a=this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(this.state.urlInfo)){this.updateBodyNodeStyle(this.props.siteData);var c=S.call(this);if(!this._isComponentDragMode){var d=i.reLayout(c,this.siteAPI,this.noEnforceAnchors,b,b&&this.tempMeasureMap);delete this.tempMeasureMap,delete this.lockedCompIds,this.reLayoutPending=!1,this.noEnforceAnchors=!1,this.renderCompsAfterLayout(d),this.isBusy=!1;var e=this.refs[this.props.pageId];P([e,this.getCurrentPage(),this.refs.siteAspectsContainer])}}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(this.state.urlInfo),P([this.refs.siteAspectsContainer]);this.isBusy=!1;var f=this.invokedMethodNames||[];this.invokedMethodNames=[],this.notifyAspects("didLayout",f),this.siteIsReady||(this.siteIsReady=!0,this.siteAPI&&this.siteAPI.setBiMarker&&this.siteAPI.setBiMarker("lastTimeStamp"),this.notifyAspects("siteReady"))},registerReLayoutPending:function(){this.reLayoutPending=!0},reLayoutIfPending:function(){this.reLayoutPending&&(this.reLayoutPending=!1,this.refs.theme.initWaitForStylesReady())},updateBodyNodeStyle:function(b){var c=a("body");this.props.siteData.isMobileView()?c.addClass("device-mobile-optimized"):b.isMobileDevice()||b.isTabletDevice()?c.addClass("device-mobile-non-optimized"):c.removeClass("device-mobile-optimized").removeClass("device-mobile-non-optimized");var d=c.css("overflow"),e=b.renderFlags.allowSiteOverflow?null:"hidden";d!==e&&c.css("overflow",e)},componentDidMount:function(){z.isOpen("googleAnalyticsAllPages")?this.siteAPI.reportCurrentPageEvent():this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full),this.siteAPI.initFacebookRemarketing(),this.siteAPI.initGoogleRemarketing(),this.siteAPI.initYandexMetrika(),this.siteAPI.setBiMarker("renderEnd"),this.registerAspectToEvent("siteReady",function(){this.siteAPI.reportBeatFinish(this.state.currentPage),t.send(this.siteAPI.getSiteData()),T(this.props.siteData)}.bind(this)),this.registerAspectToEvent("resize",L.call(this)),M.call(this),N.call(this),this.updateTitleAndMetaTags(),this.refs.theme.registerStylesReadyCallback(this.reLayout),this.siteAPI.reportBeatEvent(8,this.state.currentPage),this.refs.theme.initWaitForStylesReady(),y&&this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(this.state.urlInfo)&&t.trackFontsIfNeeded(this.props.siteData,this.state.currentPage)},componentDidUpdate:function(){this.tempMeasureMap&&!this.props.siteData.measureMap&&(this.props.siteData.measureMap=this.tempMeasureMap,delete this.tempMeasureMap),this.isChangingPage&&(this.siteAPI.setBiMarker("renderEnd"),this.siteAPI.reportBeatFinish(this.state.currentPage),z.isOpen("googleAnalyticsAllPages")||this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full),this.siteAPI.fireGoogleRemarketing(),this.siteAPI.reportYandexPageHit(this.props.siteData.currentUrl.full),y&&t.trackFontsIfNeeded(this.props.siteData,this.state.currentPage)),this.refs.theme.initWaitForStylesReady()},updateTitleAndMetaTags:function(){this.props.updateHeadMethod&&this.props.updateHeadMethod(this.props.siteData,this.props.pageId)},componentWillUnmount:function(){this.dead=!0,this.siteAPI.onSiteUnmount()},enterComponentDragMode:function(){this._isComponentDragMode=!0},exitComponentDragMode:function(){this._isComponentDragMode=!1}})}),define("core/siteRender/WixSiteHeadRenderer",["lodash"],function(a){"use strict";function b(){this.blankFavicons=null}function c(b){return a.includes(b.rendererModel.premiumFeatures,"AdsFree")}return b.prototype={getFavicons:function(a){return a.isPremiumUser&&a.isPremiumUser()&&c(a)?this._getPremiumUserFavicon(a):this._getDefaultWixFavicon()},createBlankFavicons:function(){return null===this.blankFavicons&&(this.blankFavicons=this._createEmptyFaviconElements()),this.blankFavicons},getPageMetaTags:function(a,b){return this._getMetaTagsForPage(a,b)},_getPremiumUserFavicon:function(a){var b=a.getFavicon();if(b){var c=this._getFaviconMimeType(b);return b=a.getMediaFullStaticUrl(b)+b,this._createFaviconLinkElements(b,c)}return this._createEmptyFaviconElements()},_getDefaultWixFavicon:function(){var a="http://www.wix.com/favicon.ico",b=this._getFaviconMimeType(a);return this._createFaviconLinkElements(a,b)},_createEmptyFaviconElements:function(){return this._createFaviconLinkElements(null,null)},_createFaviconLinkElements:function(a,b){var c=[];return a&&b&&(c.push({rel:"shortcut icon",href:a,type:b}),c.push({rel:"apple-touch-icon",href:a,type:b})),c},_getStaticMediaUrl:function(a){return a.serviceTopology.mediaRootUrl},_getFaviconMimeType:function(a){var b=null;return a&&(this._isExtension(a,"png")?b="image/png":this._isExtension(a,"gif")?b="image/gif":this._isExtension(a,"ico")||this._isExtension(a,"icon")?b="image/x-icon":this._isExtension(a,"jpg")&&(b="image/jpg")),b},_isExtension:function(a,b){return this._getExtension(a).toLowerCase()===b},_getExtension:function(a){if(a){var b=a.lastIndexOf(".");if(b>=0)return a.substr(b+1)}return""},_getMetaTagsForPage:function(a,b){var c=a.getPageSEOMetaData(b),d=[];return d=d.concat(this._getDescriptionSEOMetaTag(c)),d=d.concat(this._getKeywordsSEOMetaTag(c))},_getDescriptionSEOMetaTag:function(a){if(a&&a.description){var b=a.description;return['<meta name="description" content="'+b+'">','<meta property="og:description" content="'+b+'">']}},getGoogleTagManagerScript:function(){var a="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MDD5C4');";return"<script async>"+a+"</script>"},_getKeywordsSEOMetaTag:function(a){if(a&&a.keywords){var b=a.keywords;return['<meta name="keywords" content="'+b+'">','<meta property="og:keywords" content="'+b+'">']}}},new b}),define("core/core/site",["react","lodash","zepto","utils","core/core/dataRequirementsChecker","core/siteRender/WixSiteReact","core/siteRender/WixSiteHeadRenderer","core/core/siteBI","experiment"],function(a,b,c,d,e,f,g,h,i){"use strict";function l(a,c,d){if(b.get(window,"history.pushState")&&d)try{window.history.pushState(null,c,a)}catch(e){}}function m(a,c,d){if(b.get(window,"history.replaceState")&&d)try{window.history.replaceState(null,c,a)}catch(e){}}function o(a,c,d,f){f&&d();var g=e.getNeededRequests(a,c);0!==g.length||f?a.store.loadBatch(g,o.bind(void 0,a,c,d)):(a.wixBiSession["dataLoaded"+n++]=b.now(),d())}function p(a,b,c){o(a.props.siteData,b,c)}function q(a,b,c,d){if(a.state.currentPage!==c.pageId&&(a.siteAPI.reportBeatStart(c.pageId),c.anchorData)){var e=a.siteAPI.getSiteAspect("actionsAspect");e.registerNextAnchorScroll(c.anchorData)}var f=a.props.siteData,g=!0,h=f.currentUrl.full;return o(f,c,function(){g?(f.dataResolver.clearCache(),g=!1,0===b.indexOf("#")?f.currentUrl.hash=b:f.currentUrl=j.parseUrl(b),f.currentPageInfo=c,b!==h&&i.isOpen("googleAnalyticsAllPages")&&a.siteAPI.reportCurrentPageEvent(),a.setState({urlInfo:c,currentPage:c.pageId}),f.isViewerMode()&&l(b,c.title,d),u(f,c.pageId)):a.forceUpdate()}),!0}function r(a){var b="wixSiteProperties";return i.isOpen("mobileNonOptimizedOverflow")&&(b+=" mobile-non-optimized-overflow"),k({className:"WixSite"===a.rendererModel.siteInfo.documentType?b:"noop",urlInfo:a.currentPageInfo,siteData:a,pageId:"masterPage",navigateMethod:q,runDataRequirementsChecker:p,updateHeadMethod:t,getSiteContainer:s})}function s(){return window}function t(a,b){u(a,b),i.isOpen("sv_faviconFromServer")||x(a),"WixSite"===a.rendererModel.siteInfo.documentType&&c(A()).append(g.getGoogleTagManagerScript())}function u(a,b){B(a),w(),v(a,b)}function v(a,b){var c=g.getPageMetaTags(a,b);z(c)}function w(){var a=A();c("[name=description]",a).remove(),c("[property='og:description']",a).remove(),c("[name=keywords]",a).remove()}function y(a,b){var c=document.createElement("link");c.rel=b.rel,c.href=b.href,c.type=b.type,a.appendChild(c)}function z(a){b.forEach(a,function(a){this.append(a)},c(A()))}function A(){return window.document.head}function B(a){window.document.title=a.getCurrentPageTitle()}function C(a,b){var c=d.wixUrlParser.getUrl(a,b);a.isViewerMode()&&c!==a.currentUrl.full&&m(c,b.title,!0)}function D(a,b){var c=d.wixUrlParser.parseUrl(a,a.currentUrl.full);return a.currentPageInfo=c,d.logger.reportBeatEvent(a,6,c.pageId),h.init(a),o(a,c,function(){c=d.wixUrlParser.parseUrl(a,a.currentUrl.full),a.currentPageInfo=c,d.mobileViewportFixer.fixViewportTag(a),C(a,c),b(r(a))}),a}var j=d.urlUtils,k=a.createFactory(f),n=0,x=b.once(function(a){var d=A(),e=g.getFavicons(a);e&&!b.isEmpty(e)&&(c('[rel="shortcut icon"]',d).remove(),c('[rel="apple-touch-icon"]',d).remove(),b.forEach(e,y.bind(null,d)))});return{renderSite:D,waitForAllDataToBeLoaded:o,WixSiteReact:f}}),define("core/siteRender/compRegistrar",["core/siteRender/compFactory","core/components/compHandlers/compStateHandler","experiment!compStateMixin"],function(a,b,c){"use strict";return{register:function(d,e){return a.register(d,e),c&&b.register(d,e),this}}}),define("core/util/transitions",["lodash","react","utils","zepto","reactDOM"],function(a,b,c,d,e){"use strict";var f=c.tween,g={componentWillEnter:function(a){this.killTween();var b=d(e.findDOMNode(this));b.css({position:"relative",top:"0px",left:"0px",opacity:"0.0",visibility:"visible"}),this._tween=new f.Tween(e.findDOMNode(this),this._transitionDuration,{opacity:1,ease:"strong_easeIn",onComplete:a})},componentWillLeave:function(a){this.killTween();var b=d(e.findDOMNode(this));b.css({position:"absolute",opacity:"1.0",visibility:"visible"}),this._tween=new f.Tween(e.findDOMNode(this),this._transitionDuration,{opacity:0,ease:"strong_easeOut",onComplete:a})}},h={componentWillMount:function(){this._transition="outIn",this._transitionDuration=.1},killTween:function(){this._tween&&(f.killTween(this._tween),this._tween=null)},componentWillUnmount:function(){this.killTween()}},i=b.createClass(a.assign(g,{mixins:[h],render:function(){return b.DOM.div(null,this.props.childFunc())}})),j=b.createClass({displayName:"transitionsGroup",render:function(){return this.transferPropsTo(b.addons.TransitionGroup({component:i,children:this.props.children}))}});return{transitionsPseudoMixin:g,transitionMixin:h,transitionsGroup:j,transitionDomDiv:i}}),define("core/components/gallerySizeScaling",["skins","lodash"],function(a,b){"use strict";var c=a.skins;return{getSizeAfterScaling:function(a,b){var d=this.props.compProp.imageMode||"clipImage",e=c[this.props.skin],f=e.exports&&e.exports.bottomGap||0,g=a.itemHeight-f,h=this.getDisplayerWidthDiff(a),i=this.getDisplayerHeightDiff(a,b),j={clipImage:this.getClipImage,flexibleHeight:this.getFlexibleHeight,flexibleWidth:this.getFlexibleWidth,flexibleWidthFixed:this.getFlexibleWidth};return j[d].call(this,a.itemWidth,g,h,i,a.displayerData,d)},getClipImage:function(a,b,c,d){return{displayerSize:{width:a,height:b},imageWrapperSize:this.getWrapperSize(a-c,b-d)}},getFlexibleHeight:function(a,b,c,d,e){var f=a-c,g=Math.floor(f/this.getAspectRatio(e));return{displayerSize:{width:a,height:g},imageWrapperSize:this.getWrapperSize(f,g-d)}},getFlexibleWidth:function(a,b,c,d,e,f){var g="flexibleWidth"===f,h=0,i=0,j=b-d,k=j*this.getAspectRatio(e);if(!g&&k>a-c&&k>a-c){var l=(a-c)/k;k=a-c,j=l*j}return g||(h=Math.floor((a-k-c)/2),i=Math.floor((b-j-d)/2)),{displayerSize:{width:g?k:a,height:b},imageWrapperSize:this.getWrapperSize(k,j,h,i)}},getAspectRatio:function(a){return a.width/a.height},getWrapperSize:function(a,b,c,d){var e=0>b?0:b,f=0>a?0:a;return{imageWrapperHeight:e,imageWrapperWidth:f,imageWrapperMarginLeft:c||0,imageWrapperMarginRight:c||0,imageWrapperMarginTop:d||0,imageWrapperMarginBottom:d||0}},getDisplayerHeightDiff:function(a,c){var d=0,e=parseInt(c.imgHeightDiff&&c.imgHeightDiff.value,10)||0,f=parseInt(c.topPadding&&c.topPadding.value,10)||0;return e||f?d=e+f:a.displayerSkinObj&&a.displayerSkinObj.exports&&(d="mobileView"===this.state.$displayDevice&&b.isNumber(a.displayerSkinObj.exports.m_heightDiff)?a.displayerSkinObj.exports.m_heightDiff:a.displayerSkinObj.exports.heightDiff||0),d},getDisplayerWidthDiff:function(a){var c=0;return a.displayerSkinObj&&a.displayerSkinObj.exports&&(c="mobileView"===this.state.$displayDevice&&b.isNumber(a.displayerSkinObj.exports.m_widthDiff)?a.displayerSkinObj.exports.m_widthDiff:a.displayerSkinObj.exports.widthDiff||0),c}}}),define("core/core/Touchy",["lodash"],function(a){"use strict";function e(){this.data={}}var b={touched:!1,moved:!1,startCoords:{x:0,y:0},deltaCoords:{x:0,y:0},evObj:{}},c=["onSwipeLeft","onSwipeRight","onSwipeUp","onSwipeDown","onTap"],d={left:"onSwipeLeft",right:"onSwipeRight",up:"onSwipeUp",down:"onSwipeDown"};return e.prototype={getCoords:function(a){if(a.touches&&a.touches.length){var b=a.touches[0];return{x:b.pageX,y:b.pageY}}},onTouchStart:function(c){this.initParams(),this.data=a.clone(b),this.data.touched=!0,this.data.numOfTouches=c.touches.length,this.data.startCoords=this.getCoords(c),this.data.startTime=Date.now(),this.data.evObj=c},onTouchMove:function(a){var b=this.getCoords(a),c=this.data.startCoords.x-b.x,d=this.data.startCoords.y-b.y;this.data.moved=!0,this.data.deltaCoords={x:c,y:d}},onTouchEnd:function(b){var c,e;this.data.endTime=Date.now(),a.isEmpty(b)||(this.isValidSwipe()?(c=this.getSwipeDirection(this.data.deltaCoords.x,this.data.deltaCoords.y),e=d[c],b[e]&&b[e](this.data.evObj)):this.isValidTap()&&b.onTap&&b.onTap(this.data.evObj))},registerTouchEvents:function(b){if(a.isObject(b)){var d={};a.forEach(c,function(a){b[a]&&(d[a]=b[a])},this),a.isEmpty(d)||(b.onTouchStart=this.onTouchStart.bind(this),b.onTouchMove=this.onTouchMove.bind(this),b.onTouchEnd=this.onTouchEnd.bind(this,d))}},isValidSwipe:function(){var a=this.data.endTime-this.data.startTime;return this.data.moved&&1===this.data.numOfTouches&&500>a&&(Math.abs(this.data.deltaCoords.x)>100||Math.abs(this.data.deltaCoords.y)>60)},isValidTap:function(){return this.data.touched&&!this.data.moved&&1===this.data.numOfTouches},getSwipeDirection:function(a,b){var c;return c=Math.abs(a)>Math.abs(b)?a>0?"left":"right":b>0?"up":"down"},initParams:function(){this.data.touched=!1,this.data.moved=!1}},e}),define("core/components/fixedPositionRenderPlugin",[],function(){"use strict";return function(a,b,c,d){if(a[""]){var e=a[""].style;if(e&&c.layout&&c.layout.fixedPosition){var f=d.siteData.renderFlags.renderFixedPositionContainers?50:49;e.zIndex=f}}}}),define("core/components/compActionMixin",["react","lodash"],function(a,b){"use strict";return{propTypes:{pageId:a.PropTypes.string.isRequired,siteAPI:a.PropTypes.object.isRequired},handleAction:function(a){var c=b.get(this.props.compActions,a);if(c){var d=this.props.siteAPI.getSiteAspect("behaviorsAspect");d.handleAction(c)}}}}),define("core/components/skinBasedComp",["lodash","skins","react","utils","core/siteRender/compFactory","core/components/baseCompMixin","core/core/Touchy","core/components/fixedPositionRenderPlugin","core/components/compActionMixin"],function(a,b,c,d,e,f,g,h,i){"use strict";function m(){var b;if(a.isFunction(this.getTransformedCssStates)){var c=this.getTransformedCssStates();b=void 0!==c?c:this.state}else b=this.state;if(!b)return{};var d={},e=[];return a.forOwn(b,function(a,b){0===b.lastIndexOf("$",0)&&e.push(a)}),a.isEmpty(e)&&b.hasOwnProperty("cssState")&&(e=a.values(b.cssState)),a.isEmpty(e)||(d["data-state"]=e.join(" ")),d}function n(b,c,d){return b=a.defaults(b||{},c),a.get(d,"isHidden")&&(b.visibility="hidden"),a.isFunction(this.transformRefStyle)&&this.transformRefStyle(b),b}function o(b,c){var d=a.compact([b,c]).join(" ");return a.isFunction(this.transformRefClasses)&&(d=this.transformRefClasses(d)),d}function p(a){var b=a.props.skin,c=k[b];return!c&&a.getDefaultSkinName&&(b=a.getDefaultSkinName(),c=k[b]),c}function q(b){a(b).filter(function(b){return a.has(b,"onClick")}).forEach(function(b){b.style=a.assign(b.style||{},{cursor:"pointer"})}).value()}function r(b){var c=this.props.structure,e=this.props.siteAPI.getSiteAspect("componentModesAspect"),f=d.dataUtils.getCompModeDefinitions(c),g=a.find(f,{type:d.siteConstants.COMP_MODES_TYPES.HOVER});if(g){var h=e.activateComponentMode.bind(e,g.modeId),i=e.deactivateComponentMode.bind(e,g.modeId);b[""].onMouseEnter=h,b[""].onMouseLeave=i}}function s(b){var c=a.pick(b,a.values(l)),d=a(this.props.compActions).pick(a.keys(l)).mapKeys(function(a,b){return l[b]}).mapValues(function(a){return this.handleAction.bind(this,a.name,this.props.currentPage)},this).value();return a.assign(d,c,function(a,b){var c=this;return function(){a&&a.apply(c,arguments),b&&b.apply(c,arguments)}},this)}function t(b){var c=this.getSkinProperties();a.isFunction(this.transformRefData)&&this.transformRefData(c),this.props.transformSkinProperties&&(c=this.props.transformSkinProperties(c)),c[""]||(c[""]={}),this.props.siteData.isMobileDevice()&&q(c),r.call(this,c);var d=this.props.structure;if(!a.get(this.props,"compProp.isHidden")){var e=s.call(this,c[""]);a.assign(c[""],e)}c[""].style=n.call(this,c[""].style,this.props.style,this.props.compProp),c[""].className=o.call(this,c[""].className,this.props.className),a.assign(c[""],m.call(this)),b.react&&0!==b.react.length||(c[""]=a.defaults(c[""],c.inlineContent));var f=a.get(d,"layout.rotationInDegrees");return f&&(c[""]["data-angle"]=f),c}var j=b.skinsRenderer,k=b.skins,l={click:"onClick",dblClick:"onDoubleClick",mouseIn:"onMouseEnter",mouseOut:"onMouseLeave"};j.registerRenderPlugin(h);var u={mixins:[i,f],render:function(){var b;try{var d=p(this);if(!d){var e=this.props.structure&&this.props.structure.componentType||"";return console.error("Skin ["+this.props.skin+"] not found for comp ["+e+"]"),c.DOM.div()}var f=t.call(this,d);if(this.props.siteData.isTouchDevice()){var h=new g;a.forEach(f,function(a){h.registerTouchEvents(a)})}return j.renderSkinHTML.call(this,d.react,f,this.props.styleId,this.props.id,this.props.structure,this.props,this.state)}catch(i){if(this.props.siteData.isDebugMode())throw i;return console.error("Cannot render component",this.constructor.displayName,this.props.id,i),b={"":{style:n.call(this,{},this.props.style),"data-dead-comp":!0}},j.renderSkinHTML.call(this,k["skins.viewer.deadcomp.DeadCompPublicSkin"].react,b,"deadComp",this.props.id,this.props.structure,this.props,this.state)}},getSkinExports:function(){var a=p(this);return a&&a.exports},classSet:function(b){return d.classNames(a.reduce(b,function(a,b,c){return a[this.styleId+"_"+c]=b,a},{},this.props))},componentWillUpdate:function(){this.props.onComponentWillUpdate&&this.props.onComponentWillUpdate()},createChildComponent:function(b,c,d,f){var g=this.getSkinExports(),h="string"==typeof d?{skin:g[d].skin,styleId:this.props.styleId+d}:d,i=a.merge({siteData:this.props.siteData,siteAPI:this.props.siteAPI,pageData:this.props.pageData,compProp:this.props.compProp,loadedStyles:this.props.loadedStyles,compData:b,id:this.props.id+b.id,ref:b.id,refInParent:b.id||"",skin:h.skin,styleId:h.styleId,pageId:this.props.pageId,currentPage:this.props.currentPage},f);return i.structure={componentType:c,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:f&&f.skinPart||i.ref},e.getCompClass(c)(i)}};return{skinBasedComp:u,_testsGetCompCssStates:m,_testsGetCompInlineStyles:n,_testActionsMap:l}}),define("core/components/fixedPositionContainerMixin",["lodash"],function(a){"use strict";function b(a){return a.style&&"fixed"===a.style.position}function c(a){return b(a)&&!a.siteData.isMobileView()?{$fixed:"fixedPosition"}:{$fixed:""}}function d(a){return a.siteData.isMobileView()?{$mobile:"mobileView"}:{$mobile:""}}function e(b){return a.merge(d(b),c(b))}return{getRootStyle:function(a){return this.getRootPosition?{position:this.getRootPosition(a)}:{}},getInitialState:function(){return e(this.props)},componentWillReceiveProps:function(b){var c=e(this.props),d=e(b);a.isEqual(c,d)||this.setState(d)}}}),define("core/components/galleryAutoPlay",[],function(){"use strict";return{getInitialState:function(){return{shouldAutoPlay:this.canAutoPlay(),$slideshow:this.canAutoPlay()&&!this.props.siteAPI.isZoomOpened()&&this.props.siteData.renderFlags.isPlayingAllowed?"autoplayOn":"autoplayOff"}},canAutoPlay:function(){return this.hasItems()&&this.props.compProp.autoplay},shouldShowAutoPlay:function(){return this.hasItems()&&this.props.compProp.showAutoplay},hasItems:function(){return this.props.compData.items.length>0},toggleAutoPlay:function(){if(this.hasItems()){var a="autoplayOff";if("autoplayOff"===this.state.$slideshow){if(!this.props.siteData.renderFlags.isPlayingAllowed)return;a="autoplayOn"}this.setState({shouldAutoPlay:!this.state.shouldAutoPlay,$slideshow:a},this.updateAutoplayState)}},componentWillReceiveProps:function(){var a=this.state.shouldAutoPlay&&!this.props.siteAPI.isZoomOpened()&&this.props.siteData.renderFlags.isPlayingAllowed?"autoplayOn":"autoplayOff";a!==this.state.$slideshow&&this.setState({$slideshow:a},this.updateAutoplayState)},updateAutoplayState:function(){this.clearTimeoutNamed(this.props.id),"autoplayOn"===this.state.$slideshow&&this.setTimeoutNamed(this.props.id,this.autoplayCallback,this.getAutoplayInterval())},autoplayCallback:function(){this.props.siteAPI.isZoomOpened()||("LTR"===this.props.compProp.autoPlayDirection?this.prev():this.next())},getAutoplayInterval:function(){var a=this.props.compProp.autoplayInterval;return Math.floor(1e3*a)}}}),define("core/components/optionInput",["lodash","core/components/skinBasedComp"],function(a,b){"use strict";var c="toolTip";return{mixins:[b.skinBasedComp],getInitialState:function(){return this.getCssState(this.props)},componentWillReceiveProps:function(a){this.setState(this.getCssState(a))},getCssState:function(a){return{$enabledState:a.compData.enabled?"enabled":"disabled",$selectState:a.selected?"selected":"unselected"}},onMouseEnter:function(){this.refs[c].showToolTip({},{source:this})},onMouseLeave:function(){this.refs[c].closeToolTip()},createInfoTipChildComponent:function(){return this.createChildComponent({content:this.props.compData.description,id:c},"wysiwyg.common.components.InfoTip",{skin:"wixapps.integration.skins.ecommerce.options.InfoTipSkin",styleId:this.props.loadedStyles["wixapps.integration.skins.ecommerce.options.InfoTipSkin"]},{ref:c,className:this.props.styleId+"tooltip"})}}}),define("core/components/skinInfo",["skins","lodash"],function(a,b){"use strict";return{getStatics:function(a){var c={};return b.forEach(a,function(a){c[a]=this.getStatic(a)},this),c},getStatic:function(b,c){var d=a.skins[this.props.skin];return d.statics?d.statics[b]:c},getParams:function(a,c){var d={};return b.forEach(a,function(a){d[a]=this.getParamFromDefaultSkin(a,c)},this),d},getParamFromDefaultSkin:function(a,b){return this.getParamFromSkin(a,b||this.props.skin)},getParamFromSkin:function(c,d){var e=this.props.siteData.getAllTheme(),f=e[this.props.structure.styleId],g=b.get(f,"style.properties")||{},h=e.THEME_DATA,i=a.skins[d],j=g[c]||i.paramsDefaults&&i.paramsDefaults[c];return b.isArray(j)&&j.length>1&&(g=b.clone(g),g[c]=this.getSumParamValue(c,d)),a.params.renderParam(c,i,g,h)},getSumParamValue:function(c,d){var e=this.getSkinExports(),f=a.skins[d].paramsDefaults,g=f&&f[c];if(!g){var h=e[c];return h?Math.abs(parseInt(h,10))||0:0}return Array.isArray(g)?b.sum(g,function(a){return Math.abs(parseInt(this.getParamFromSkin(a,d).value,10))},this):Math.abs(parseInt(g,10))||0},getFromExports:function(a){var b=this.getSkinExports();return b&&b[a]||0},getStyleData:function(a){var c=this.props.siteData,d=a||this.props.structure.styleId;d&&(d=d.replace("#",""));var e=c.getAllTheme()[d];return b.get(e,"style.properties")||{}}}}),define("core/components/behaviorHandlers/behaviorHandlersFactory",["lodash"],function(a){"use strict";function d(d){return a.has(b,d)?b[d]:(console.warn("there is no behavior handler for type "+d),c)}function e(a,c){b[a]=c}var b={},c={handle:a.noop};return{getHandler:d,registerHandler:e}}),define("core/components/siteAspects/BehaviorsAspect",["lodash","core/components/behaviorHandlers/behaviorHandlersFactory"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a,this._registeredActions={}}return c.prototype={handleAction:function(c){a(this._registeredActions).map(c.type+"."+c.sourceId).flatten().filter({action:{name:c.name}}).forEach(function(a){var d=a.behavior,e={type:c.name,target:c.sourceId};b.getHandler(d.type).handle(d,this._aspectSiteAPI.getSiteAPI(),e)},this).value()},setBehaviorsForActions:function(b,c){var d=a(b).groupBy("action.type").mapValues(function(b){return a.groupBy(b,"action.sourceId")}).value();this._registeredActions[c]=d},getActions:function(b,c){return a(this._registeredActions).map(b+"."+c).flatten().compact().map("action").uniq().mapKeys(function(a){return a.name}).value()}},c}),define("core/components/siteAspects/loginToWixAspect",["react","zepto","lodash","utils","core/core/siteAspectsRegistry","core/bi/events"],function(a,b,c,d,e,f){"use strict";function j(a,b){b=c.assign(b||{},{renderMode:"iframe"});var e=d.urlUtils.toQueryString(b);return"//"+a.currentUrl.host+"/signin?"+e}function k(a,b){if(!a)return null;for(var c=window.pageYOffset+a.getBoundingClientRect().top,d=i.getActiveAnchor(b,c),e=a;e&&!e.id;)e=e.parentNode;return{activeFold:d.index,totalFolds:d.total,text:a.textContent||e.alt||"",componentId:e?e.id:void 0}}function l(){if(!this.iframeFactory){var b=this.queryParams,c=a.createClass({displayName:"LoginToWixIframe",render:function(){return a.DOM.iframe({src:j(this.props.siteData,b),ref:"iframe",style:{position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",display:"block",zIndex:1e4}})}});this.iframeFactory=a.createFactory(c)}return this.iframeFactory}function m(){var a=this.aspectSiteApi.getSiteAPI().getSiteData(),b=l.call(this);return b({siteData:a,displayForm:this.isLoginToWixShown})}function n(){return c.isUndefined(this.isWixSite)&&(this.isWixSite=this.aspectSiteApi.getSiteAPI().getSiteData().isWixSite()),this.isWixSite}function o(a){this.aspectSiteApi=a,this.isLoginToWixShown=!1,this.registeredToMessage=!1,this.iframeFactory=null}var g={postLogin:"http://www.wix.com/my-account",postSignUp:"http://www.wix.com/new/account"},h=d.wixUserApi,i=d.anchorUtils;return o.prototype={getReactComponents:function(){
return this.isLoginToWixShown&&n.call(this)?[m.call(this)]:null},isLoggedInToWix:function(){var a=this.aspectSiteApi.getSiteAPI().getSiteData();return h.isSessionValid(a)},logout:function(){var a=this.aspectSiteApi.getSiteAPI().getSiteData();h.logout(a),this.aspectSiteApi.forceUpdate()},openLoginToWixForm:function(a,b,e){if(!this.isLoginToWixShown){this.isWixSite=!0,this.registeredToMessage||(this.aspectSiteApi.registerToMessage(this.handlePostMessage.bind(this)),this.registeredToMessage=!0);var h=d.urlUtils.parseUrl(a).query;this.queryParams=b?h:null,this.postLoginUrl=h.postLogin||g.postLogin,this.postSignupUrl=h.postSignUp||g.postSignUp;var i=a.indexOf("?"),j={targetUrl:-1!==i?a.substring(0,i):a},l=this.aspectSiteApi.getSiteAPI().getSiteData();c.assign(j,c.pick(h,["postLogin","postSignUp","loginCompName"]),k(e,l)),this.aspectSiteApi.reportBI(f.LP_BUTTON_CLICK,j),this.isLoginToWixShown=!0,this.aspectSiteApi.scrollSiteTo(0,0),this.aspectSiteApi.forceUpdate()}},handlePostMessage:function(a){a=a.data?a:a.originalEvent;var b=this.aspectSiteApi;switch(a.data){case"onLoad":break;case"onPostLogin":location.href=this.postLoginUrl;break;case"onPostSignUp":location.href=this.postSignupUrl;break;case"onClose":this.isLoginToWixShown=!1,setTimeout(function(){b.forceUpdate()},1e3)}}},e.registerSiteAspect("LoginToWix",o),o}),define("core/components/siteAspects/parentFrameAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(){var a=this.aspectSiteApi.getSiteAPI().getSiteData().measureMap,c=b.get(a,"height.SITE_STRUCTURE",0);if(c&&c!==this.storedHeight){this.storedHeight=c;var d;parent.postMessage?d=parent:parent.document.postMessage&&(d=parent.document),d&&"undefined"!=typeof d&&d.postMessage(c,"*")}}function d(a){this.aspectSiteApi=a,this.storedHeight=0,a.registerToDidLayout(c.bind(this))}return a.registerSiteAspect("parentFrame",d),d}),define("core/components/siteAspects/vkPostMessageAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(a){var b;try{b=JSON.parse(a.data)}catch(c){return}d.call(this,b.id,b)}function d(a,c){b.forEach(this._registeredCompIds,function(b){if(a===b){var d=this._siteAPI.getComponentById(b);if(!d)return void delete this._registeredCompIds[b];d.onVKPostMessage&&d.onVKPostMessage(c)}},this)}var e=function(a){a.registerToMessage(c.bind(this)),this._siteAPI=a,this._registeredCompIds={}};e.prototype={registerToPostMessage:function(a){this._registeredCompIds[a.props.id]=a.props.id},unRegisterToPostMessage:function(a){delete this._registeredCompIds[a.props.id]}},a.registerSiteAspect("vkPostMessage",e)}),define("core/components/siteAspects/packagePickerAspect",["core/core/siteAspectsRegistry"],function(a){"use strict";function b(a){for(var b=document.getElementsByTagName("iframe"),c=0,d=b.length;d>c;c++)if(0===b[c].src.indexOf(a.origin))return b[c];return null}function c(a){var c=b(a);null!==c?c.contentWindow.postMessage(location.hash,"*"):console.error("Unable to find premium packagePicker iframe source")}function d(a){switch(a=a.data?a:a.originalEvent,a.data){case"openUserLoginMessage":this.siteAPI.getSiteAspect("LoginToWix").openLoginToWixForm("https://users.wix.com/wix-users/login/form?postLogin=/upgrade/website",!1);break;case"sendHashDataToPremium":c(a)}}function e(a){this.siteAPI=a,a.registerToMessage(d.bind(this))}e.prototype={setSelected:function(a){this.selectedPackagePickerId=a.props.id,this.siteAPI.forceUpdate()},isPackagePickerSelected:function(a){return this.selectedPackagePickerId&&a.props.id===this.selectedPackagePickerId}},a.registerSiteAspect("PackagePickerAspect",e)}),define("core/core/pageItemRegistry",[],function(){"use strict";var a={Image:function(a,b,c){var d={id:"imageZoomComp",key:"imageZoomComp",styleId:"zoom",dataQuery:"#"+a.id,skin:"wysiwyg.skins.ImageZoomSkin",componentType:"wysiwyg.components.imageZoom"};return c.isMobileView()?d.skin="wysiwyg.skins.MobileImageZoomSkin":(c.isMobileDevice()||c.isTabletDevice())&&(d.skin="wysiwyg.skins.NonOptimizedImageZoomSkin"),d},PermaLink:function(a,b,c){var d={id:"appPartZoomComp",key:"appPartZoomComp",styleId:"zoom",dataQuery:"#"+a.id,skin:"wysiwyg.skins.AppPartZoomSkin",componentType:"wixapps.integration.components.AppPartZoom"};return c.isMobileView()&&(d.skin="wysiwyg.skins.MobileAppPartZoomSkin"),d}};return{registerPageItem:function(b,c){return a[b]?void console.error("page item already registered "+b):void(a[b]=c)},getCompStructure:function(b,c,d,e){return a[b]?a[b](c,d,e):null},clear:function(){a={}}}}),define("core/core/pageItemAspect",["core/core/pageItemRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory","core/core/siteAspectsRegistry"],function(a,b,c,d){"use strict";function e(a,d,e,f){var g=b.getCompProps(a,e,null,f);g.pageItemAdditionalData=d;var h=c.getCompClass(a.componentType);return h(g)}function f(b,c){var d=c.getDataByQuery(b.pageItemId);if(!d)return null;var e=a.getCompStructure(d.type,d,b,c);return e?e:null}function g(a){this._aspectSiteAPI=a}g.prototype={getReactComponents:function(a){var b=this._aspectSiteAPI.getPageItemInfo(),c=this._aspectSiteAPI.getSiteData(),d=f(b,c);if(!d)return null;var g=c.getDataByQuery(b.pageItemAdditionalData)||b.pageItemAdditionalData;return[e(d,g,this._aspectSiteAPI.getSiteAPI(),a)]},getComponentStructures:function(){var a=this._aspectSiteAPI.getPageItemInfo(),b=f(a,this._aspectSiteAPI.getSiteData());return b?[b]:null}},d.registerSiteAspect("pageItem",g)}),define("core/core/nonPageItemZoomAspect",["utils","core/core/pageItemRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory","core/core/siteAspectsRegistry"],function(a,b,c,d,e){"use strict";function f(b,e,f){var g=c.getCompProps(b,e.getSiteAPI(),null,f),h=a.nonPageItemZoom.getZoomedImageData();g.compData=h;var i=d.getCompClass(b.componentType);return g.closeFunction=a.nonPageItemZoom.unzoom,g.pageItemAdditionalData=h.galleryData,i(g)}function g(c){var d=a.nonPageItemZoom.getZoomedImageData();if(void 0===d)return null;var e=b.getCompStructure("Image",d,null,c);return delete e.dataQuery,e.compData=d,e}function h(a){this._aspectSiteAPI=a}h.prototype={getReactComponents:function(a){var b=g(this._aspectSiteAPI.getSiteData());return b&&[f(b,this._aspectSiteAPI,a)]},getComponentStructures:function(){var a=g(this._aspectSiteAPI.getSiteData());return a?[a]:null}},e.registerSiteAspect("nonPageItemZoom",h)}),define("core/components/siteAspects/scriptClass",["react","reactDOM"],function(a,b){"use strict";function c(a){return window.loadedScripts&&window.loadedScripts[a.NAME]}function d(a){return'window.loadedScripts = window.loadedScripts || {}; window.loadedScripts["'+a.NAME+'"] = true;'}var e=a.createClass({displayName:"scriptClass",loaded:!1,componentDidMount:function(){var e,f,g,a=this.props.scriptData,d=c(a.script);d&&!this.loaded?this.fireCallbacks(a,!0):(g=this,d=document.createElement("script"),e=function(){g.fireCallbacks(a,!1),g.loaded=!0,d.removeEventListener("load",e)},d.addEventListener("load",e),d.src=a.script.SRC,f=b.findDOMNode(this),f.replaceChild(d,f.children[0]))},fireCallbacks:function(a,b){a.callbacks.forEach(function(a){var c=a.context;c?a.callback.call(c,{fromCache:b}):a.callback({fromCache:b})}),a.callbacks.length=0},render:function(){var b=this.props.scriptData.script,c="script-"+b.NAME;return a.DOM.div(null,a.DOM.script({id:c,src:b.SRC}),a.DOM.script({dangerouslySetInnerHTML:{__html:d(b)}}))}});return e}),define("core/components/siteAspects/externalScriptLoaderAspect",["react","utils","lodash","core/core/siteAspectsRegistry","core/components/siteAspects/scriptClass"],function(a,b,c,d,e){"use strict";function i(a){this.siteAPI=a,this.loadedScripts={}}var f="v2.4",g="304553036307597",h=c.template("//connect.facebook.net/<%= lang %>/sdk.js#xfbml=1&appId=<%= appId %>&version=<%= sdkVersion %>");i.prototype={getReactComponents:function(){return c.map(this.loadedScripts,this.getNewScript,this)},loadScript:function(a,b,d){var f,g,e=this.loadedScripts[a];b&&(f={callback:b,context:d}),e&&f?e.callbacks.push(f):(g=this.getScriptDescription.apply(this,arguments),c.isFunction(g.actionBefore)&&g.actionBefore(),this.loadedScripts[a]={script:g,callbacks:f?[f]:[]})},unsubscribe:function(a,b){var d,c=this.loadedScripts[a];c&&(d=c.callbacks,d.some(function(a,c){var e=a.callback===b;return e?(d.splice(c,1),e):void 0}))},getNewScript:function(b,c){return a.createElement(e,{key:c,ref:c,scriptData:b})},getScriptDescription:function(a,c,d){switch(a){case"FACEBOOK":return{NAME:"FacebookSDK",SRC:h({lang:this.getFacebookSdkLanguage(d.props.siteData),sdkVersion:f,appId:g})};case"GOOGLE":return{NAME:"GoogleApi",SRC:"//apis.google.com/js/plusone.js",actionBefore:function(){var a=d.props.siteData;window.___gcfg={lang:b.wixUserApi.getLanguage(a.requestModel.cookie,a.currentUrl)}}}}},getFacebookSdkLanguage:function(a){var c={en:"en_US",es:"es_ES",pt:"pt_BR",ru:"ru_RU",fr:"fr_FR",de:"de_DE",ja:"ja_JP",ko:"ko_KR",it:"it_IT",pl:"pl_PL",tr:"tr_TR",nl:"nl_NL",sv:"sv_SE",da:"da_DK",no:"nn_NO"};return c[b.wixUserApi.getLanguage(a.requestModel.cookie,a.currentUrl)]||c.en}},d.registerSiteAspect("externalScriptLoader",i)}),define("core/core/SiteMembersAPI",["utils","lodash"],function(a,b){"use strict";function k(i,j,k,l,m,n){var o=a.ajaxLibrary,p=e+i;j=b.merge(j||{},{collectionId:d,metaSiteId:f});var q={url:p,type:"GET",dataType:"jsonp",data:j,complete:this.onJsonpComplete,context:this};m&&(b.merge(q.data,{svSession:m,appUrl:c}),n&&(q.data.initiator=n)),g=l,h=k,o.temp_jsonp(q)}var c,d,e,f,g,h,i={login:"/api/member/login",register:"/api/member/register",apply:"/api/member/apply",sendForgotPasswordMail:"/api/member/sendForgotPasswordMail",resetMemberPassword:"/api/member/changePasswordWithMailToken",getMemberDetails:"/api/member"},j={};return j.initializeData=function(a){f=a.getMetaSiteId();var b=a.getClientSpecMapEntriesByType("sitemembers")[0];d=b&&b.smcollectionId,e=a.serviceTopology.siteMembersUrl,c=a.currentUrl.full},j.onJsonpComplete=function(a,c){if(c&&!c.errorCode)b.isFunction(h)&&h(c);else{var d=c&&c.errorCode||"General_Err";b.isFunction(g)&&g(d)}h=null,g=null},j.login=function(a,b,c,d,e){k.call(this,i.login,a,b,c,d,e)},j.register=function(a,b,c,d,e){k.call(this,i.register,a,b,c,d,e)},j.apply=function(a,b,c,d,e){k.call(this,i.apply,a,b,c,d,e)},j.sendForgotPasswordMail=function(a,b,c,d){k.call(this,i.sendForgotPasswordMail,{email:a,returnUrl:b},c,d)},j.resetMemberPassword=function(a,b,c){k.call(this,i.resetMemberPassword,a,b,c)},j.getMemberDetails=function(a,b,c){k.call(this,i.getMemberDetails+"/"+a,null,b,c)},j}),define("core/util/translations/siteMembersTranslations",[],{de:{SMApply_Success2:"Der Administrator der Website wird Sie per E-Mail informieren ( {0} ), sobald Ihre Anfrage bestätigt wurde. ",SMApply_Success1:"Vielen Dank! Ihre Anfrage zur Mitgliederanmeldung wurde versandt und wartet auf Bestätigung.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Bitte prüfen Sie Ihren Posteingang.",SMResetPassMail_confirmation_msg:"Wir haben Ihnen eine E-Mail mit einem Link geschickt, mit dem Sie Ihr Passwort zurücksetzen können.",SMResetPass_Reset_Succ:"Sie haben Ihr Passwort erfolgreich zurückgesetzt.",SMResetPass_Continue:"Fortfahren",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Beim Abmelden ist etwas schiefgelaufen. Bitte versuchen Sie es noch einmal.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Abmelden nicht erfolgreich",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Sie sind der Besitzer dieser Website und bei Wix.com angemeldet. Bitte melden Sie sich bei Wix.com ab, um die Mitgliederanmeldung zu testen.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fehler beim Abmelden"},en:{SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Please check your email",SMResetPassMail_confirmation_msg:"We’ve sent you an email with a link that will allow you to reset your password",SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure"},es:{SMApply_Success2:"El administrador de la página web te notificará a través de un email ({0}) una vez que tu solicitud sea aprobada. ",SMApply_Success1:"¡Enhorabuena! Tu solicitud de login de miembros fue enviada y su aprobación está pendiente.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Por favor revisa tu correo",SMResetPassMail_confirmation_msg:"Te hemos enviado un email con un enlace que te permitirá restablecer tu contraseña.",SMResetPass_Reset_Succ:"¡Has restablecido tu contraseña exitosamente!",SMResetPass_Continue:"Continuar",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Algo falló en el cierre de sesión. Por favor inténtalo de nuevo.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"No se pudo cerrar sesión",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Tú eres el dueño de esta página web e iniciaste sesión con Wix.com. Por favor cierra tu sesión en Wix.com para que puedas probar la función Miembros del Sitio.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"El cierre de sesión falló"},fr:{SMApply_Success2:"L'administrateur du site vous informera par email ({0}) lorsque votre demande aura été approuvée. ",SMApply_Success1:"Bravo ! Votre demande de connexion membre a été envoyée et est actuellement en attente d'approbation.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Veuillez consulter votre boîte e-mail",SMResetPassMail_confirmation_msg:"Un email avec un lien pour réinitialiser votre mot de passe vous a été envoyé",SMResetPass_Reset_Succ:"Vous avez réinitialisé votre mot de passe avec succès",SMResetPass_Continue:"Continuer",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Un problème est survenu lors de la déconnexion. Veuillez réessayer.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Échec Déconnexion",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Vous êtes le propriétaire de ce site internet et vous êtes connecté à Wix.com. Veuillez vous déconnecter de Wix.com afin de tester la fonctionnalité Membres du Site.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Échec déconnexion"},it:{SMApply_Success2:"L'amministratore del sito ti notificherà via email( {0} ) una volta che la tua richiesta è stata accettata ",SMApply_Success1:"Successo! La tua richiesta di login membro è stata inviata ed è in attesa di approvazione.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Ti preghiamo di controllare la tua email",SMResetPassMail_confirmation_msg:"Ti abbiamo inviato un'email con un link che ti permetterà di ripristinare la tua password",SMResetPass_Reset_Succ:"Hai ripristinato con successo la tua password.",SMResetPass_Continue:"Continua",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Qualcosa è andato storto durante il logout. Ti preghiamo di riprovare.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Non Riuscito",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Sei il proprietario di questo sito web e hai effettuato l'accesso a Wix.com. Esci da Wix.com per testare la funzionalità Membri del Sito.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fallimento Logout"},ja:{SMApply_Success2:"会員登録の承認後、サイト管理者から「{0}」に通知メールが送信されます。 ",SMApply_Success1:"会員登録の申請を送信しました。",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"新着メールをご確認ください",SMResetPassMail_confirmation_msg:"メールのリンクをクリックしてパスワードをリセットしてください。",SMResetPass_Reset_Succ:"パスワードがリセットされました！",SMResetPass_Continue:"続行",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"ログアウトできませんでした。もう一度お試しください。",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"ログアウトできませんでした",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"あなたはサイト所有者として Wix.com にログインしています。サイト会員機能をテストするには、Wix.com からログアウトしてください。",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"ログアウトできませんでした"},ko:{SMApply_Success2:"회원가입이 승인되면 이메일로 알려드립니다. ",SMApply_Success1:"성공적으로 회원가입 요청이 이루어졌습니다! 현재 회원가입 승인을 기다리고  있습니다.",SMContainer_OK:"확인",SMResetPassMail_confirmation_title:"이메일을 확인해 주세요.",SMResetPassMail_confirmation_msg:"비밀번호 재설정 링크가 이메일로 발송되었습니다.",SMResetPass_Reset_Succ:"비밀번호가 성공적으로 변경되었습니다.",SMResetPass_Continue:"계속",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"로그아웃에 문제가 발생했습니다. 다시 시도해 주세요.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"로그아웃에 실패했습니다.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"사용자님은 이 사이트 소유자이며 Wix.com에 로그인되어 있습니다. 사이트 회원 기능을 테스트하려면 Wix.com에서 로그아웃해 주세요.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"로그아웃 실패"},pl:{SMApply_Success2:"Administrator powiadomi Cię w emailu,( {0} ) gdy twoja prośba zostanie zatwierdzona. ",SMApply_Success1:"Gratulujemy! Twoja prośba o członkostwo została wysłana i czeka na zatwierdzenie.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Sprawdź swój email",SMResetPassMail_confirmation_msg:"Wysłaliśmy email z linkiem, który umożliwi Ci zresetowanie hasła.",SMResetPass_Reset_Succ:"Zresetowanie hasła powiodło się.",SMResetPass_Continue:"Kontynuuj",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Coś poszło nie tak przy próbie wylogowania. Spróbuj jeszcze raz.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Wylogowanie Nie Powiodło Się",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Jesteś właścicielem tej witryny i jesteś obecnie zalogowany na Wix.com. Wyloguj się z Wix.com, aby przetestować funkcję Login Członka.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Wylogowanie nie powiodło się"},ru:{SMApply_Success2:"Как только ваш запрос будет подтвержден, администратор сайта отправит вам письмо на {0} ",SMApply_Success1:"Отлично! Ваш запрос регистрации отправлен на подтверждение.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Пожалуйста, проверьте ваш email",SMResetPassMail_confirmation_msg:"Мы отправили вам ссылку для смены пароля.",SMResetPass_Reset_Succ:"Вы успешно сменили пароль.",SMResetPass_Continue:"Продолжить",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Что-то не срослось. Пожалуйста, попробуйте еще раз.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Не получилось выйти",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Чтобы протестировать эту функцию, пожалуйста, выйдите из аккаунта Wix.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Не удалось выйти"},nl:{SMApply_Success2:"De administrator van de website zal u een e-mailbericht ( {0} ) sturen zodra uw verzoek is goedgekeurd ",SMApply_Success1:"Uw verzoek om toegang is verzonden en wacht op goedkeuring.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Controleer uw e-mailberichten",SMResetPassMail_confirmation_msg:"We hebben u een e-mailbericht gestuurd met een link waarmee u uw wachtwoord opnieuw kunt instellen",SMResetPass_Reset_Succ:"U hebt uw wachtwoord opnieuw ingesteld.",SMResetPass_Continue:"Doorgaan",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Er ging iets fout bij het uitloggen. Probeer het opnieuw.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Uitloggen mislukt",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"U bent de eigenaar van deze website en u bent al ingelogd op Wix.com. Log uit om de functies voor leden van uw website te testen.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Uitloggen mislukt"},tr:{SMApply_Success2:"Talebiniz onaylandığında site yöneticisi size e-posta( {0} ) yoluyla bildirecektir ",SMApply_Success1:"Başarılı! Üye girişi talebiniz gönderildi ve onay bekliyor.",SMContainer_OK:"TAMAM",SMResetPassMail_confirmation_title:"Lütfen e-postanızı kontrol edin",SMResetPassMail_confirmation_msg:"Size şifrenizi sıfırlamanızı sağlayacak bir bağlantı içeren bir e-posta gönderdik.",SMResetPass_Reset_Succ:"Şifrenizi yeniden ayarlama başarılı.",SMResetPass_Continue:"Devam",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Bu oturum kapatma işlemiyle ilgili bir hata oluştu. Lütfen daha sonra deneyin.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Oturum Kapatma Başarısız",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Bu web sitesinin sahibisiniz ve Wix.com'daki oturumuz açık. Lütfen Site Üyelik özelliğini test etmek için Wix.com oturumunuzu kapatın.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Oturum Kapatma Hatası"},sv:{SMApply_Success2:"Sidans administratör meddelar dig via e-post ({0}) så fort din begäran har godkänts  ",SMApply_Success1:"Klart! Din begäran om medlemsinloggning har skickats och väntar på godkännande.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Kontrollera din e-post",SMResetPassMail_confirmation_msg:"Vi har skickat ett mejl med en länk som gör att du kan återställa ditt lösenord",SMResetPass_Reset_Succ:"Du har återställt ditt lösenord.",SMResetPass_Continue:"Fortsätt",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Något gick fel vid utloggningen. Försök igen.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Kunde inte logga ut",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du äger den här hemsidan och är inloggad på Wix.com. Logga ut från Wix.com för att testa funktionen sidmedlemmar.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Kunde inte logga ut"},pt:{SMApply_Success2:"O administrador do site irá enviar-lhe uma notificação via email( {0} ) assim que o pedido for aprovado ",SMApply_Success1:"Seu pedido de login foi enviado com sucesso e aguarda aprovação.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Por favor, verifique seu email",SMResetPassMail_confirmation_msg:"Enviamos um e-mail com um link que lhe permitirá redefinir sua senha",SMResetPass_Reset_Succ:"Você redefiniu sua senha com sucesso.",SMResetPass_Continue:"Continuar",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Algo deu errado com este logout. Por favor, tente novamente.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Falha no Logout",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Você é o proprietário deste site, e fez login em Wix.com. Por favor, faça logout do Wix.com para testar o recurso de Membros do Site.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Falha no logout"},no:{SMApply_Success2:"Nettstedets administrator vil varsle deg via e-post( {0} ) med en gang forespørselen din har blitt godkjent ",SMApply_Success1:"Supert! Din forespørsel om medlemsinnlogging er sendt og venter på godkjenning.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Vennligst sjekk e-posten din",SMResetPassMail_confirmation_msg:"Vi har sendt deg en e-post med en link som vil tillate deg å nullstille passordet ditt",SMResetPass_Reset_Succ:"Du har nå tilbakestillt passordet.",SMResetPass_Continue:"Fortsett",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Noe gikk galt ved utlogging. Gi det et nytt forsøk.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Mislykket utlogging",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du er eier av dette nettstedet, og er logget inn på Wix.com. Logg ut av Wix.com for å teste nettstedets medlemmer-funksjonen.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Feil ved utlogging"},da:{SMApply_Success2:"Hjemmesideadministratoren vil give dig besked via e-mail( {0} ) når din anmodning er blevet godkendt. ",SMApply_Success1:"Succes! Din anmodning om medlemslogin er sendt og afventer godkendelse.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Tjek venligst dine e-mails",SMResetPassMail_confirmation_msg:"Vi har sendt dig en e-mail med et link, som giver dig mulighed for at nulstille din adgangskode",SMResetPass_Reset_Succ:"Du har med succes nulstillet din adgangskode.",SMResetPass_Continue:"Næste",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Noget gik galt ved dit log ud. Prøv venligst igen.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Log ud mislykkedes",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du er ejeren af denne hjemmeside, og er logget ind på Wix.com. Venligst log ud af Wix.com for at teste funktionen for hjemmesidemedlemmer.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fejl ved log ud"},hi:{SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Please check your email",SMResetPassMail_confirmation_msg:"We’ve sent you an email with a link that will allow you to reset your password",SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure"}}),define("core/siteRender/SiteMembersAspect",["lodash","utils","core/core/siteAspectsRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory","core/core/SiteMembersAPI","core/bi/events","core/util/translations/siteMembersTranslations"],function(a,b,c,d,e,f,g,h){"use strict";function o(a,b,c){return{componentType:a,type:"Component",id:b,key:b,skin:c}}function p(){return o("wysiwyg.viewer.components.dialogs.CreditsDialog","creditsDialog","wysiwyg.viewer.skins.dialogs.creditsDialogSkin")}function q(){return o("wysiwyg.viewer.components.dialogs.NotificationDialog","notificationDialog","wysiwyg.viewer.skins.dialogs.notificationDialogSkin")}function r(){return o("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog","memberLoginDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkin")}function s(){return o("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog","signUpDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkin")}function t(){return o("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog","requestResetPasswordDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkin")}function u(){return o("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog","resetPasswordDialog","wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkin")}function v(){return o("wysiwyg.viewer.components.dialogs.EnterPasswordDialog","enterPasswordDialog","wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkin")}function w(a,b,c,d){var e=c(),f=y.call(this,e,a,b);return d.call(this,f),x.call(this,e,f)}function x(a,b){b.notClosable=this.notClosable;var c=e.getCompClass(a.componentType);return c(b)}function y(a,b,c){var e=d.getCompProps(a,b,null,c),f=this.dialogToDisplay;return e.language=Z[f]&&Z[f].language||Z[this.siteData.siteId].language,e.onCloseDialogCallback=S.bind(this),e}function z(b){b.onSubmitCallback=K.bind(this);var c=Z[l.SignUp]&&Z[l.SignUp].language||null;b.onSwitchDialogLinkClick=I.bind(this,l.SignUp,a.noop,c),b.onForgetYourPasswordClick=I.bind(this,l.ResetPasswordEmail,a.noop,c),b.needLoginMessage=this._showDialogMessage}function A(b){b.onSubmitCallback=L.bind(this);var c=Z[l.SignUp]&&Z[l.SignUp].language||null;b.onSwitchDialogLinkClick=I.bind(this,l.Login,a.noop,c),b.needLoginMessage=this._showDialogMessage}function B(b){var c=Z[l.SignUp]&&Z[l.SignUp].language||null;b.onSwitchDialogLinkClick=I.bind(this,l.Login,a.noop,c),b.onSubmitCallback=M.bind(this)}function C(a,b,c){var e=d.getCompProps(a,b,null,c);return e.onSubmitCallback=O.bind(this),e.notClosable=!0,x.call(this,a,e)}function D(a){var b=a.language;switch(this.notifcationToDisplay){case l.SignUp:var c=Z[this.siteData.siteId].siteMember,d=c.details.email;a.title="",a.description=ea(b,"SMApply_Success1")+" "+ea(b,"SMApply_Success2").replace("{0}",d),a.buttonText=ea(b,"SMContainer_OK");break;case l.ResetPasswordEmail:a.title=ea(b,"SMResetPassMail_confirmation_title"),a.description=ea(b,"SMResetPassMail_confirmation_msg"),a.buttonText=ea(b,"SMContainer_OK");break;case l.ResetPasswordNewPassword:a.title=ea(b,"SMResetPass_Reset_Succ"),a.description="",a.buttonText=ea(b,"SMResetPass_Continue"),a.onButtonClick=I.bind(this,l.Login);break;case"siteowner":a.title=ea(b,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE"),a.description=ea(b,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE"),a.buttonText=ea(b,"SMContainer_OK")}}function E(a){a.onSubmitCallback=this.handlePasswordEntered.bind(this,this.nextPageInfo)}function F(a){a.onSubmitCallback=Q.bind(this)}function G(a){return i.SHA256.b64_sha256(a)}function H(a,b){var c=a.cookieName||n.SM_SESSION,d=a.sessionToken,e=a.rememberMe?a.expirationDate:0;j.setCookie(c,d,e,b.currentUrl.hostname,b.currentUrl.path,!1)}function I(a,b,c){b&&(this.dialogProcessSuccessCallback=b),c&&(Z[a]={language:c}),this.dialogToDisplay=a,this.aspectSiteApi.forceUpdate()}function J(a,b){this.notifcationToDisplay=a,this.dialogToDisplay=l.Notification,b&&(Z[l.Notification]={language:b}),this.aspectSiteApi.forceUpdate()}function K(a,b){delete this.dialogToDisplay;var c=j.getCookie(n.SV_SESSION),d=null;f.login(a,U.bind(this,b),b.setErrorMessageByCode,c,d)}function L(b,c){var d=this.siteData.rendererModel.clientSpecMap,e=a.find(d,{type:"sitemembers"}),g=e.collectionType;"Open"===g?f.register(b,V.bind(this,c),c.setErrorMessageByCode):"ApplyForMembership"===g&&f.apply(b,W.bind(this,c.props.language),c.setErrorMessageByCode)}function M(a,b){var c=this.siteData.currentUrl.full;f.sendForgotPasswordMail(a.email,c,J.bind(this,m.ResetPasswordEmail),b.setErrorMessageByCode)}function N(){delete this.siteData.currentUrl.query.forgotPasswordToken,J.call(this,m.ResetPasswordNewPassword)}function O(a,b){f.resetMemberPassword(a,N.bind(this),b.setErrorMessageByCode)}function P(b,c){return a.includes(b.rendererModel.passwordProtectedPages,c)}function Q(b,c){var d=this.siteData.getUserId();k.loginByGuid(d,b.password,function(b,d){d.success?(a.isFunction(this.dialogProcessSuccessCallback)&&(this.dialogProcessSuccessCallback(),this.dialogProcessSuccessCallback=null),S.call(this,c)):c.setGeneralErrorMessage()}.bind(this))}function R(b){if(a.has(this.siteData.currentUrl.query,"forgotPasswordToken"))return{isAllowed:!1,defaultDialog:l.ResetPasswordNewPassword};var c=this.siteData.getDataByQuery(b.pageId).pageSecurity;if(!c)return{isAllowed:!0,defaultDialog:null};if(!_.call(this,b.pageId)){if(c.passwordDigest)return{isAllowed:!1,defaultDialog:l.PasswordProtected,pageSecurity:c};if(P(this.siteData,b.pageId))return{isAllowed:!1,defaultDialog:l.PasswordProtected,pageSecurity:c}}return c.requireLogin&&!this.isLoggedIn()?{isAllowed:!1,defaultDialog:l.SignUp,pageSecurity:c}:{isAllowed:!0,defaultDialog:null}}function S(a,b){this.currentDialog=null,this.dialogToDisplay=null,a.performCloseDialog(function(){this._showDialogMessage=!1,b?this.nextPageInfo?this.aspectSiteApi.navigateToPage(this.nextPageInfo):this.aspectSiteApi.forceUpdate():this.nextPageInfo&&this.nextPageInfo.pageId===this.siteData.currentPageInfo.pageId?(T.call(this),this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()})):this.aspectSiteApi.forceUpdate()}.bind(this))}function T(){this.dontShowDialog=!0}function U(b,c){H(c.payload,this.siteData),X.call(this,function(){var d=Z[this.siteData.siteId].siteMember;d.details=c.payload.siteMemberDto,a.isFunction(this.dialogProcessSuccessCallback)&&(this.dialogProcessSuccessCallback(d.details),this.dialogProcessSuccessCallback=null),S.call(this,b,!0),this.aspectSiteApi.reportBI(g.SITE_MEMBER_LOGIN_SUCCESS,{userName:d.details.attribute&&d.details.attribute.name||d.details.email})}.bind(this))}function V(b,c){H(c.payload,this.siteData),X.call(this,function(){this.nextPageInfo&&this.aspectSiteApi.navigateToPage(this.nextPageInfo);var d=Z[this.siteData.siteId].siteMember;d.details=c.payload.siteMemberDto,
a.isFunction(this.dialogProcessSuccessCallback)&&(this.dialogProcessSuccessCallback(d.details),this.dialogProcessSuccessCallback=null),S.call(this,b,!0)}.bind(this))}function W(b,c){var d=Z[this.siteData.siteId].siteMember;d.details=c.payload,a.isFunction(this.dialogProcessSuccessCallback)&&(this.dialogProcessSuccessCallback(d.details),this.dialogProcessSuccessCallback=null),J.call(this,m.SignUp,b)}function X(a){var b=this.aspectSiteApi.getSiteAspect("dynamicClientSpecMap");b.reloadClientSpecMap(a,!0)}function Y(a,b,c){this._showDialogMessage=!0,this.nextPageInfo=a,c&&c.passwordDigest&&(this._passwordDigest=c.passwordDigest),this.dialogToDisplay=b,c&&(c.dialogLanguage&&(Z[b]={language:c.dialogLanguage}),Z[this.siteData.siteId].language="en")}function $(a){Z[a.siteId]={approvedPasswordPages:[],siteMember:{details:null},language:"en"}}function _(b){return a.includes(Z[this.siteData.siteId].approvedPasswordPages,b)}function aa(a){Z[this.siteData.siteId].approvedPasswordPages.push(a)}function ba(a,c,d,e){var f=this.siteData.serviceTopology.protectedPageResolverUrl,g={password:a,metaSiteId:this.siteData.getMetaSiteId(),siteId:this.siteData.siteId,pageId:c.pageId};b.ajaxLibrary.ajax({type:"POST",url:f,data:g,dataType:"json",cache:!1,contentType:"application/json",success:d,error:e})}function ca(a,b,c){var d=G(a);d===this._passwordDigest?b(this.nextPageInfo):c()}function da(a){this.aspectSiteApi=a,this.siteData=a.getSiteData(),this.dialogProcessSuccessCallback=null,$(this.siteData),f.initializeData(this.siteData)}function ea(a,b){return h[a]?h[a][b]:h.en[b]}var i=b.hashUtils,j=b.cookieUtils,k=b.wixUserApi,l={Login:"login",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword",Notification:"notification",Credits:"credits",PasswordProtected:"enterPassword",AdminLogin:"adminLogin"},m={SiteOwner:"siteowner",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword"},n={SV_SESSION:"svSession",SM_SESSION:"smSession",WIX_CLIENT:"wixClient"},Z={};da.prototype={dialogToDisplay:null,notifcationToDisplay:null,nextPageInfo:null,_passwordDigest:null,_showDialogMessage:!1,getComponentStructures:function(){switch(this.dialogToDisplay){case l.Login:return[r()];case l.SignUp:return[s()];case l.ResetPasswordEmail:return[t()];case l.ResetPasswordNewPassword:return[u()];case l.Notification:return[q()];case l.Credits:return[p()];case l.PasswordProtected:return[v()];case l.AdminLogin:return[v()];default:return null}},getReactComponents:function(b){if(this.dontShowDialog)return this.dontShowDialog=!1,null;var d,e,c=this.aspectSiteApi.getSiteAPI();switch(this.dialogToDisplay){case l.Login:d=z,e=r;break;case l.SignUp:d=A,e=s;break;case l.ResetPasswordEmail:d=B,e=t;break;case l.ResetPasswordNewPassword:var f=u();return C.call(this,f,c,b);case l.Notification:d=D.bind(this),e=q;break;case l.Credits:d=a.noop,e=p;break;case l.PasswordProtected:d=E,e=v;break;case l.AdminLogin:d=F,e=v}return this.currentDialog=e&&w.call(this,c,b,e,d),this.currentDialog},isLoggedIn:function(){return!!this.siteData.getSMToken()},showSignUpDialog:function(a,b){I.call(this,l.SignUp,a,b)},showCreditsDialog:function(){I.call(this,l.Credits)},showAdminLoginDialog:function(a){I.call(this,l.AdminLogin,a)},getMemberDetails:function(a){var b=Z[this.siteData.siteId].siteMember;return this.isLoggedIn()&&!b.details?(f.getMemberDetails(this.siteData.getSMToken(),function(c){b.details=c.payload,a&&a(b.details),this.aspectSiteApi.forceUpdate()}.bind(this),function(){}),null):(a&&a(b.details),b.details)},isPageAllowed:function(a){if(this.siteData.renderFlags.isPageProtectionEnabled){var b=R.call(this,a);return b.isAllowed}return!0},showDialogOnNextRender:function(a){var b=R.call(this,a);this.dialogToDisplay||b.isAllowed||(this.notClosable=a.pageId===this.siteData.currentPageInfo.pageId&&a.pageId===this.siteData.getMainPageId(),Y.call(this,a,b.defaultDialog,b.pageSecurity))},logout:function(a){var b=Z[this.siteData.siteId].siteMember;j.getCookie(n.WIX_CLIENT)&&b.details&&b.details.owner?J.call(this,m.SiteOwner,a):(j.deleteCookie(n.SM_SESSION,this.siteData.currentUrl.hostname,this.siteData.currentUrl.path),j.deleteCookie(n.SV_SESSION,this.siteData.currentUrl.hostname,this.siteData.currentUrl.path),X.call(this,function(){b.details=null,this.notifcationToDisplay=null,this.aspectSiteApi.forceUpdate()}.bind(this)))},forceCloseDialog:function(){T.call(this)},handlePasswordEntered:function(b,c,d){var e=function(){d.setErrorMessage("PasswordLogin_Wrong_Password")},f=function(a){S.call(this,d,!0),aa.call(this,a.pageId),this.aspectSiteApi.navigateToPage(a),this._passwordDigest=null}.bind(this);return a.isEmpty(c.password)?d.setErrorMessage("PasswordLogin_Wrong_Password"):void(P(this.siteData,b.pageId)?ba.call(this,c.password,b,function(a){b.jsonUrls=a.payload.urls,f(b)},e):ca.call(this,c.password,f,e))}},c.registerSiteAspect("siteMembers",da)}),define("core/components/siteAspects/windowFocusEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(a,b,c){"use strict";var d=c.stringUtils,e=["focus","blur"],f=function(a){this._aspectSiteAPI=a,this._registerToFocusEvents()};f.prototype={_registerToFocusEvents:function(){this._compsRegistry={},a.forEach(e,function(a){this._compsRegistry[a]={},this._aspectSiteAPI.registerToFocusEvents(a,this.propagateFocusEvent.bind(this,a))},this)},registerToFocusEvent:function(a,b){this._compsRegistry[a][b.props.id]=b.props.id},unregisterFromFocusEvent:function(a,b){delete this._compsRegistry[a][b.props.id]},propagateFocusEvent:function(b){var f,c=this._compsRegistry[b],e="on"+d.capitalize(b);a.forEach(c,function(a){f=this._aspectSiteAPI.getComponentById(a),f?f[e]&&f[e]():delete this._compsRegistry[b][a]},this)}},b.registerSiteAspect("windowFocusEvents",f)}),define("core/components/siteAspects/windowScrollEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a,this._registeredCompIds={},this._aspectSiteAPI.registerToScroll(this.propagateScrollEvent.bind(this))}c.prototype={registerToScroll:function(a){this._registeredCompIds[a.props.id]=a.props.id},unregisterToScroll:function(a){delete this._registeredCompIds[a.props.id]},propagateScrollEvent:function(){var b={x:window.pageXOffset||document.body.scrollLeft,y:window.pageYOffset||document.body.scrollTop};a.forEach(this._registeredCompIds,function(a){var c=this._aspectSiteAPI.getComponentById(a);c?c.onScroll&&c.onScroll(b):delete this._registeredCompIds[a]},this)},getScrollPosition:function(){return{x:window.pageXOffset||document.body.scrollLeft,y:window.pageYOffset||document.body.scrollTop}}},b.registerSiteAspect("windowScrollEvent",c)}),define("core/components/siteAspects/windowResizeEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a,this._registeredCompIds={},this._aspectSiteAPI.registerToResize(this.propagateResizeEvent.bind(this))}c.prototype={registerToResize:function(a){this._registeredCompIds[a.props.id]=a.props.id},unregisterToResize:function(a){delete this._registeredCompIds[a.props.id]},propagateResizeEvent:function(){a.forEach(this._registeredCompIds,function(a){var b=this._aspectSiteAPI.getComponentById(a);b?b.onResize&&b.onResize():delete this._registeredCompIds[a]},this)}},b.registerSiteAspect("windowResizeEvent",c)}),define("core/components/siteAspects/windowKeyboardEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function d(a){this._aspectSiteAPI=a,this._aspectSiteAPI.registerToKeyDown(this.propagateKeyboardEvent.bind(this)),this._registeredCompIds={Escape:[],ArrowRight:[],ArrowLeft:[]}}var c={39:"ArrowRight",37:"ArrowLeft",27:"Escape"};d.prototype={registerToEscapeKey:function(a){this._registeredCompIds.Escape.push(a.props.id)},registerToArrowRightKey:function(a){this._registeredCompIds.ArrowRight.push(a.props.id)},registerToArrowLeftKey:function(a){this._registeredCompIds.ArrowLeft.push(a.props.id)},unRegisterKeys:function(b){a.forEach(this._registeredCompIds,function(c,d){this._registeredCompIds[d]=a.without(this._registeredCompIds[d],b.props.id)},this)},propagateKeyboardEvent:function(b){var d=c[b.keyCode||b.which];if(!a.isEmpty(this._registeredCompIds[d])){var e=a.last(this._registeredCompIds[d]),f=this._aspectSiteAPI.getComponentById(e),g="on"+d+"Key";f?f[g]&&(b.preventDefault(),f[g]()):this._registeredCompIds[d]=a.without(this._registeredCompIds[d],e)}}},b.registerSiteAspect("windowKeyboardEvent",d)}),define("core/components/siteAspects/MobileActionsMenuAspect",["core/core/siteAspectsRegistry","core/core/componentPropsBuilder","core/siteRender/compFactory"],function(a,b,c){"use strict";function d(a){if(!a.isMobileDevice()||!a.renderFlags.renderMobileActionMenu)return null;var b=a.getSiteMetaData();return b&&b.quickActions&&b.quickActions.configuration.quickActionsMenuEnabled?{id:"MOBILE_ACTIONS_MENU",skin:"wysiwyg.viewer.skins.mobile.MobileActionsMenuSkin",componentType:"wysiwyg.viewer.components.MobileActionsMenu",styleId:"mobileActionsMenu",layout:{position:"static"}}:null}function e(a){this._siteAspectsSiteAPI=a}e.prototype={getReactComponents:function(a){var e=this._siteAspectsSiteAPI.getSiteData(),f=d(e);if(!f)return null;var g=b.getCompProps(f,this._siteAspectsSiteAPI.getSiteAPI(),null,a);g.userColorScheme=e.rendererModel.siteMetaData.quickActions.colorScheme;var h=c.getCompClass(f.componentType);return[h(g)]},getComponentStructures:function(){var a=d(this._siteAspectsSiteAPI.getSiteData());return a?[a]:null}},a.registerSiteAspect("mobileActionsMenu",e)}),define("core/components/siteAspects/addComponentAspect",["core/core/siteAspectsRegistry","lodash","core/core/componentPropsBuilder","core/siteRender/compFactory"],function(a,b,c,d){"use strict";function e(a){this._aspectSiteAPI=a,this._componentsToRender={}}e.prototype={addComponent:function(a,b,c){this._componentsToRender[a]={structure:b,props:c},this._aspectSiteAPI.forceUpdate()},deleteComponent:function(a){delete this._componentsToRender[a],this._aspectSiteAPI.forceUpdate()},getComponentStructures:function(){return b.pluck(this._componentsToRender,"structure")},getReactComponents:function(a){return b.map(this._componentsToRender,function(e){var f=c.getCompProps(e.structure,this._aspectSiteAPI.getSiteAPI(),null,a);b.assign(f,e.props);var g=d.getCompClass(e.structure.componentType);return g(f)},this)}},a.registerSiteAspect("addComponent",e)}),define("core/components/siteAspects/PinterestWidgetPostMessageAspect",["core/core/siteAspectsRegistry"],function(a){"use strict";var b=function(a){a.registerToMessage(this.handlePostMessage.bind(this)),this.siteAPI=a,this.dimensions={},this.shouldShowError={}};return b.prototype={handlePostMessage:function(a){var b;try{if(b=JSON.parse(a.data),"pinterest"!==b.type)return;if(b.showError)return this.shouldShowError[b.compId]="error",void this.siteAPI.forceUpdate();this.shouldShowError[b.compId]="noError",this.dimensions[b.compId]={height:b.height,width:b.width},this.siteAPI.forceUpdate()}catch(c){return}},getIframeDimensions:function(a){return this.dimensions[a]},shouldPresentErrorMessage:function(a){return this.shouldShowError[a]}},a.registerSiteAspect("PinterestWidgetPostMessageAspect",b),b}),define("core/components/siteAspects/AudioAspect",["utils","core/core/siteAspectsRegistry"],function(a,b){"use strict";function g(){d=c}function h(b){var c=b.siteAPI.getSiteData().santaBase;return c+(a.stringUtils.endsWith(c,"/")?"":"/")+"js/vendor/soundmanager2/"}function i(a){k!==j&&(a.soundManagerReady=!1,a.soundManagerOnResetup=!0,a.siteAPI.forceUpdate(),k=j,j(a))}function j(a){var b={url:h(a),flashVersion:9,preferFlash:!0,useHTML5Audio:!1,forceUseGlobalHTML5Audio:!1,html5PollingInterval:100,onready:function(){a.soundManagerReady=!0,a.soundManagerOnResetup=!1,a.siteAPI.forceUpdate()}};a.soundManager.destruct(),a.soundManager.reset().setup(b),a.soundManager.beginDelayedInit()}function n(a){this.siteAPI=a,this.nowPlayingComp=null,this.soundManagerReady=!1,this.soundManagerOnResetup=!1,this.soundManager=null,this.shouldForceHTML5Audio=m(a.getSiteData())}var c=10,d=c,e=1.5,f=1e4,k=function(a){var b={url:h(a),flashVersion:9,useHTML5Audio:!0,preferFlash:!1,html5PollingInterval:100,onready:function(){a.soundManagerReady=!0}};a.soundManager.setup(b),setTimeout(function(){l(a)},d)},l=function(a){null===a.soundManager?require(["SoundManager"],function(b){a.soundManager=b.getInstance(),l(a)}):a.soundManagerReady?(a.siteAPI.forceUpdate(),g()):f>d?(k(a),d*=e):(g(),console.log("Failed to setup SoundManager."))},m=function(a){var b=a.browser;return b&&b.safari===!0};return n.prototype={loadSoundManagerAPI:function(){l(this)},isSoundManagerReady:function(){return this.soundManagerReady},isSoundManagerOnResetup:function(){return this.soundManagerOnResetup},onHTML5ErrorTryToReloadWithFlash:function(){i(this)},createAudioObj:function(a){return this.soundManagerReady?(a.id&&this.soundManager.getSoundById(a.id)&&this.soundManager.destroySound(a.id),this.soundManager.createSound(a)):(this.loadSoundManagerAPI(),!1)},isCompPlaying:function(a){return this.nowPlayingComp===a.props.id},updatePlayingComp:function(a){this.soundManagerReady||this.loadSoundManagerAPI(),this.nowPlayingComp=a.props.id,this.siteAPI.forceUpdate()},updatePausingComp:function(){this.nowPlayingComp="",this.soundManagerReady&&this.siteAPI.forceUpdate()}},b.registerSiteAspect("AudioAspect",n),n}),define("core/components/actionsAspectActions/triggerTypesConsts",[],function(){"use strict";return{DID_LAYOUT:"didLayout",SCROLL:"scroll",RESIZE:"resize",PAGE_CHANGED:"pageChanged",PAGE_RELOADED:"pageReloaded",SITE_READY:"siteReady",TRANSITION_ENDED:"transitionEnded",MODE_CHANGED:"modeChanged"}}),define("core/components/actionsAspectActions/scrubAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts","reactDOM"],function(a,b,c,d,e){"use strict";function f(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._liveSequenceIds=[],this._currentPageBehaviorsByIds={},this._currentPageId=null,this._alwaysInViewportList=[],this.throttledSetSequenceProgress=null}return f.prototype=a.create(Object.prototype,{constructor:f,ACTION_TRIGGERS:[d.PAGE_CHANGED,d.PAGE_RELOADED,d.SCROLL,d.RESIZE],ACTION_NAME:"scrub",_currentScroll:{x:0,y:0},shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice(),d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled||(this.initiateBehaviors(),this._tickerCallback=this._executeActionOnTick.bind(this),b.addTickerEvent(this._tickerCallback),this.throttledSetSequenceProgress=a.throttle(this.setSequenceProgress,160,{trailing:!1}),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,b.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this.revertHideElementsByAnimationType(this._currentPageBehaviorsByIds),this.throttledSetSequenceProgress.cancel(),this._currentPageBehaviorsByIds={},this._isEnabled=!1)},executeAction:function(){a.isEmpty(this._currentPageBehaviorsByIds)||this.setAnimationsProgress()},getMaxScroll:function(){var a=this._aspectSiteAPI,b=a.getSiteData().measureMap,c=this._siteData.renderFlags,d=b.height.screen,e=b.height.SITE_STRUCTURE+(b.siteMarginBottom||0)+(c.extraSiteHeight||0);return e-d},setSequenceProgress:function(a,b,c){var d=c.getSequence(a.sequenceId);d?d.progress(b):console.error("sequence id %s returned no sequence",a.sequenceId)},setAnimationsProgress:function(){var b=Math.max(this._currentScroll.y,0),c=this.getMaxScroll(),d=0;c>0&&(d=b/c),a.forEach(this._liveSequenceIds,function(a){this.isComponentInViewport(a.compId,a.parentId)||this.throttledSetSequenceProgress(a,d,this.getComponentParent(a.parentId)),this.setSequenceProgress(a,d,this.getComponentParent(a.parentId))},this)},initiateBehaviors:function(){this._currentPageBehaviorsByIds=this.getCurrentPageBehaviors(this._behaviors,this._aspectSiteAPI.getCurrentPageId()),this.hideElementsByAnimationType(this._currentPageBehaviorsByIds)},getCurrentPageBehaviors:function(b,c){var d=a.filter(b,function(a){return a.action===this.ACTION_NAME&&(a.pageId===c||"masterPage"===a.pageId)},this);return a.indexBy(d,"sourceId")},getComponentParent:function(a){var b;return b="masterPage"===a?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()},hideElementsByAnimationType:function(c){a.forEach(c,function(a,c){var d=this.getComponentParent(a.pageId);if(b.getProperties(a.name).hideOnStart){var f=e.findDOMNode(d.refs[c]);f.style.visibility="hidden"}},this)},revertHideElementsByAnimationType:function(c){a.forEach(c,function(a,c){var d=this.getComponentParent(a.pageId);if(b.getProperties(a.name).hideOnStart){var f=e.findDOMNode(d.refs[c]);f.style.visibility=""}},this)},isComponentInViewport:function(b,d){return a.includes(this._alwaysInViewportList,d)?!0:c.viewportUtils.isInViewport(this._aspectSiteAPI,this._currentScroll,b)},getSequenceParams:function(){return{suppressReactRendering:!1,forgetSequenceOnComplete:!1,paused:!0}},createSequences:function(){this._liveSequenceIds=a.map(this._currentPageBehaviorsByIds,function(a){var b=this.getComponentParent(a.pageId),c=b.sequence();return c.add(a.targetId,a.name,a.duration,a.delay,a.params),{compId:a.targetId,parentId:a.pageId,sequenceId:c.execute(this.getSequenceParams())}},this)},handleTrigger:function(a){if(this._isEnabled){var b=this.getMaxScroll();b!==this.lastMaxScroll&&(this.lastMaxScroll=b,a=d.RESIZE),this._currentScroll=this._aspectSiteAPI.getSiteScroll();var c=this._aspectSiteAPI.getCurrentPageId();switch(a){case d.PAGE_RELOADED:case d.PAGE_CHANGED:case d.RESIZE:this._currentPageId=c,this.clearAllAndReload(),this._animateOnNextTick=!0;break;case d.SCROLL:this._animateOnNextTick=!0}}},handleBehaviorsUpdate:function(a){this._behaviors=a},_executeActionOnTick:function(){this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(b){b=a.isNumber(b)?b:1,a.forEach(this._liveSequenceIds,function(a){var c=this.getComponentParent(a.parentId);c.stopSequence(a.sequenceId,b)},this),this._liveSequenceIds=[]},clearAllAndReload:function(a){this.stopAndClearAnimations(a),this.initiateBehaviors(),this.createSequences()}}),f}),define("core/components/actionsAspectActions/bgScrubAction",["lodash","animations","utils","core/components/actionsAspectActions/scrubAction","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d,e){"use strict";function f(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._liveSequenceIds=[],this._currentPageBehaviorsByIds={},this._currentPageId=null,this._behaviorsUpdated=!1,this.throttledSetSequenceProgress=null,this._alwaysInViewportList=["siteBackground"]}return f.prototype=a.create(d.prototype,{constructor:f,ACTION_TRIGGERS:[e.PAGE_CHANGED,e.PAGE_RELOADED,e.TRANSITION_ENDED,e.SCROLL,e.RESIZE],ACTION_NAME:"bgScrub",getComponentParent:function(a){var b;return b="masterPage"===a?this._aspectSiteAPI.getMasterPage():"siteBackground"===a?this._aspectSiteAPI.getComponentById("SITE_BACKGROUND"):this._aspectSiteAPI.getCurrentPage()},getCurrentPageBehaviors:function(b,c){var d=a.filter(b,function(a){return a.action===this.ACTION_NAME&&(a.pageId===c||"masterPage"===a.pageId||"siteBackground"===a.pageId)},this);return a.indexBy(d,"sourceId")},getAcceptableRefsFromBehavior:function(a){var c=b.getProperties(a);return{background:c.acceptableBackgroundRef,media:c.acceptableMediaRefs}},createSequences:function(){var b=this.getMaxScroll();this._liveSequenceIds=a.map(this._currentPageBehaviorsByIds,function(c){var d=this.getAcceptableRefsFromBehavior(c.name),e=d.media,f=d.background,g=this.getComponentParent(c.pageId),h=g.sequence(),i=c.params||{},j=g.refs[c.targetId],k=[],l=[];return a.forEach(e,function(a){j.refs&&j.refs[a]&&k.push([c.targetId,a])}),a.isEmpty(k)&&k.push(c.targetId),j.refs&&j.refs[f]&&(l=[[c.targetId,f]],h.add(l,c.name,c.duration,c.delay,a.assign({maxScroll:b,part:"background"},i),0)),h.add(k,c.name,c.duration,c.delay,a.assign({maxScroll:b,part:"media"},i),0),{paths:k.concat(l),compId:c.targetId,parentId:c.pageId,sequenceId:h.execute(this.getSequenceParams())}},this)},handleTrigger:function(a){if(this._isEnabled){var b=this.getMaxScroll();b!==this.lastMaxScroll&&(this.lastMaxScroll=b,a=e.RESIZE),this._currentScroll=this._aspectSiteAPI.getSiteScroll();var c=this._aspectSiteAPI.getCurrentPageId();switch(a){case e.PAGE_CHANGED:case e.TRANSITION_ENDED:case e.RESIZE:this._currentPageId=c,this.clearAllAndReload(0),this._animateOnNextTick=!0,this._behaviorsUpdated=!1;break;case e.PAGE_RELOADED:case e.SCROLL:this._behaviorsUpdated&&(this.clearAllAndReload(0),this._behaviorsUpdated=!1),this._animateOnNextTick=!0}}},stopAndClearAnimations:function(b){b=a.isNumber(b)?b:1,a.forEach(this._liveSequenceIds,function(a){var c=this.getComponentParent(a.parentId);c.getSequence(a.sequenceId)&&(c.stopSequence(a.sequenceId,b),c.animate(a.paths,"BaseClear",0,0,{props:"transform"}))},this),this._liveSequenceIds=[]},handleBehaviorsUpdate:function(a){this._behaviors=a,this._behaviorsUpdated=!0}}),f}),define("core/components/actionsAspectActions/screenInAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts","reactDOM"],function(a,b,c,d,e){"use strict";function h(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._isEnabled=!1,this._liveSequenceIds=[],this._animateOnNextTick=!1,this._currentPageBehaviorsByIds={},this._currentPageId=null,this._delayActionByTransitionDuration=0,this._playOnceList=[],this._currentScroll={x:0,y:0}}var f=.2,g=.15;return h.prototype=a.create(Object.prototype,{constructor:h,ACTION_TRIGGERS:[d.PAGE_CHANGED,d.PAGE_RELOADED,d.SCROLL,d.RESIZE],ACTION_NAME:"screenIn",shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice(),d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled||(this.initiateBehaviors(),this._tickerCallback=this._executeActionOnTick.bind(this),b.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,b.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this.revertHideElementsByAnimationType(this._currentPageBehaviorsByIds),this._currentPageBehaviorsByIds={},this._playOnceList=[],this._currentPageId=null,this._isEnabled=!1)},executeAction:function(){a.isEmpty(this._currentPageBehaviorsByIds)||(this._liveSequenceIds=this._liveSequenceIds.concat(this.playPageAnimations()))},playPageAnimations:function(){var b={},c={},d=[];return a.forEach(this._currentPageBehaviorsByIds,function(a){if(!c[a.pageId]){var d=this.getComponentParent(a.pageId);c[a.pageId]=d.sequence(),b[a.pageId]=[]}b[a.pageId].push(this.addAnimationToSequence(a,c))},this),a.forEach(c,function(c,e){c.hasAnimations()&&(b[e]=a.compact(b[e]),d.push({parentId:e,sequenceId:c.getId()}),c.execute(),this._playOnceList=this._playOnceList.concat(a.filter(b[e],function(a){return this._currentPageBehaviorsByIds[a].playOnce||"masterPage"===e},this)),this._currentPageBehaviorsByIds=a.omit(this._currentPageBehaviorsByIds,function(c,d){return a.includes(b[e],d)}))},this),d},initiateBehaviors:function(){this._currentPageBehaviorsByIds=this.getCurrentPageBehaviors(this._behaviors,this._aspectSiteAPI.getCurrentPageId(),this._playOnceList),this.hideElementsByAnimationType(this._currentPageBehaviorsByIds)},getCurrentPageBehaviors:function(b,c,d){var e=a.filter(b,function(b){return!a.includes(d,b.sourceId)&&b.action===this.ACTION_NAME&&(b.pageId===c||"masterPage"===b.pageId)},this);return a.indexBy(e,"sourceId")},getComponentParent:function(a){var b;return b="masterPage"===a?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()},hideElementsByAnimationType:function(c){a.forEach(c,function(a,c){var d=this.getComponentParent(a.pageId);if(b.getProperties(a.name).hideOnStart){var f=e.findDOMNode(d.refs[c]);f.style.visibility="hidden"}},this)},revertHideElementsByAnimationType:function(c){a.forEach(c,function(a,c){var d=this.getComponentParent(a.pageId);if(b.getProperties(a.name).hideOnStart){var f=e.findDOMNode(d.refs[c]);f.style.visibility=""}},this)},isComponentInViewport:function(a){return c.viewportUtils.isInViewport(this._aspectSiteAPI,this._currentScroll,a,g)},addAnimationToSequence:function(b,c){var d,e,f,g,h=c[b.pageId];return this.isChildOfFixedFooter(b.pageId,b.targetId)||this.isComponentInViewport(b.targetId)?(g=this.getComponentParent(b.pageId),f=g.refs[b.targetId].props.structure,e=a.get(f,"layout.rotationInDegrees"),d="clip,opacity"+(e?"":",transform"),h.add(b.targetId,b.name,b.duration,b.delay,b.params,0),h.add(b.targetId,"BaseClear",0,0,{props:d,immediateRender:!1}),b.targetId):null},isChildOfFixedFooter:function(a,b){var c=!1,d=this._aspectSiteAPI.getSiteData().measureMap.custom.SITE_FOOTER;if("masterPage"===a&&d&&d.isFixedPosition){var e=this._aspectSiteAPI.getMasterPage().refs.SITE_FOOTER;c=this.isDescendantOf(e.props.structure,b)}return c},isDescendantOf:function(b,c){return b.components?a.some(b.components,function(a){return a.id===c?!0:this.isDescendantOf(a,c)},this):!1},handleTrigger:function(b){if(this._isEnabled){var c=this._aspectSiteAPI.getCurrentPageId(),e=!this._currentPageId||this._currentPageId===c;switch(this._currentScroll=this._aspectSiteAPI.getSiteScroll(),b){case d.PAGE_RELOADED:case d.PAGE_CHANGED:this._currentPageId=c,this.initiateBehaviors();var g=1e3*Math.max(this._delayActionByTransitionDuration-f,0);a.delay(function(){this._animateOnNextTick=!0,this._delayActionByTransitionDuration=0}.bind(this),g);break;case d.SCROLL:case d.RESIZE:e&&0===this._delayActionByTransitionDuration&&(this._animateOnNextTick=!0)}}},registerPageTransitionDuration:function(a){this._delayActionByTransitionDuration=a},handleBehaviorsUpdate:function(a){this._behaviors=a},_executeActionOnTick:function(){this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){a.forEach(this._liveSequenceIds,function(a){var b=this.getComponentParent(a.parentId);b.stopSequence(a.sequenceId,1)},this),this._liveSequenceIds=[]}}),h}),define("core/components/actionsAspectActions/modeChangeAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts","reactDOM"],function(a,b,c,d,e){"use strict";function f(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._isEnabled=!1,this._liveSequenceIds=[],this._animateOnNextTick=!1,this._behaviorsById={},this._currentPageId=null,this._delayActionByTransitionDuration=0,this._playOnceList=[]}return f.prototype=a.create(Object.prototype,{constructor:f,ACTION_TRIGGERS:[d.MODE_CHANGED],ACTION_NAME:"modeChange",shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice();return a&&!b&&!c},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),b.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,b.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this.revertHideElementsByAnimationType(this._behaviorsById),this._behaviorsById={},this._playOnceList=[],this._currentPageId=null,this._isEnabled=!1)},_executeActionOnTick:function(){this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){a.forEach(this._liveSequenceIds,function(a){var b=this.getComponentParent(a.parentId);b.stopSequence(a.sequenceId,1)},this),this._liveSequenceIds=[]},executeAction:function(){return a.isEmpty(this._behaviorsById)?void(this.callback&&this.callback()):void(this._liveSequenceIds=this._liveSequenceIds.concat(this.playAnimations()))},playAnimations:function(){function g(){e--,0===e&&f.callback&&f.callback()}var b={},c={},d=[],e=0,f=this;return a.forEach(this._behaviorsById,function(a){if(!c[a.pageId]){var d=this.getComponentParent(a.pageId);c[a.pageId]=d.sequence(),b[a.pageId]=[]}b[a.pageId].push(this.addAnimationToSequence(a,c))},this),a.isEmpty(c)&&this.callback&&this.callback(),a.forEach(c,function(c,f){c.hasAnimations()&&(e++,b[f]=a.compact(b[f]),d.push({parentId:f,sequenceId:c.getId()}),c.onCompleteAll(g),c.execute(),this._playOnceList=this._playOnceList.concat(a.filter(b[f],function(a){return this._behaviorsById[a].playOnce||"masterPage"===f},this)),this._behaviorsById=a.omit(this._behaviorsById,function(c,d){return a.includes(b[f],d)}))},this),d},getComponentParent:function(a){var b;return b="masterPage"===a?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()},addAnimationToSequence:function(b,c){var d,e,f,g,h=c[b.pageId];return g=this.getComponentParent(b.pageId),f=g.refs[b.targetId].props.structure,e=a.get(f,"layout.rotationInDegrees"),d="clip,opacity"+(e?"":",transform"),h.add(b.targetId,b.name,b.duration,b.delay,b.params,0),h.add(b.targetId,"BaseClear",0,0,{props:d,immediateRender:!1}),b.targetId},hideElementsByAnimationType:function(c){a.forEach(c,function(a,c){var d=this.getComponentParent(a.pageId);if(b.getProperties(a.name).hideOnStart){var f=e.findDOMNode(d.refs[c]);f.style.visibility="hidden"}},this)},revertHideElementsByAnimationType:function(c){a.forEach(c,function(a,c){var d=this.getComponentParent(a.pageId);if(b.getProperties(a.name).hideOnStart){var f=e.findDOMNode(d.refs[c]);f.style.visibility=""}},this)},getCurrentBehaviors:function(b,c,d){var e=a.filter(b,function(b){return!a.includes(d,b.sourceId)&&b.action===this.ACTION_NAME&&(b.pageId===c||"masterPage"===b.pageId)},this);return a.indexBy(e,"sourceId")},initiateBehaviors:function(){this._behaviorsById=this.getCurrentBehaviors(this._behaviors,this._aspectSiteAPI.getCurrentPageId(),this._playOnceList),this.hideElementsByAnimationType(this._behaviorsById)},handleBehaviorsUpdate:function(b){this._behaviors=b,this._playOnceList=a.intersection(this._playOnceList,this._behaviors)},handleTrigger:function(){this._isEnabled&&this._aspectSiteAPI.forceUpdate()}}),f}),define("core/components/actionsAspectActions/pageTransitionAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d){"use strict";function e(a,b){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=b,this._isEnabled=!1,this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null}return a.assign(e.prototype,{ACTION_TRIGGERS:[d.PAGE_CHANGED],ACTION_NAME:"pageTransition",shouldEnable:function(){var a="undefined"!=typeof window,b=this._siteData.isTabletDevice(),c=this._siteData.isMobileDevice(),d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled=!0},disableAction:function(){this._isEnabled=!1},executeAction:function(){this.executeTransitions(this._nextPageTransition,this._nextPageBGTransition,this._nextPageInitialScrollData),this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null},handleTrigger:function(b){this._isEnabled||a.isEmpty(this._nextPageTransition)||(this._nextPageTransition.duration=0,this._nextPageTransition.transitionName="NoTransition"),b===d.PAGE_CHANGED&&this.executeAction()},handleBehaviorsUpdate:function(a){this._behaviors=a},registerNextPageTransition:function(a,b,c,d,e,f,g,h){this._nextPageTransition={comp:a,previousRef:b,currentRef:c,transitionName:d,duration:e,delay:f,params:g,callbacks:h}},registerNextBGPageTransition:function(a,b,c,d){this._nextPageBGTransition={comp:a,previousRef:b,
currentRef:c,callbacks:d}},registerNextAnchorScroll:function(a){this._nextPageInitialScrollData=a},getNormalizedTransitionDuration:function(a,b){b=b||{};var c=1.2,d=a;return b.width?d=a*b.width/b.siteWidth:b.height&&(d=a*(Math.max(b.height,b.screenHeight)/b.screenHeight)),Math.min(d,c)},executeTransitions:function(d,e,f){var j,k,g=this._aspectSiteAPI,h="function"==typeof d.params?d.params():d.params,i=this.getNormalizedTransitionDuration(d.duration||0,h);if(!a.isEmpty(d)){j=d.comp.sequence(),k=d.callbacks||{},k.onStart&&j.onStartAll(k.onStart),k.onInterrupt&&j.onInterruptAll(k.onInterrupt),k.onComplete&&j.onCompleteAll(k.onComplete);var l={sourceRefs:d.previousRef,destRefs:d.currentRef};j.add(l,d.transitionName,i,d.delay,h).add([d.previousRef,d.currentRef],"BaseClear",0,0,{props:"opacity,x,y",immediateRender:!1}).execute()}a.isEmpty(e)||e.comp.transition(e.previousRef,e.currentRef,d.transitionName,i,d.delay,h,e.callbacks);var m=g.getSiteData(),n=c.anchorUtils.calcAnchorScrollToPosition(f,m);b.animate("BaseScroll",g.getSiteContainer(),i,d.delay,{x:n.x||0,y:n.y||0})}}),e}),define("core/components/siteAspects/actionsAspect",["lodash","core/core/siteAspectsRegistry","core/components/actionsAspectActions/scrubAction","core/components/actionsAspectActions/bgScrubAction","core/components/actionsAspectActions/screenInAction","core/components/actionsAspectActions/modeChangeAction","core/components/actionsAspectActions/pageTransitionAction","core/components/actionsAspectActions/triggerTypesConsts","experiment"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){this._aspectSiteAPI=a,this._siteData=a.getSiteData(),this._behaviors=[],this._pageTransitionComplete=[],this._actions={},this._previouslyRegisteredPages=[],this._didFirstLayout=!1,this._didPageChange=!1,this.registerAction(d),this.registerAction(e),this.registerAction(g),i.isOpen("sv_hoverBox")&&this.registerAction(f),this.enableAction("bgScrub"),this.enableAction("screenIn"),this.enableAction("pageTransition"),i.isOpen("sv_hoverBox")&&this.enableAction("modeChange"),this._registerTriggers()}j.prototype.previewAnimation=function(a,b,c,d){var e,f,g;return e="masterPage"===b?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage(),e?(f=e.sequence(),g={props:"clip,opacity,transform,transform-origin",immediateRender:!1},f.add(a,c.name,c.duration,c.delay,c.params),f.add(a,"BaseClear",0,0,g),d&&f.onCompleteAll(d),f.execute()):void 0},j.prototype.willUnmount=function(){a.forEach(this._actions,function(a){a.disableAction()},this)},j.prototype.stopPreviewAnimation=function(a){var b=this._aspectSiteAPI.getMasterPage(),c=this._aspectSiteAPI.getCurrentPage();c.stopSequence(a,1),b.stopSequence(a,1)},j.prototype.enableAction=function(a){this._actions[a]&&this._actions[a].shouldEnable()&&this._actions[a].enableAction()},j.prototype.disableAction=function(a){this._actions[a]&&this._actions[a].disableAction()},j.prototype.executeAction=function(a,b){this._actions[a]&&this._actions[a].executeAction(b)},j.prototype.isPageRegistered=function(b){return a.includes(this._previouslyRegisteredPages,b)},j.prototype.setPageAsRegistered=function(a){this.isPageRegistered(a)||this._previouslyRegisteredPages.push(a)},j.prototype.registerBehaviors=function(b,c,d){d=a.isString(d)?JSON.parse(d):d,d=a.map(d,function(d){return a.assign(d,{pageId:c,sourceId:b,targetId:d&&d.targetId||b})}),this.unRegisterBehaviors(b,d,!1),this._behaviors=this._behaviors.concat(d),this._propagateBehaviorsUpdate(this._behaviors)},j.prototype.unRegisterBehaviors=function(b,c,d){d=d!==!1,a.forEach(c,function(c){this._behaviors=a.reject(this._behaviors,{sourceId:b,action:c&&c.action,name:c&&c.name})},this),d&&this._propagateBehaviorsUpdate(this._behaviors)},j.prototype.resetBehaviorsRegistration=function(){this._previouslyRegisteredPages=[],this._behaviors=[],this._propagateBehaviorsUpdate(this._behaviors)},j.prototype.registerNextPageTransition=function(a,b,c,d,e,f,g,h){this._actions.pageTransition.registerNextPageTransition(a,b,c,d,e,f,g,h),this._actions.screenIn.registerPageTransitionDuration(e)},j.prototype.registerPageTransitionComplete=function(b){a.isFunction(b)&&this._pageTransitionComplete.push(b)},j.prototype.handlePageTransitionComplete=function(b,c){a.forEach(this._pageTransitionComplete,function(a){a(b,c)}),this._pageTransitionComplete=[]},j.prototype.registerNextBGPageTransition=function(a,b,c,d){this._actions.pageTransition.registerNextBGPageTransition(a,b,c,d)},j.prototype.registerNextAnchorScroll=function(a){this._actions.pageTransition.registerNextAnchorScroll(a)},j.prototype.registerAction=function(a){var b=new a(this._aspectSiteAPI);if(this._actions[b.ACTION_NAME])throw new Error("Action "+b.ACTION_NAME+" already registered");if(!b.ACTION_NAME)throw new Error("Action missing it's ACTION_NAME parameter, cannot register it");this._actions[b.ACTION_NAME]=b},j.prototype._propagateTrigger=function(b){a.forEach(this._actions,function(c){a.includes(c.ACTION_TRIGGERS,b)&&c.handleTrigger(b)})},j.prototype._propagatePageChangeTriggerAfterLayout=function(){if(this._didPageChange||!this._didFirstLayout){var a=this._aspectSiteAPI.getPageItemInfo(),b=this._aspectSiteAPI.getSiteAspect("siteMembers").isPageAllowed(a);b&&this._propagateTrigger(h.PAGE_CHANGED)}this._didPageChange=!1},j.prototype._enablePageChangeTransitionsAfterLayout=function(){this._didFirstLayout?this._didPageChange=!0:this._didFirstLayout=!0},j.prototype.reloadPageAnimations=function(){this._propagateTrigger(h.PAGE_RELOADED)},j.prototype._propagateBehaviorsUpdate=function(b){a.forEach(this._actions,function(c){c.handleBehaviorsUpdate(a.cloneDeep(b))})},j.prototype._registerTriggers=function(){this._aspectSiteAPI.registerToSiteReady(this._propagateTrigger.bind(this,h.SITE_READY)),this.registerPageTransitionComplete(this._propagateTrigger.bind(this,h.TRANSITION_ENDED)),this._aspectSiteAPI.registerToPageChange(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToSiteReady(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToDidLayout(this._propagatePageChangeTriggerAfterLayout.bind(this)),this._aspectSiteAPI.registerToScroll(this._propagateTrigger.bind(this,h.SCROLL)),this._aspectSiteAPI.registerToResize(this._propagateTrigger.bind(this,h.RESIZE)),this._aspectSiteAPI.registerToWillUnmount(this.willUnmount.bind(this)),i.isOpen("sv_hoverBox")&&this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,h.MODE_CHANGED))},b.registerSiteAspect("actionsAspect",j)}),define("core/components/siteAspects/WidgetAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";function d(a){this.siteAPI=a,this.widgetHandlers={},this.widgetInstances={}}function e(b,c){return a(b).map(function(b,c){var d=a(b.components).values().flatten().value();return{widgetId:c,handlerId:b.handlerId,compIds:d}}).filter(function(b){return a.includes(b.compIds,c)}).groupBy("handlerId").mapValues(function(b){return a.map(b,"widgetId")}).value()}return d.prototype.registerWidgetHandler=function(a,b){this.widgetHandlers[a]=b},d.prototype.getWidgetHandler=function(a){return this.widgetHandlers[a]},d.prototype.registerWidgetInstance=function(b,c){a.set(this.widgetInstances,[b,"handlerId"],c)},d.prototype.getWidgetInstanceHandler=function(b){var c=a.get(this.widgetInstances,[b,"handlerId"]);return this.getWidgetHandler(c)},d.prototype.updateWidgetComponents=function(b,c,d,e){a.set(this.widgetInstances,[b,"components",d],e)},d.prototype.getWidgetComponents=function(c,d){var e=a.get(this.widgetInstances,[c,"components",d],[]);if(d===b.siteConstants.MASTER_PAGE_ID)return e;var f=a.get(this.widgetInstances,[c,"components",b.siteConstants.MASTER_PAGE_ID],[]);return e.concat(f)},d.prototype.componentChanged=function(b,c){var d=e(this.widgetInstances,b);a.forEach(d,function(a,d){var e=this.getWidgetHandler(d);e&&e.updateComponent(b,a,c)},this)},c.registerSiteAspect("WidgetAspect",d),d}),define("core/components/siteAspects/componentModesAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";function d(a){this.aspectSiteAPI=a}return d.prototype={getComponentsActiveModes:function(){var a=this.aspectSiteAPI.getSiteAPI().getDAL();return a.getComponentsActiveModes()},activateComponentMode:function(b){var c=this.aspectSiteAPI.getSiteAPI().getDAL(),d=c.getComponentsActiveModes();a.includes(d,b)||(d.push(b),c.setComponentsActiveModes(d),this.aspectSiteAPI.notifyAspects("modeChange"))},deactivateComponentMode:function(b){var c=this.aspectSiteAPI.getSiteAPI().getDAL(),d=c.getComponentsActiveModes();a.includes(d,b)&&(c.setComponentsActiveModes(a.without(d,b)),this.aspectSiteAPI.notifyAspects("modeChange"))},resetActiveComponentModes:function(){var b=this.aspectSiteAPI.getSiteAPI().getDAL(),c=b.getComponentsActiveModes();a.isEmpty(c)||(b.setComponentsActiveModes([]),this.aspectSiteAPI.notifyAspects("modeChange"))}},c.registerSiteAspect("componentModesAspect",d),d}),define("core/components/siteAspects/DynamicClientSpecMapAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";function e(a){var b=a.replace(/\/$/,"")+"/_api/dynamicmodel";return d&&(b=b.replace(/^[^:]+:/,window.location.protocol)),b}function g(a,b,c){var d="error",g={url:e(a.getExternalBaseUrl()),destination:["dynamicClientSpecMapLoaded"],force:c,cache:f,syncCache:!0,transformFunc:function(){return!0},callback:function(c,e){d="success",e.clientSpecMap&&(a.rendererModel.clientSpecMap=e.clientSpecMap),e.svSession&&a.pubSvSession(e.svSession),e.hs&&(a.hs=e.hs),e.ctToken&&(a.ctToken=e.ctToken),b&&b(e)}};a.store.loadBatch([g],function(){"error"===d&&b({status:d})}),f=!1}function h(a){var b=a.getSiteData();if(this.reloadClientSpecMap=function(a,c){b&&b.isViewerMode()&&g(b,a,c)},d){var c=!1;this.reloadClientSpecMap(function(d){b.dynamicModelState="error"===d.status?"error":"success",c&&a.forceUpdate()},!0),c=!0}}var d="undefined"!=typeof window,f=!0;c.registerSiteAspect("dynamicClientSpecMap",h)}),define("core/components/siteAspects/dynamicColorsAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(a){var b=this.aspectSiteAPI.getSiteData().measureMap;return b?{top:b.absoluteTop[a],height:b.height[a]}:{}}function d(a,c){return!b.isEqual(b.pick(a,"height","top"),c)}function e(a){var e=c.call(this,a.id);d(a,e)&&(b.assign(a,e),a.isDirty=!0)}function f(){b.forEach(this.colorElementInfo,e,this)}function g(a){b.forEach(a,function(a){delete a.isDirty})}function h(a){b.forEach(this.observers,function(b){b(a)},this)}function i(){f.call(this);var a=b.filter(this.colorElementInfo,"isDirty");a.length&&(h.call(this,a),g(a))}function j(a){this.aspectSiteAPI=a,this.colorElementInfo={},this.observers=[],a.registerToDidLayout(i.bind(this))}j.prototype={updateInformation:function(a,c){var d=this.colorElementInfo[a],f=b.assign({id:a},d,c);e.call(this,f),b.isEqual(f,d)||(this.colorElementInfo[a]=f,h.call(this,[f]),g([f]))},getInformation:function(a){return a?b.cloneDeep(this.colorElementInfo[a]):b.cloneDeep(this.colorElementInfo)},registerObserver:function(a){this.observers.push(a)},unregisterObserver:function(a){b.pull(this.observers,a)}},a.registerSiteAspect("dynamicColorElements",j)}),define("core/components/siteAspects/VideoBackgroundAspect",["lodash","zepto","utils","core/core/siteAspectsRegistry","animations","experiment!videoVisibilityApiSupport"],function(a,b,c,d,e,f){"use strict";function j(b){var c=a.find(b,{quality:g});return c||parseInt(a.last(b).quality,10)<parseInt(g,10)&&(c=a.last(b)),c||{}}function k(a,b,d){var e=b.formats[0];return c.urlUtils.joinURL(d.getSiteData().getStaticVideoHeadRequestUrl(),a,b.quality,e,"file."+e)}function l(a,b){var c=a.getSiteData(),d=a.getCurrentPageId();return c.getDataByQuery(b,d)}function m(b,c){if(b.testingQuality=j(b.qualities),b){var d=n(b);if("undefined"!=typeof window&&d>0){clearTimeout(b.timerInterval);var e=this.loadDummyVideo.bind(this,c,b.testingQuality);b.timerInterval=setTimeout(e,d)}else b.qualities=a.filter(b.qualities,{quality:b.readyQuality.quality})}}function n(a){var b=(new Date).getTime()-a.timeStamp;return b>4*a.duration?0:b>2*a.duration?Math.max(h,a.duration/8):b>a.duration?Math.max(h,a.duration/4):Math.max(h,a.duration/8)}function o(a){this.siteAPI=a,this.isEnabled=!0,this.playingChangeList=[],this.notifyQualityReadyList=[],this.shouldPlayOnNextTick=!1,this.currentScroll={x:0,y:0},this._lastVisitedPageId=null,this.registerdVideoComponents=[],this.videoAvailabilityCollection=[],a.registerToDidLayout(this.playOnDidLayout.bind(this)),a.registerToScroll(this.playOnNextTick.bind(this)),f&&"undefined"!=typeof document&&a.registerToVisibilityChange(this.togglePlayStateByVisibility.bind(this)),"undefined"!=typeof window&&(this._tickerCallback=this.playOnTick.bind(this),e.addTickerEvent(this._tickerCallback))}var g="1080p",h=5e3,i={IN_PROCESS:"in_process",PLAYING_PREVIEW:"playing_preview",IDLE:"idle",NO_VIDEO:"no_video"};return o.prototype=a.create(Object.prototype,{constructor:o,playOnNextTick:function(){this.shouldPlayOnNextTick=this.isEnabled,this.currentScroll=this.siteAPI.getSiteScroll()},playOnDidLayout:function(){if(this.isEnabled){var b=this.siteAPI.getPageItemInfo(),c=this.siteAPI.getCurrentPageId(),d=a.isEmpty(b)?!1:this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(b);d&&c&&this._lastVisitedPageId!==c&&(this._lastVisitedPageId=c,f?this.togglePlayStateByVisibility():this.playOnNextTick())}},playOnTick:function(){this.shouldPlayOnNextTick&&(this.shouldPlayOnNextTick=!1,this.playAll())},togglePlayStateByVisibility:function(){var a=this.siteAPI.getVisibilityState();a.hidden?(this.shouldPlayOnNextTick=!1,this.pauseAll()):this.playOnNextTick()},playAll:function(b){var c=this.getCurrentPageVideos();a.forEach(c,function(a){this.play(a.compId,!b)},this)},play:function(b,c){var d=a.find(this.registerdVideoComponents,{compId:b});if(!a.isEmpty(d)){var e=this.getQuality(b);this.isComponentInViewport(b.replace("video",""),d.pageId)?d.compInstance.play(e,c):d.compInstance.pause()}},stopAll:function(){var b=this.getCurrentPageVideos();a.forEach(b,function(a){this.stop(a.compId)},this)},stop:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});c&&c.compInstance.stop()},pauseAll:function(){var b=this.getCurrentPageVideos();a.forEach(b,function(a){this.pause(a.compId)},this)},pause:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});c&&c.compInstance.pause()},enableVideoPlayback:function(a){this.isEnabled=!0,a||this.playAll(!0)},disableVideoPlayback:function(a){this.isEnabled=!1,this._lastVisitedPageId=null,this.shouldPlayOnNextTick=!1,a||this.stopAll()},getQuality:function(b){var c=a.find(this.registerdVideoComponents,{compId:b}),d=a.find(this.videoAvailabilityCollection,{videoId:c.videoId});return d.readyQuality||d.testingQuality},loadDummyVideo:function(a,c){b.ajax({url:k(a,c,this.siteAPI),type:"HEAD",success:this._canPlay.bind(this,a),error:this._onError.bind(this,a)})},getReadyState:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});return a.isEmpty(c)?i.NO_VIDEO:this.getVideoReadyState(c.videoId)},getVideoReadyState:function(b){var c=a.find(this.videoAvailabilityCollection,{videoId:b});return c&&c.readyQuality?j(c.qualities).quality===c.readyQuality.quality?i.IDLE:i.PLAYING_PREVIEW:i.IN_PROCESS},getCurrentPageVideos:function(){return this.registerdVideoComponents},isPlaying:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});return c&&c.compInstance&&c.compInstance.isPlaying()},isComponentInViewport:function(a,b){return"siteBackground"===b?!0:c.viewportUtils.isInViewport(this.siteAPI,this.currentScroll,a)},_onError:function(b){var c=a.find(this.videoAvailabilityCollection,{videoId:b});if(c){var d=c.testingQuality.quality,e=a.findIndex(c.qualities,{quality:d}),f=e-1;f>=0&&!this._isNextQualityReady(f,c)?(c.testingQuality=c.qualities[f],this.loadDummyVideo(b,c.testingQuality)):m.call(this,c,b)}},_isNextQualityReady:function(a,b){return b.readyQuality&&b.readyQuality.quality===b.qualities[a].quality},_canPlay:function(b){var c=a.filter(this.registerdVideoComponents,{videoId:b}),d=a.find(this.videoAvailabilityCollection,{videoId:b});d&&(d.readyQuality=d.testingQuality,this.getVideoReadyState(b)!==i.IDLE&&m.call(this,d,b),this.notifyQualityReady(d.readyQuality,b),a.forEach(c,function(a){this.notifyPlayingChanged(a.compId)},this))},unregisterToQualityAvailability:function(b){var c=a.find(this.registerdVideoComponents,{compId:b});if(c){var d=a.find(this.videoAvailabilityCollection,{videoId:c.videoId});"undefined"==typeof window||a.isEmpty(d)||(1===d.compCount&&this.getVideoReadyState(d.videoId)!==i.IDLE?(clearInterval(d.timerInterval),this.videoAvailabilityCollection=a.reject(this.videoAvailabilityCollection,"videoId",c.videoId)):d.compCount--)}},registerToQualityAvailability:function(b){var c=l(this.siteAPI,b.videoItemRef),d=a.find(this.videoAvailabilityCollection,{videoId:b.videoId});a.isEmpty(d)?(d={videoId:b.videoId,readyQuality:null,testingQuality:j(c.qualities),qualities:c.qualities,timeStamp:(new Date).getTime(),duration:1e3*c.duration,compCount:1,timerInterval:0},this.videoAvailabilityCollection.push(d),this.loadDummyVideo(b.videoId,d.testingQuality)):d.compCount++},registerVideo:function(b,c,d,e,f){var g=l(this.siteAPI,d),h={compId:b,pageId:c,videoId:g.videoId,videoItemRef:d,compInstance:f};a.find(this.registerdVideoComponents,{compId:b})&&this.unregisterVideo(b),this.registerdVideoComponents.push(h),this.registerToQualityAvailability(h),this.registerToQualityReady(b,h.videoId,e)},unregisterVideo:function(b){this.unregisterToQualityAvailability(b),this.registerdVideoComponents=a.reject(this.registerdVideoComponents,"compId",b),this.unregisterToQualityReady(b)},registerToQualityReady:function(a,b,c){this.notifyQualityReadyList.push({id:a,videoId:b,callback:c})},registerToPlayingChange:function(a,b){this.playingChangeList.push({id:a,callback:b})},unregisterToQualityReady:function(b){this.notifyQualityReadyList=a.reject(this.notifyQualityReadyList,"id",b)},unregisterToPlayingChange:function(b){this.playingChangeList=a.reject(this.playingChangeList,"id",b)},notifyPlayingChanged:function(b){var c=a.find(this.playingChangeList,{id:b});c&&c.callback&&c.callback(this.isPlaying(b))},notifyQualityReady:function(b,c){var d=a.filter(this.notifyQualityReadyList,{videoId:c});a.forEach(d,function(a){a.callback&&a.callback(b,a.videoId)})},willUnmount:function(){e.removeTickerEvent(this._tickerCallback),"undefined"!=typeof window&&a.forEach(this.videoAvailabilityCollection,function(a){clearTimeout(a.timerInterval)})}}),d.registerSiteAspect("VideoBackgroundAspect",o),o}),define("core/components/siteAspects/touchEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(a,b,c){"use strict";function h(a){g=a,i()}function i(){f.forEach(function(a){e[a]={},g.registerToWindowTouchEvent(a,j)},this)}function j(b){var j,c=b.type.slice("touch".length),f="WindowTouch"+d.capitalize(c),h=e[b.type],i="on"+f;a.forEach(h,function(a){j=g.getComponentById(a),j?j[i]&&j[i](b):delete h[a]},this)}var g,d=c.stringUtils,e={},f=["touchstart","touchmove","touchend","touchcancel"];h.prototype={registerToWindowTouchEvent:function(a,b){e[a.toLowerCase()][b.props.id]=b.props.id},unregisterFromWindowTouchEvent:function(a,b){delete e[a.toLowerCase()][b.props.id]}},b.registerSiteAspect("windowTouchEvents",h)}),define("core/components/siteAspects/anchorLinkChangeEventAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";function d(a){this._aspectSiteAPI=a,this._registeredCompCallbacks={},this._activeAnchor=null,a.registerToScroll(this.onScroll.bind(this))}d.prototype={registerToAnchorChange:function(a){a.onAnchorChange&&(this._registeredCompCallbacks[a.props.id]=a.onAnchorChange)},unregisterToAnchorChange:function(a){delete this._registeredCompCallbacks[a.props.id]},onScroll:function(){if(!a.isEmpty(this._registeredCompCallbacks)){var c=window.pageYOffset||document.body.scrollTop,d=this._aspectSiteAPI.getSiteData(),e=b.anchorUtils.getActiveAnchor(d,c);(null===this._activeAnchor&&e||this._activeAnchor&&this._activeAnchor.activeAnchorComp.id!==e.activeAnchorComp.id)&&(this._activeAnchor=e,this.propagateAnchorChangeEvent())}},propagateAnchorChangeEvent:function(){a.forEach(this._registeredCompCallbacks,function(a){a(this._activeAnchor)},this)}},c.registerSiteAspect("anchorChangeEvent",d)}),define("core/components/siteAspects/aspectsCollector",["core/core/siteAspectsRegistry","core/components/siteAspects/BehaviorsAspect","core/components/siteAspects/loginToWixAspect","core/components/siteAspects/parentFrameAspect","core/components/siteAspects/vkPostMessageAspect","core/components/siteAspects/packagePickerAspect","core/core/pageItemAspect","core/core/nonPageItemZoomAspect","core/components/siteAspects/externalScriptLoaderAspect","core/siteRender/SiteMembersAspect","core/components/siteAspects/windowFocusEventsAspect","core/components/siteAspects/windowScrollEventAspect","core/components/siteAspects/windowResizeEventAspect","core/components/siteAspects/windowKeyboardEventAspect","core/components/siteAspects/MobileActionsMenuAspect","core/components/siteAspects/addComponentAspect","core/components/siteAspects/PinterestWidgetPostMessageAspect","core/components/siteAspects/AudioAspect","core/components/siteAspects/actionsAspect","core/components/siteAspects/WidgetAspect","core/components/siteAspects/componentModesAspect","core/components/siteAspects/DynamicClientSpecMapAspect","core/components/siteAspects/dynamicColorsAspect","core/components/siteAspects/VideoBackgroundAspect","core/components/siteAspects/touchEventsAspect","core/components/siteAspects/anchorLinkChangeEventAspect"],function(a,b){"use strict";a.registerSiteAspect("behaviorsAspect",b)}),define("core/components/audioMixin",["lodash"],function(a){"use strict";return{getInitialState:function(){this.audioAspect=this.props.siteAPI.getSiteAspect("AudioAspect"),this.audioObj=null,this.isAudioPlaying=!1,this.trackPosition=0,this.isPlayingAllowed=this.props.siteData.renderFlags.isPlayingAllowed},componentWillReceiveProps:function(a){this.props.compData.uri!==a.compData.uri&&this.clearAudioObject();var b=this.audioAspect.isCompPlaying(this);b?this.setState({$playerState:"playing"}):this.isAudioPlaying&&this.setState({$playerState:"pausing"})},componentDidUpdate:function(){var a=this.audioAspect.isCompPlaying(this);if("mobile"!==this.getDeviceState()&&this.props.siteData.renderFlags.isPlayingAllowed){if(this.props.siteData.renderFlags.isPlayingAllowed!==this.isPlayingAllowed){this.isPlayingAllowed=this.props.siteData.renderFlags.isPlayingAllowed;var b=this.props.compProp.autoplay||this.props.compData.autoPlay;b&&this.initiatePlay()}}else this.isPlayingAllowed=this.props.siteData.renderFlags.isPlayingAllowed,!this.isPlayingAllowed&&a&&this.initiatePause()},componentDidMount:function(){"mobile"!==this.getDeviceState()&&this.autoplay&&this.isPlayingAllowed&&this.initiatePlay()},componentWillUnmount:function(){this.clearAudioObject()},getOrCreateAudioObject:function(){return this.audioObj||this.createAudioObject()},createAudioObject:function(){var a=this;if(!a.props.compData.uri)return!1;var b={id:a.props.id,url:this.props.siteData.serviceTopology.staticAudioUrl+"/"+a.props.compData.uri,autoPlay:!1,stream:!0,multiShot:!0,multiShotEvents:!0,autoLoad:!a.props.siteData.isMobileView()||!this.isPlayingAllowed,usePolicyFile:!1,whileloading:function(){"function"==typeof a.whileLoadingHandler&&a.whileLoadingHandler(this.duration)},onfailure:function(){a.failedToLoadAudioFile()},onfinish:function(){a.finishedPlayingAudio(this.id)},onsuspend:function(){a.audioLoadingSuspended(this.id)},onload:function(b){b||a.audioAspect.onHTML5ErrorTryToReloadWithFlash()}};return this.audioAspect.createAudioObj(b)},clearAudioObject:function(){this.audioObj&&(this.audioObj.pause(),this.audioObj=null,this.trackPosition=0,this.resetTrackPosition&&this.resetTrackPosition())},failedToLoadAudioFile:function(a){var b="Failed to load audio file "+a,c="color: #ff9494; font-size: 24px;";console.log("%c"+b,c),console.error(b)},audioLoadingSuspended:function(a){var b="Browser has chosen to stop downloading audio file "+a,c="color: #ff9494; font-size: 24px;";console.log("%c"+b,c)},playAudio:function(){var a=this,b={volume:a.audioVolume,position:a.trackPosition,whileplaying:function(){a.trackPosition=this.position,"function"==typeof a.whilePlayingHandler&&a.whilePlayingHandler(this.position)}};this.setVolume(this.audioVolume),this.audioObj.play(b)},updateAudioObject:function(){this.audioObj=this.getOrCreateAudioObject(),this.audioAspect.isSoundManagerOnResetup()&&(this.audioObj=null),this.audioObj&&(this.isAudioPlaying||"playing"!==this.state.$playerState?this.isAudioPlaying&&"pausing"===this.state.$playerState?(this.isAudioPlaying=!1,this.audioObj.pause()):"repeat"===this.state.$playerState&&(this.isAudioPlaying=!1):(this.isAudioPlaying=!0,this.playAudio()))},getDeviceState:function(){return this.props.siteData._isMobileView?"mobile":"desktop"},initiatePlay:function(){a.isEmpty(this.props.compData.uri)||""===this.props.compData.uri||this.audioAspect.updatePlayingComp(this)},initiatePause:function(){this.audioAspect.updatePausingComp(),this.setState({$playerState:"pausing"})},getAudioDuration:function(){return this.audioObj.duration},seekAudio:function(a){this.trackPosition=a,this.isAudioPlaying?this.audioObj.setPosition(a):this.initiatePlay()},setVolume:function(a){this.audioVolume=a,this.isAudioPlaying&&this.audioObj.setVolume(a)},muteAudio:function(){this.audioObj.mute()},unmuteAudio:function(){this.audioObj.unmute()}}}),define("core/components/facebookComponentMixin",["lodash","reactDOM"],function(a,b){"use strict";function c(a,b){return a&&a.height&&a.width&&b&&b.height&&b.width?a.height!==b.height||a.width!==b.width:!1}return{getInitialState:function(){this.loadScript(),this._lastHref=this.getHref(this.props)},loadScript:function(){if("undefined"!=typeof window&&!window.FB){var a=this.props.siteAPI.getSiteAspect("externalScriptLoader");a.loadScript("FACEBOOK",null,this)}},parseFacebookPluginDomNode:function(){a.has(window,"FB.XFBML.parse")&&window.FB.XFBML.parse(b.findDOMNode(this))},componentDidMount:function(){this.parseFacebookPluginDomNode()},componentDidUpdate:function(b){var d=this.getHref(this.props);a.isEqual(b.compData,this.props.compData)&&a.isEqual(b.compProp,this.props.compProp)&&!c(b.style,this.props.style)&&d===this._lastHref||this.parseFacebookPluginDomNode(),this._lastHref=d}}}),define("core/components/twitterComponentMixin",["lodash","utils"],function(a,b){"use strict";function d(a,c){return"userLang"===a?b.wixUserApi.getLanguage(c.requestModel.cookie,c.currentUrl):a}var c=["da","de","en","es","fr","hi","it","ja","ko","nl","no","pl","pt","ru","sv","tr"];return{getInitialState:function(){return{width:this.props.style.width,height:this.props.style.height}},componentDidMount:function(){window.addEventListener("message",this.processMessage)},componentWillUnmount:function(){window.removeEventListener("message",this.processMessage)},processMessage:function(a){a.data&&"twitterSize"===a.data.type&&a.data.compId===this.props.id&&(this.registerReLayout(),this.setState(a.data.size))},getLanguage:function(){var b=d(this.props.compProp.dataLang,this.props.siteData);return a.includes(c,b)?b:"en"},getSkinProperties:function(){return{"":{style:{width:this.state.width,height:this.state.height}},iframe:{src:this.getIFrameSrc(),width:this.state.width,height:this.state.height}}}}}),define("core/components/util/galleryPagingCalculations",["lodash","utils"],function(a,b){"use strict";var c=b.matrixCalculations,d={getNumberOfDisplayedRows:function(a,b,d,e){return a||e&&b*d>e?b:c.getAvailableRowsNumber(b,d,e)},getItemsPerPage:function(a,b,c){return a*this.getNumberOfDisplayedRows(null,b,a,c)},getTotalPageCount:function(a,b,c){var d=this.getItemsPerPage(a,b,c),e=Math.floor(c/d);return c%d>0&&e++,e},getNextPageItemIndex:function(a,b,c,d){var e=a+this.getItemsPerPage(b,c,d);return e>=d&&(e=0),e},getPrevPageItemIndex:function(a,b,c,d){var e=this.getItemsPerPage(b,c,d),f=a-e;return 0>f&&(f=(this.getTotalPageCount(b,c,d)-1)*e),f},getCounterText:function(a,b,c,d){var e=Math.floor(a/this.getItemsPerPage(b,c,d)),f=this.getTotalPageCount(b,c,d);return f||(f=1),String(e+1)+"/"+String(f)},getPageItems:function(a,b,c,d){return this.getPageItemsByStartIndex(a,b,this.getItemsPerPage(c,d,a.length))},getPageItemsByStartIndex:function(a,b,c){var d=[];if(c<a.length){for(var e=this.getLastItemIndex(a,b,c),f=b;e>=f;f++)d.push(a[f]);return d}return a},getLastItemIndex:function(a,b,c){return Math.min(a.length-1,b+c-1)}};return d}),define("core/components/util/galleriesHelperFunctions",["skins","utils","lodash"],function(a,b,c){"use strict";function e(a){var b=d[a].exports;return b&&b.heightDiff||0}function f(a){var b=d[a].exports;return b&&b.widthDiff||0}function g(a,c,d,e,f){var g=d,h=this.getSkinHeightDiff(e),i=b.matrixCalculations,j=i.getItemHeight(d,f,a,h);return Math.floor(c*j+(c-1)*g)+h}function h(a,b,d){var e=0,f=parseInt(b.imgHeightDiff&&b.imgHeightDiff.value,10)||0,g=parseInt(b.topPadding&&b.topPadding.value,10)||0;return f||g?e=f+g:a&&a.exports&&(e="mobileView"===d&&c.isNumber(a.exports.m_heightDiff)?a.exports.m_heightDiff:a.exports.heightDiff||0),e}function i(a,b){var d=0;return a&&a.exports&&(d="mobileView"===b&&c.isNumber(a.exports.m_widthDiff)?a.exports.m_widthDiff:a.exports.widthDiff||0),d}var d=a.skins;return{getSkinHeightDiff:e,getSkinWidthDiff:f,getGalleryHeight:g,getDisplayerHeightDiff:h,getDisplayerWidthDiff:i}}),define("core/components/textCompMixin",["lodash","core/components/skinBasedComp"],function(a,b){"use strict";return{mixins:[b.skinBasedComp],componentWillMount:function(){this.convertCompDataTextToHTML(this.props)},componentWillReceiveProps:function(a){this.convertCompDataTextToHTML(a)},getRootStyle:function(b){var c=a.clone(b||{});return"hidden"!==(c["overflow-y"]||c.overflowY)&&(c.height="auto"),c},getSkinProperties:function(){this.lastScale=a.get(this,"props.structure.layout.scale")||1;var d,b=this.props.skin,c={"":{style:this.getRootStyle(this.props.style)}};return d="wysiwyg.viewer.skins.WRichTextSkin"===b||"wysiwyg.viewer.skins.WRichTextClickableSkin"===b?c.richTextContainer={}:c[""],d.dangerouslySetInnerHTML={__html:this._componentHtml||""},this.props.title&&(c[""].title=this.props.title),c}}}),define("core/components/mediaZoomWrapperMixin",["lodash","react","core/core/componentPropsBuilder","core/siteRender/compFactory","core/components/skinBasedComp"],function(a,b,c,d,e){"use strict";return{mixins:[e.skinBasedComp],componentWillMount:function(){var a=this.props.siteAPI.getSiteAspect("windowKeyboardEvent");a.registerToEscapeKey(this);var b=this.props.siteAPI.getSiteAspect("windowTouchEvents");b.registerToWindowTouchEvent("touchMove",this);var c=this.getPrevAndNextState();c.next&&a.registerToArrowRightKey(this),c.prev&&a.registerToArrowLeftKey(this)},componentWillUnmount:function(){this.props.siteAPI.getSiteAspect("windowKeyboardEvent").unRegisterKeys(this),this.props.siteAPI.getSiteAspect("windowTouchEvents").unregisterFromWindowTouchEvent("touchMove",this)},getSkinProperties:function(){var a=this.getChildZoomComponentType(),b="wysiwyg.viewer.components.MobileMediaZoom"===a;return{"":{children:this.createChildComponent(this.props.compData,a,"mediaZoom",{ref:this.props.compData.id,actualNavigateToItemFunc:this.actualNavigateToItem,getBoxDimensionsFunc:this.getBoxDimensions,getChildCompFunc:this.getChildComp,getPrevAndNextStateFunc:this.getPrevAndNextState,isDataChangedFunc:this.isDataChanged,closeFunction:this.props.closeFunction,enableInnerScrolling:this.enableInnerScrolling||!1}),style:{width:"100%",height:"100%",position:b?"static":"absolute"}}}},closeMediaZoom:function(){this.refs[this.props.compData.id].closeMediaZoom()},onEscapeKey:function(){this.closeMediaZoom()},onArrowLeftKey:function(){
this.refs[this.props.compData.id].clickOnPreviousButton()},onArrowRightKey:function(){this.refs[this.props.compData.id].clickOnNextButton()},onWindowTouchMove:function(a){this.enableInnerScrolling||(a.preventDefault(),a.stopPropagation())}}}),define("core/components/buttonMixin",["lodash","fonts","skins","utils"],function(a,b,c,d){"use strict";function f(a){var b={};if("center"!==a.compProp.align){var c="margin"+(a.compProp.align?d.stringUtils.capitalize(a.compProp.align):""),e=a.siteData.measureMap&&a.siteData.measureMap.custom[a.id+"label"];b[c]=e?e[c]:a.compProp.margin}return b}function g(a){var b={};return""!==a.compProp.padding&&(b.padding=a.compProp.padding),b}function h(a){var b={};if(a.siteData.isMobileView()){var c=i(a);c&&(b.fontSize=j(c,a)+"px")}return b}function i(a){var b=a.structure.styleId,d=a.siteData.getAllTheme()[b],f=d?d.style.properties.fnt:c.skins[a.skin].paramsDefaults.fnt;if(f){var g=a.siteData.getFont(f)||f;return parseInt(e.parseFontStr(g).size,10)}}function j(a,b){var c=b.structure.layout.scale;return b.siteData.mobile.convertFontSizeToMobile(a,c)}function k(){return this.shouldRecalculateLineHeight?{lineHeight:""}:{}}var e=b.fontUtils,l={componentWillMount:function(){this.currentStyle=this.props.siteData.getAllTheme()[this.props.structure.styleId],this.currentScale=a.get(this,"props.structure.layout.scale",1)},componentWillReceiveProps:function(b){var c=b.siteData.getAllTheme()[b.structure.styleId],d=a.get(b,"structure.layout.scale",1);a.isEqual(this.currentStyle,c)&&this.currentScale===d||(this.shouldRecalculateLineHeight=!0),this.currentStyle=c,this.currentScale=d},componentDidUpdate:function(){this.shouldRecalculateLineHeight&&(this.shouldRecalculateLineHeight=!1)},resetMinHeightIfNeeded:function(a){this.shouldRecalculateLineHeight&&(a[""]=a[""]||{},a[""].style=a[""].style||{},a[""].style.minHeight="")},getLabelStyle:function(){return a.merge(f(this.props),g(this.props),h(this.props),k.call(this))},getDesktopFontSize:i};return l}),define("core/components/util/matrixAnimationManipulation",["lodash"],function(a){"use strict";function b(){return.1}var c={getDefultAnimationValues:function(a,b,c,d){return{sourceNodesArrSorted:[a],destNodesArrSorted:[b],stagger:0,timingFunctionIndex:c,transName:d,sporadicallyRandom:!1}},getUpdatedTimingFunctionIndex:function(a,b){return b>a.length-1&&(b=0),b},getCrossFadePossibleTransitionByName:function(a){switch(a){case"crossFadeHorizWave":return this.sortMatrixByRows;case"crossFadeVertWave":return this.sortMatrixByCols;case"seq_crossFade_Diagonal":return this.convertMatrixToDiagonal}},convertArrayToMatrix:function(b,c,d){var e=0,f=new Array(c);return a.times(c,function(c){f[c]||(f[c]=[]),a.times(d,function(a){e<b.length?(f[c][a]=b[e],e++):f[c][a]=-1})}),f},sortMatrixByRows:function(a){return[a]},sortMatrixByCols:function(b,c,d){var e=this.convertArrayToMatrix(b,c,d),f=[],g=0;return a.times(d,function(b){a.times(c,function(a){-1!==e[a][b]&&(f[g]=e[a][b],g++)})}),[f]},reverseMatrix:function(a){return a.reverse()},convertMatrixToDiagonal:function(b,c,d){var e=this.convertArrayToMatrix(b,c,d),f=[],g=0;return a.times(c+d,function(b){var h=Math.max(0,b-c),i=Math.min(d-h,b,c);a.times(i,function(a){var d=e[Math.min(c,b)-a-1][h+a];-1!==d&&(f[g]=d,g++)})}),[f]},convertMatrixToReverseDiagonal:function(a,b,c){var d=this.convertMatrixToDiagonal(a,b,c);return this.reverseMatrix(d)},getMatrixByRows:function(b,c,d){var e=0,f=new Array(c);return a.times(c,function(c){f[c]||(f[c]=[]),a.times(d,function(a){e<b.length&&(f[c][a]=b[e],e++)})}),f},getMatrixByRowsReverse:function(a,b,c){var d=this.getMatrixByRows(a,b,c);return this.reverseMatrix(d)},getMatrixByColsReverse:function(a,b,c){var d=this.getMatrixByCols(a,b,c);return this.reverseMatrix(d)},getMatrixByCols:function(b,c,d){var e=this.getMatrixByRows(b,c,d),f=new Array(d);return a.times(d,function(b){f[b]||(f[b]=[]),a.times(c,function(a){e[a][b]&&(f[b][a]=e[a][b])})}),f}},d={getSortedArrayAndStagger:function(a,d,e,f,g,h){switch(a){case"none":return{sourceNodesArrSorted:[d],destNodesArrSorted:[e],stagger:0,transName:"NoTransition"};case"seq_shrink_All":case"seq_crossFade_All":var i=[c.sortMatrixByRows,c.sortMatrixByCols,c.reverseMatrix,c.convertMatrixToDiagonal,c.convertMatrixToReverseDiagonal,c.sortMatrixByRows];h=c.getUpdatedTimingFunctionIndex(i,h);var j=i[h];return{sourceNodesArrSorted:j.call(c,d,f,g),destNodesArrSorted:j.call(c,e,f,g),stagger:h===i.length-1||d.length!==e.length?0:.1,timingFunctionIndex:h,transName:"seq_shrink_All"===a?"Shrink":"CrossFade"};case"swipe_horiz_All":var k=[c.getMatrixByRows,c.getMatrixByRowsReverse];h=c.getUpdatedTimingFunctionIndex(k,h);var l=k[h];return{sourceNodesArrSorted:l.call(c,d,f,g),destNodesArrSorted:l.call(c,e,f,g),stagger:b(),timingFunctionIndex:h,transName:"SlideHorizontal",sporadicallyRandom:f>1};case"swipe_vert_All":var m=[c.getMatrixByCols,c.getMatrixByColsReverse];h=c.getUpdatedTimingFunctionIndex(m,h);var n=m[h];return{sourceNodesArrSorted:n.call(c,d,f,g),destNodesArrSorted:n.call(c,e,f,g),stagger:b(),timingFunctionIndex:h,transName:"SlideVertical",sporadicallyRandom:g>1};case"seq_random":var o=["seq_shrink_All","seq_crossFade_All","swipe_horiz_All","swipe_vert_All"],p=o[Math.floor(Math.random()*o.length)];return this.getSortedArrayAndStagger(p,d,e,f,g,h);case"horizSwipeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"SlideHorizontal");case"vertSwipeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"SlideVertical");case"crossFadeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"CrossFade");case"crossFadeHorizWave":case"crossFadeVertWave":case"seq_crossFade_Diagonal":var q=c.getCrossFadePossibleTransitionByName(a);return{sourceNodesArrSorted:q.call(c,d,f,g),destNodesArrSorted:q.call(c,e,f,g),stagger:.1,timingFunctionIndex:h,transName:"CrossFade"};case"seq_swipe_alternate":var r=[c.getMatrixByRows,c.getMatrixByCols];return h=c.getUpdatedTimingFunctionIndex(r,h),{sourceNodesArrSorted:d,destNodesArrSorted:e,stagger:b(),timingFunctionIndex:h,transName:0===h?"SlideHorizontal":"SlideVertical"}}}};return d}),define("core/components/uniquePageIdProviders/singlePostUniquePageIdProvider",["utils","lodash"],function(a,b){"use strict";function f(){var a=Array.prototype.slice.call(arguments,0);return c.SHA256.hex_sha256(a.join("/"))}var c=a.hashUtils,d="ea63bc0f-c09f-470c-ac9e-2a408b499f22",e="blog";return{isMatched:function(a){return b(a.data.document_data).pluck("appPartName").compact().contains(d)},getUniquePageId:function(a,c){var g=b.findWhere(a.data.document_data,{appPartName:d}),h=c.wixapps.blog[g.id][1];return f(c.siteId,e,h)}}}),define("core/components/uniquePageIdProviders/uniquePageIdProviders",["core/components/uniquePageIdProviders/singlePostUniquePageIdProvider"],function(){"use strict";return Array.prototype.slice.call(arguments,0)}),define("core/components/uniquePageIdMixin",["lodash","core/components/uniquePageIdProviders/uniquePageIdProviders"],function(a,b){"use strict";function c(b,c){return a(b.pagesData.masterPage.structure.children).map(function(b){return a.isArray(b.components)?b.components:b}).flattenDeep().pluck("id").contains(c)}return{getUniquePageId:function(){var d;if(c(this.props.siteData,this.props.id)){var e=this.props.siteData.currentUrl;return e.protocol+"//"+e.host+e.path+e.port}return d=a.find(b,function(a){return a.isMatched(this.props.pageData,this.props.siteData)},this),a.isUndefined(d)?this.props.siteData.currentUrl.full:d.getUniquePageId(this.props.pageData,this.props.siteData)}}}),define("core/components/bgVideoMixin",["lodash","react","reactDOM"],function(a,b,c){"use strict";return{propType:{parentId:b.PropTypes.string.isRequired,compData:b.PropTypes.object.isRequired},getInitialState:function(){this.videoBackgroundAspect=this.props.siteAPI.getSiteAspect("VideoBackgroundAspect"),this.showOnNextTick=!1,this.errorMode=!1;var a=this.getVideoData(),b=this.getParentId();return this.videoBackgroundAspect.registerVideo(this.props.refInParent,b,a.id,this.qualityReady,this),this.resetVideoStates()},getParentId:function(){return this.props.parentId},resetVideoStates:function(){return{stopped:!0,paused:!1,ready:!1,active:!0,loaded:!1,playEnded:!1,videoQuality:this.videoBackgroundAspect.getQuality(this.props.refInParent)}},componentDidMount:function(){var a=this.getVideoData();this.videoBackgroundAspect.registerVideo(this.props.refInParent,this.getParentId(),a.id,this.qualityReady,this),this.setPlaybackSpeed(a.playbackSpeed||1),this.registerEvents()},componentWillUnmount:function(){var a=this.getInstance();a.removeEventListener("timeupdate",this.onTimeUpdate),a.removeEventListener("ended",this.onPlayEnded),a.removeEventListener("error",this.onError),a.removeEventListener("stalled",this.onStalled),this.videoBackgroundAspect.unregisterVideo(this.props.refInParent),this.removeVideoSecurely()},componentWillReceiveProps:function(a){var b=a.compData,c=this.getVideoData();if(this.setPlaybackSpeed(b.playbackSpeed||1),b.loop&&!c.loop&&this.setState({playEnded:!1}),b.videoId!==c.videoId){var d=this.getParentId();this.videoBackgroundAspect.registerVideo(this.props.refInParent,d,b.id,this.qualityReady,this),this.stop(),this.setState(this.resetVideoStates())}},registerEvents:function(){this.getInstance().addEventListener("timeupdate",this.onTimeUpdate,!0),this.getInstance().addEventListener("ended",this.onPlayEnded,!0),this.getInstance().addEventListener("error",this.onError,!0),this.getInstance().addEventListener("stalled",this.onStalled,!0)},isLoadNeeded:function(a,b){var c=a.compData,d=this.getVideoData();return this.errorMode||c.videoId!==d.videoId||!b.videoQuality||this.state.videoQuality.quality!==b.videoQuality.quality||!this.state.active&&b.active},componentDidUpdate:function(a,b){var c=this.getVideoData();this.isLoadNeeded(a,b)&&(this.errorMode=!1,this.load()),this.getInstance().paused&&!b.active&&this.state.active||!this.state.stopped&&!this.state.paused?(this.getInstance().play(),this.setPlaybackSpeed(c.playbackSpeed||1),this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent)):!b.stopped&&this.state.stopped?(this.getInstance().pause(),this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent),this.state.active&&this.state.loaded&&this.getInstance().currentTime>0&&(this.getInstance().currentTime=0)):!b.paused&&this.state.paused&&(this.getInstance().pause(),this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent)),!b.ready&&this.state.ready?this.showOnNextTick=!0:b.ready&&!this.state.ready&&(this.getInstance().style.visibility="hidden",this.showOnNextTick=!1)},notifyPlayingChange:function(){this.videoBackgroundAspect.notifyPlayingChanged(this.props.refInParent)},getInstance:function(){return c.findDOMNode(this.refs.video)},setPlaybackSpeed:function(a){this.getInstance().playbackRate=a},load:function(){var a=this.getInstance();a.load()},removeVideoSecurely:function(){var b=this.getInstance();b.pause(),a.forEach(b.children,function(a){"source"===a.nodeName.toLowerCase()&&a.setAttribute("src","")}),b.load()},kill:function(){this.state.active&&(this.removeVideoSecurely(),this.setState({active:!1,ready:!1,stopped:!0,loaded:!1}))},play:function(b,c){if(!c||!this.state.playEnded){var d={};this.state.active?this.state.stopped?d={stopped:!1,ready:!1}:this.state.paused&&(d={paused:!1}):d={active:!0,ready:!1,stopped:!1,pause:!1},(!this.state.videoQuality||b&&b.quality!==this.state.videoQuality.quality)&&(d.videoQuality=b),a.isEmpty(d)||this.setState(d)}},stop:function(b){this.state.stopped||this.setState(a.assign({ready:!1,stopped:!0,paused:!1},b?{playEnded:b}:{}))},pause:function(){this.state.stopped||this.state.paused||this.setState({paused:!0})},onPlayEnded:function(){this.stop(!0)},onError:function(a){a.currentTarget.networkState===a.currentTarget.NETWORK_NO_SOURCE&&(this.errorMode=!0)},onStalled:function(a){a.currentTarget.readyState===a.currentTarget.HAVE_NOTHING&&(this.errorMode=!0)},onTimeUpdate:function(){this.state.ready||!this.state.active||this.state.stopped||this.setState({ready:!0,loaded:!0}),this.showOnNextTick&&this.getInstance().currentTime&&(this.showOnNextTick=!1,this.getInstance().currentTime>0&&(this.getInstance().currentTime=0),this.getInstance().style.visibility="visible")},isPlaying:function(){return this.state.active&&!this.state.stopped&&!this.state.paused},getVideoData:function(){return this.props.compData},qualityReady:function(a,b){b!==this.getVideoData().videoId||!this.errorMode&&this.isPlaying()||(this.registerReLayout(),this.setState({videoQuality:a,ready:!1,loaded:!1}))}}}),define("core/activities/activity",["utils"],function(a){"use strict";var b=function(){return{additionalInfoUrl:null,summary:""}},c=function(a){return a.currentUrl.full},d=function(){return a.guidUtils.getUniqueId()},e=function(a,b,c){this._siteData=a,this._fields=b,this._type=c||""};return e.prototype={getParams:function(){return{hs:this._siteData.getHubSecurityToken(),"activity-id":d(),"metasite-id":this._siteData.getMetaSiteId(),svSession:this._siteData.getSvSession(),version:"1.0.0"}},getPayload:function(){return{activityDetails:b(),activityInfo:"activityInfo",activityLocationUrl:c(this._siteData),activityType:"activityType",contactUpdate:{},createdAt:(new Date).toISOString()}}},e}),define("core/activities/tpaActivity",["lodash","core/activities/activity"],function(a,b){"use strict";var c=function(a,c,d){b.call(this,a,c,d)};return c.prototype=new b,c.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c),e={"application-id":this._fields.appDefinitionId,instance:this._fields.instance};return e=a.assign(d,e)},c.prototype.getPayload=function(c){var d=b.prototype.getPayload.call(this,c),e={contactUpdate:this._fields.contactUpdate,activityInfo:this._fields.info,activityType:this._fields.type,activityDetails:this._fields.details};return e=a.assign(d,e)},c}),define("core/activities/contactFormActivity",["lodash","core/activities/activity"],function(a,b){"use strict";var c=29,d=function(b){var c="";return c+=b.subject?"<strong>"+b.subject+"</strong>":"",b.message&&(c+=b.subject?"<br>":"",c+=b.message),{additionalInfoUrl:null,summary:a.isEmpty(c)?"No message was received":c}},e={name:{first:"",last:""},emails:[{tag:"main",email:""}],phones:[{tag:"main",phone:""}],addresses:[{tag:"main",address:""}]},f={name:"name",email:"emails",phone:"phones",address:"addresses"},g=function(a){var b={fields:[]};return Object.keys(a).forEach(function(c){b.fields.push({name:c,value:a[c]})}),b},h=function(b){var c=a.map(b,function(a,b){return f[b]},this),d=a.pick(e,c);return j(d,b),i(d,b),a.forEach(b,function(b,c){var e=d[f[c]];a.isArray(e)&&(a.first(e)[c]=b)},this),d},i=function(a,b){b.phone||(b.phone=""),b.phone=b.phone.substring(0,c)},j=function(a,b){b.name||(b.name="");var c=b.name.split(" ");a.name&&(a.name.first=c[0],a.name.last=c[1])},k=function(a,c,d){b.call(this,a,c,d)};return k.prototype=new b,k.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c),e={"component-name":"ContactForm"};return e=a.assign(d,e)},k.prototype.getPayload=function(c){var e=b.prototype.getPayload.call(this,c),f={contactUpdate:h(this._fields),activityInfo:g(this._fields),activityDetails:d(this._fields),activityType:"contact/contact-form"};return f=a.assign(e,f)},k}),define("core/activities/subscribeFormActivity",["lodash","core/activities/activity"],function(a,b){"use strict";var c=function(b){var c={fields:[]};return Object.keys(b).forEach(function(a){c.fields.push({name:a,value:b[a]})}),c.email=b.email,(b.first||b.last)&&(c.name=a.pick({first:b.first,last:b.last},a.identity)),b.phone&&(c.phone=b.phone),c},d=function(a){return{name:{first:a.first||"",last:a.last||""},emails:[{tag:"main",email:a.email||""}],phones:a.phone?[{tag:"main",phone:a.phone||""}]:[],emailSubscriptionPolicy:"RECURRING"}},e=function(a,c,d){b.call(this,a,c,d)};return e.prototype=new b,e.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c),e={"component-name":"subscribeForm"};return e=a.assign(d,e)},e.prototype.getPayload=function(e){var f=b.prototype.getPayload.call(this,e),g={contactUpdate:d(this._fields),activityInfo:c(this._fields),activityType:"contact/subscription-form"};return g=a.assign(f,g)},e}),define("core/activities/activityTypes",["core/activities/tpaActivity","core/activities/contactFormActivity","core/activities/subscribeFormActivity"],function(a,b,c){"use strict";return{TPAActivity:a,ContactFormActivity:b,SubscribeFormActivity:c}}),define("core/activities/activityService",["utils"],function(a){"use strict";var b=a.urlUtils,c=a.ajaxLibrary,d="/_api/app-integration-bus-web/v1/activities",e="http://wix.com",f=function(a){this._host=a};return f.prototype.reportActivity=function(a,f,g){var h=a.getParams(),i=a.getPayload(),j="?"+b.toQueryString(h),k=this._host?"http://"+this._host:e;k+=d+j,c.ajax({type:"POST",url:k,data:i,dataType:"json",contentType:"application/json",success:f,error:g})},f}),define("core/components/transitionGroup",["lodash","react"],function(a,b){"use strict";function c(a){var c={},d=0;return b.Children.forEach(a,function(a){c[a.key||""+d++]=a}),c}var d=b.createClass({displayName:"ReactTransitionGroup",propTypes:{component:b.PropTypes.any,childFactory:b.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:a.identity}},getInitialState:function(){return{children:c(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var a=this.state.children;for(var b in a)a[b]&&this.performAppear(b)},componentWillReceiveProps:function(b){var d=c(b.children),e=this.state.children;this.setState({children:a.assign({},e,d)});var f;for(f in d)!d[f]||e&&e.hasOwnProperty(f)||this.currentlyTransitioningKeys[f]||this.keysToEnter.push(f);for(f in e)!e[f]||d&&d.hasOwnProperty(f)||this.currentlyTransitioningKeys[f]||this.keysToLeave.push(f)},componentDidUpdate:function(){var a=this.keysToEnter;this.keysToEnter=[],a.forEach(this.performEnter);var b=this.keysToLeave;this.keysToLeave=[],b.forEach(this.performLeave)},performAppear:function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillAppear?b.componentWillAppear(this._handleDoneAppearing.bind(this,a)):this._handleDoneAppearing(a)},_handleDoneAppearing:function(a){var b=this.refs[a];b.componentDidAppear&&b.componentDidAppear(),delete this.currentlyTransitioningKeys[a];var d=c(this.props.children);d&&d.hasOwnProperty(a)||this.performLeave(a)},performEnter:function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillEnter?b.componentWillEnter(this._handleDoneEntering.bind(this,a)):this._handleDoneEntering(a)},_handleDoneEntering:function(a){var b=this.refs[a];b.componentDidEnter&&b.componentDidEnter(),delete this.currentlyTransitioningKeys[a];var d=c(this.props.children);d&&d.hasOwnProperty(a)||this.performLeave(a)},performLeave:function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillLeave?b.componentWillLeave(this._handleDoneLeaving.bind(this,a)):this._handleDoneLeaving(a)},_handleDoneLeaving:function(b){var d=this.refs[b];d.componentDidLeave&&d.componentDidLeave(),delete this.currentlyTransitioningKeys[b];var e=c(this.props.children);e&&e.hasOwnProperty(b)?this.performEnter(b):this.setState(function(c){var d=a.assign({},c.children);return delete d[b],{children:d}})},render:function(){var a=[];for(var c in this.state.children)if(this.state.children[c]){var d=this.state.children[c];a.push(b.cloneElement(this.props.childFactory(d),{ref:c,key:c}))}return b.createElement(this.props.component,this.props,a)}});return d}),define("core/components/wixTransitionItem",["lodash","react","core/components/animatableMixin"],function(a,b,c){"use strict";var d=b.createClass({displayName:"wixTransitionItem",mixins:[c],render:function(){return this.props.children},componentWillEnter:function(a){this.props.onWillEnter(this.props.refInParent,a)},componentWillLeave:function(a){this.props.onWillLeave(this.props.refInParent,a)}});return d}),define("core/components/wixTransitionGroup",["lodash","react","core/components/transitionGroup","core/components/wixTransitionItem","core/components/animationsMixin"],function(a,b,c,d,e){"use strict";c=b.createFactory(c);var f=b.createClass({displayName:"wixTransitionGroup",mixins:[e],getDefaultProps:function(){return{transition:"CrossFade",transitionDuration:2,reverse:!1,transitionCallback:a.noop}},getInitialState:function(){return this.leavingChildren={},this.enteringChildren={},{}},render:function(){return c(a.assign({childFactory:this.childWrapper,component:"div",ref:"group"},a.omit(this.props,"transition")))},childWrapper:function(a){return b.createElement(d,{onWillEnter:this.onWillEnter,onWillLeave:this.onWillLeave,refInParent:a.props.refInParent,ref:a.props.refInParent,key:a.props.refInParent},a)},getInnerRefs:function(b){return a.map(b,function(a){return this.refs.group.refs[a]},this)},flush:function(){if(!a.isEmpty(this.enteringChildren)&&a.size(this.leavingChildren)===a.size(this.enteringChildren)){var b=this.getInnerRefs(a.keys(this.leavingChildren)),c=this.getInnerRefs(a.keys(this.enteringChildren)),d=a.values(this.enteringChildren).concat(a.values(this.leavingChildren));this.leavingChildren={},this.enteringChildren={};var e=a.isFunction(this.props.getTransitionParams)?this.props.getTransitionParams():{};this.transition(b,c,this.props.transition,this.props.transitionDuration,0,a.assign({reverse:this.props.reverse},e),{onComplete:function(){this.props.transitionCallback(),a.forEach(d,function(a){a()})}.bind(this)})}},onWillEnter:function(a,b){this.enteringChildren[a]=b,this.flush()},onWillLeave:function(a,b){this.leavingChildren[a]=b,this.flush()}});return f}),define("core/components/socialCompMixin",[],function(){"use strict";return{getSocialUrl:function(a){var b=this.props.compData?this.props.compData.urlScheme:this.props.siteData.getUrlScheme();return a?this.props.siteData.getMainPageUrl(b):this.props.siteData.getCurrentUrl(b)}}}),define("core",["utils","core/core/site","core/siteRender/compFactory","core/siteRender/compRegistrar","core/util/transitions","core/siteRender/styleCollector","core/core/dataRequirementsChecker","core/core/siteAspectsRegistry","core/core/widgetCollectorRegistry","core/components/animationsMixin","core/components/gallerySizeScaling","core/components/baseCompMixin","core/components/skinBasedComp","core/components/fixedPositionContainerMixin","core/components/galleryAutoPlay","core/components/optionInput","core/components/skinInfo","core/core/componentPropsBuilder","core/components/siteAspects/aspectsCollector","core/siteRender/SiteAPI","core/siteRender/SiteDAL","core/components/siteAspects/PinterestWidgetPostMessageAspect","core/components/siteAspects/AudioAspect","core/components/audioMixin","core/components/facebookComponentMixin","core/components/twitterComponentMixin","core/components/util/galleryPagingCalculations","core/components/util/galleriesHelperFunctions","core/components/util/boxSlideShowCommon","core/components/textCompMixin","core/components/mediaZoomWrapperMixin","core/components/buttonMixin","core/components/util/matrixAnimationManipulation","core/components/uniquePageIdMixin","core/components/bgVideoMixin","core/siteRender/WixSiteHeadRenderer","core/activities/activityTypes","core/activities/activityService","core/siteRender/SiteAspectsSiteAPI","core/bi/events","core/components/renderDoneMixin","core/components/wixTransitionGroup","core/components/behaviorHandlers/behaviorHandlersFactory","core/components/socialCompMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R){"use strict";return{SiteData:a.SiteData,SiteAPI:t,SiteDAL:u,MobileDeviceAnalyzer:a.MobileDeviceAnalyzer,renderer:b,WixSiteHeadRenderer:J,compFactory:c,compRegistrar:d,transitions:e,styleCollector:f,dataRequirementsChecker:g,siteAspectsRegistry:h,widgetCollectorRegistry:i,componentPropsBuilder:r,compMixins:{intervalsMixin:a.timerMixins.intervalsMixin,timeoutsMixin:a.timerMixins.timeoutsMixin,fixedPositionContainerMixin:n,skinBasedComp:m.skinBasedComp,animationsMixin:j,galleryAutoPlay:o,optionInput:p,skinInfo:q,audioMixin:x,facebookComponentMixin:y,twitterComponentMixin:z,textCompMixin:D,mediaZoomWrapperMixin:E,buttonMixin:F,baseCompMixin:l,postMessageCompMixin:a.postMessageCompMixin,uniquePageIdMixin:H,bgVideoMixin:I,renderDoneMixin:O,socialCompMixin:R},componentUtils:{galleryPagingCalculations:A,matrixAnimationManipulation:G,galleriesHelperFunctions:B,boxSlideShowCommon:C},activityTypes:K,ActivityService:L,SiteAspectsSiteAPI:M,behaviorHandlersFactory:Q,wixTransitionGroup:P,biEvents:N}});